[tox]
envlist =
    format
    prospector
    py{37,38,39,310,311}
skipsdist=true

[gh-actions]
python =
    3.7: py37
    3.8: py38
    3.9: py39
    3.10: py310, format, prospector
    3.11: py311

[testenv]
description =
    Run unittests with coverage
deps =
    -rrequirements/requirements-test.txt
    -rrequirements/requirements.txt
commands =
    pytest --cov=requests_session_plus --cov-branch --cov-report=term-missing --cov-report=xml tests/

[testenv:format]
description =
    Run black and isort code formatting check
deps =
    -rrequirements/requirements-format.txt
commands =
    black --check --line-length 120 .
    isort --check --line-length 120 --profile black .

[testenv:prospector]
description =
    Runs default prospector scans plus bandit and mypy
deps =
    -rrequirements/requirements-lint.txt
    -rrequirements/requirements.txt
commands =
    prospector
