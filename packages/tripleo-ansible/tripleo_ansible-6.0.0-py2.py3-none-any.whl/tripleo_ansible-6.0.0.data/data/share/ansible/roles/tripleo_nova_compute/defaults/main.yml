---
# Copyright 2022 Red Hat, Inc.
# All Rights Reserved.
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.


# All variables intended for modification should be placed in this file.

# All variables within this role should have a prefix of "tripleo_nova_compute"
tripleo_nova_compute_debug: "{{ (ansible_verbosity | int) >= 2 | bool }}"
tripleo_nova_compute_deploy_identifier: "{{ tripleo_deploy_identifier | default('') }}"
tripleo_nova_compute_hide_sensitive_logs: true
tripleo_nova_compute_container_image: "quay.io/tripleomastercentos9/openstack-nova-compute:current-tripleo"  # role specific
tripleo_nova_compute_container_nova_libvirt_config_image: "{{ tripleo_nova_libvirt_container_config_image | default(tripleo_nova_compute_container_image) }}"
tripleo_nova_compute_docker_ulimit: ['nofile=131072', 'memlock=67108864']
tripleo_nova_compute_logging_source:
  tag: openstack.nova.compute
  file: /var/log/containers/nova/nova-compute.log
tripleo_nova_compute_ceph_config_path: "{{ tripleo_ceph_config_path | default('/var/lib/tripleo-config/ceph') }}"
tripleo_nova_compute_ceph_client_user_name: "{{ tripleo_ceph_client_user_name | default('openstack') }}"
tripleo_nova_compute_enable_internal_tls: "{{ tripleo_enable_internal_tls | default (false) }}"
tripleo_nova_compute_use_tls_transport_for_live_migration: "{{ tripleo_use_tls_transport_for_live_migration | default(true) }}"
tripleo_nova_compute_instance_usage_audit: false
tripleo_nova_compute_instance_usage_audit_period: hour
tripleo_nova_compute_enable_rbd_backend: false  # role specific
tripleo_nova_compute_cinder_enable_rbd_backend: "{{ tripleo_cinder_enable_rbd_backend | default(false) }}"
tripleo_nova_compute_ceph_client_key: "{{ tripleo_ceph_client_key | default('') }}"  # sensitive data
tripleo_nova_compute_ceph_cluster_fsid: "{{ tripleo_ceph_cluster_fsid | default('') }}"
tripleo_nova_compute_ceph_cluster_name: "{{ tripleo_ceph_cluster_name | default('') }}"
tripleo_nova_compute_cinder_rbd_multi_config: "{{ tripleo_cinder_rbd_multi_config | default({}) }}"
tripleo_nova_compute_type: kvm
tripleo_nova_compute_monitoring_subscription: overcloud-nova-compute
tripleo_nova_compute_migration_ssh_key: >
  {{ tripleo_migration_ssh_key | default({"public_key": "", "private_key": ""}) }}
tripleo_nova_compute_migration_ssh_port: "{{ tripleo_migration_ssh_port | default(2022) }}"
tripleo_nova_compute_opt_volumes: []  # role specific
tripleo_nova_compute_opt_env_vars: {}  # role specific
tripleo_nova_compute_rbd_disk_cachemodes: "{{ tripleo_rbd_disk_cachemodes | default(['network=writeback']) }}"
tripleo_nova_compute_startup_delay: 0
tripleo_nova_compute_enable_instance_ha: false
tripleo_nova_compute_rbd_pool_name: vms  # role specific
tripleo_nova_compute_cinder_enable_nfs_backend: false
tripleo_nova_compute_mkisofs_cmd: mkisofs  # role specific
tripleo_nova_compute_nfs_enabled: false  # role specific
tripleo_nova_compute_nfs_share: ""  # role specific
tripleo_nova_compute_nfs_options: "context=system_u:object_r:nfs_t:s0"  # role specific
tripleo_nova_compute_nfs_version: "4.2"  # role specific
tripleo_nova_compute_force_raw_images: true  # role specific
tripleo_nova_compute_use_cow_images: true  # role specific
tripleo_nova_compute_libvirt_pre_allocate_images: "none"  # role specific
tripleo_nova_compute_image_cache_manager_interval: 2400  # role specific
tripleo_nova_compute_image_cache_remove_unused_base_images: true  # role specific
tripleo_nova_compute_image_cache_remove_unused_resized_minimum_age: 3600  # role specific
tripleo_nova_compute_image_cache_precache_concurrency: 1  # role specific
# NOTE(bogdando): it defaults to '' in t-h-t, use str2dict?
tripleo_nova_compute_pci_passthrough: {}  # role specific
tripleo_nova_compute_cpu_shared_set: []  # role specific
tripleo_nova_compute_cpu_dedicated_set: []  # role specific
tripleo_nova_compute_reserved_host_memory: 4096  # role specific
tripleo_nova_compute_reserved_huge_pages: []
tripleo_nova_compute_kernel_args: "{{ tripleo_kernel_args | default('') }}"  # role specific
tripleo_nova_compute_ovs_dpdk_socket_memory: "{{ tripleo_ovs_dpdk_socket_memory | default('') }}"  # role specific
tripleo_nova_compute_verify_glance_signatures: false
tripleo_nova_compute_auto_disabling: 10
tripleo_nova_compute_neutron_physnet_numa_nodes_mapping: {}  # role specific
tripleo_nova_compute_neutron_tunnel_numa_nodes: []  # role specific
tripleo_nova_compute_resume_guests_state_on_host_boot: false  # role specific
tripleo_nova_compute_rx_queue_size: 512  # role specific
tripleo_nova_compute_tx_queue_size: 512  # role specific
tripleo_nova_compute_file_backed_memory: 0  # role specific
tripleo_nova_compute_volume_use_multipath: false  # role specific
tripleo_nova_compute_hw_machine_type: "x86_64=q35"  # role specific
tripleo_nova_compute_additional_cell: false
tripleo_nova_compute_enable_ksm: false  # role specific
tripleo_nova_compute_cinder_password: "{{ tripleo_cinder_password | default('') }}"  # sensitive, assert not empty
tripleo_nova_compute_keystone_region: regionOne
tripleo_nova_compute_num_pcie_ports: 16  # role specific
tripleo_nova_compute_mem_stats_period_seconds: 10  # role specific
tripleo_nova_compute_live_migration_wait_for_vif_plug: true  # role specific
tripleo_nova_compute_live_migration_permit_post_copy: true  # role specific
tripleo_nova_compute_live_migration_permit_auto_converge: true  # role specific
tripleo_nova_compute_multipathd_enable: "{{ tripleo_multipathd_enable | default(false) }}"  # role specific
tripleo_nova_compute_cpu_allocation_ratio: 0.0  # role specific
tripleo_nova_compute_ram_allocation_ratio: 1.0  # role specific
tripleo_nova_compute_disk_allocation_ratio: 0.0  # role specific
tripleo_nova_compute_enable_vtpm: false  # role specific
tripleo_nova_compute_max_disk_devices_to_attach: -1  # role specific
tripleo_nova_compute_pmem_mappings: ""  # role specific
tripleo_nova_compute_pmem_namespaces: ""  # role specific
tripleo_nova_compute_mdev_types: {}  # role specific
tripleo_nova_compute_image_cache_ttl: 86400  # role specific
tripleo_nova_compute_disable_irq_balance: false  # role specific
tripleo_nova_compute_cpu_mode: host-model  # role specific
tripleo_nova_compute_cpu_models: []  # role specific
tripleo_nova_compute_cpu_model_extra_flags: ""  # role specific
tripleo_nova_compute_disable_image_download_to_rbd: false  # role specific
tripleo_nova_compute_disable_compute_service_check_for_ffu: false
tripleo_nova_compute_statedir_ownership_skip: ["triliovault-mounts"]
tripleo_nova_compute_image_type_exclude_list: []  # role specific
tripleo_nova_compute_libvirt_max_queues: 0  # role specific
tripleo_nova_compute_glance_rbd_pool_name: "{{ tripleo_glance_rbd_pool_name | default('images') }}"
tripleo_nova_compute_glance_multistore_config: "{{ tripleo_glance_multistore_config | default({}) }}"
tripleo_nova_compute_glance_enable_rbd_download: false  # role specific
tripleo_nova_compute_glance_rbd_download_multistore_id: ""  # role specific
tripleo_nova_compute_glance_backend_id: "{{ tripleo_glance_backend_id | default('default_backend') }}"  # role specific
tripleo_nova_compute_glance_rbd_copy_poll_interval: 15  # role specific
tripleo_nova_compute_glance_rbd_copy_timeout: 600  # role specific
tripleo_nova_compute_custom_provider_inventories: {}  # role specific
tripleo_nova_compute_vcpu_pin_set: []  # role specific, DEPRECATED
tripleo_nova_compute_vgpu_types_device_addresses_mapping: {}  # role specific, DEPRECATED
tripleo_nova_compute_root_stack_name: "{{ tripleo_root_stack_name | default('') }}"  # assert not empty
tripleo_nova_compute_auth_cloud_name: "{{ tripleo_auth_cloud_name | default('') }}"  # assert not empty
tripleo_nova_compute_libvirt_manage_libvirt_services: false

tripleo_nova_compute_common_volumes: "{{ tripleo_container_standalone_common_volumes }}"

tripleo_nova_compute_config_use_ansible: true
tripleo_nova_compute_config_dir: /var/lib/config-data/ansible-generated/nova_libvirt

tripleo_nova_compute_volumes:
  - /etc/ssh/ssh_known_hosts:/etc/ssh/ssh_known_hosts:ro
  - /var/lib/kolla/config_files/nova_compute.json:/var/lib/kolla/config_files/config.json:ro
  - "{{ tripleo_nova_compute_config_dir }}:/var/lib/kolla/config_files/src:ro"
  - "{{ tripleo_iscsid_config_volume }}:/var/lib/kolla/config_files/src-iscsid:ro"
  - "{{ tripleo_nova_compute_ceph_config_path }}:/var/lib/kolla/config_files/src-ceph:ro"
  - /dev:/dev
  - /lib/modules:/lib/modules:ro
  - /run:/run
  - /var/lib/iscsi:/var/lib/iscsi:z
  - /var/lib/libvirt:/var/lib/libvirt:shared
  - /sys/class/net:/sys/class/net
  - /sys/bus/pci:/sys/bus/pci
  - /boot:/boot:ro
  - /var/lib/nova:/var/lib/nova:shared

tripleo_nova_compute_logging_volumes:
  - /var/log/containers/nova:/var/log/nova:z

tripleo_nova_compute_environment:
  KOLLA_CONFIG_STRATEGY: COPY_ALWAYS

tripleo_nova_compute_logging_environment: {}

tripleo_nova_compute_DEFAULT_compute_driver: libvirt.LibvirtDriver
tripleo_nova_compute_DEFAULT_dhcp_domain: ''
tripleo_nova_compute_DEFAULT_force_config_drive: true
tripleo_nova_compute_DEFAULT_host: '{{ ansible_facts["nodename"] }}'
tripleo_nova_compute_DEFAULT_log_dir: /var/log/nova
tripleo_nova_compute_DEFAULT_my_ip: '{{ hostvars[inventory_hostname][service_net_map["nova_api_network"] ~ "_ip"] }}'
tripleo_nova_compute_DEFAULT_preallocate_images: none
tripleo_nova_compute_DEFAULT_report_interval: 10
tripleo_nova_compute_DEFAULT_rootwrap_config: /etc/nova/rootwrap.conf
tripleo_nova_compute_DEFAULT_rpc_response_timeout: 60
tripleo_nova_compute_DEFAULT_service_down_time: 60
tripleo_nova_compute_DEFAULT_ssl_only: false
tripleo_nova_compute_DEFAULT_state_path: /var/lib/nova
tripleo_nova_compute_DEFAULT_sync_power_state_interval: 600
tripleo_nova_compute_DEFAULT_transport_url: ''
tripleo_nova_compute_DEFAULT_vif_plugging_is_fatal: true
tripleo_nova_compute_DEFAULT_vif_plugging_timeout: 300
tripleo_nova_compute_cinder_auth_type: v3password
tripleo_nova_compute_cinder_auth_url: ''
tripleo_nova_compute_cinder_catalog_info: volumev3:cinderv3:internalURL
tripleo_nova_compute_cross_az_attach: true
tripleo_nova_compute_cinder_project_domain_name: Default
tripleo_nova_compute_cinder_project_name: service
tripleo_nova_compute_cinder_user_domain_name: Default
tripleo_nova_compute_cinder_username: cinder
tripleo_nova_compute_compute_consecutive_build_service_disable_threshold: 10
tripleo_nova_compute_compute_cpu_dedicated_set: ''
tripleo_nova_compute_compute_cpu_shared_set: ''
tripleo_nova_compute_compute_live_migration_wait_for_vif_plug: true
tripleo_nova_compute_compute_max_disk_devices_to_attach: '-1'
tripleo_nova_compute_compute_provider_config_location: /etc/nova/provider_config
tripleo_nova_compute_key_manager_backend: nova.keymgr.conf_key_mgr.ConfKeyManager
tripleo_nova_compute_libvirt_enabled_perf_events: ''
tripleo_nova_compute_libvirt_inject_key: false
tripleo_nova_compute_libvirt_inject_partition: '-2'
tripleo_nova_compute_libvirt_inject_password: false
tripleo_nova_compute_libvirt_live_migration_inbound_addr: '{{ hostvars[inventory_hostname]["fqdn_" ~ service_net_map["nova_libvirt_network"]] }}'
tripleo_nova_compute_libvirt_live_migration_permit_auto_converge: true
tripleo_nova_compute_libvirt_live_migration_permit_post_copy: true
tripleo_nova_compute_libvirt_live_migration_tunnelled: false
tripleo_nova_compute_libvirt_live_migration_uri: 'qemu+ssh://nova_migration@s:2022/system?keyfile=/etc/nova/migration/identity'
tripleo_nova_compute_libvirt_virt_type: qemu
tripleo_nova_compute_neutron_default_floating_pool: public
tripleo_nova_compute_neutron_extension_sync_interval: 600
tripleo_nova_compute_neutron_ovs_bridge: br-int
tripleo_nova_compute_neutron_timeout: 30
tripleo_nova_compute_neutron_valid_interfaces: internal
tripleo_nova_compute_notifications_notification_format: unversioned
tripleo_nova_compute_notifications_notify_on_state_change: vm_and_task_state
tripleo_nova_compute_oslo_concurrency_lock_path: /var/lib/nova/tmp
tripleo_nova_compute_oslo_messaging_notifications_driver: noop
tripleo_nova_compute_oslo_messaging_notifications_transport_url: ''
tripleo_nova_compute_oslo_messaging_rabbit_heartbeat_timeout_threshold: 60
tripleo_nova_compute_oslo_messaging_rabbit_ssl: false
tripleo_nova_compute_oslo_policy_enforce_new_defaults: false
tripleo_nova_compute_oslo_policy_enforce_scope: false
tripleo_nova_compute_oslo_policy_policy_file: /etc/nova/policy.yaml
tripleo_nova_compute_placement_api_interface: internal
tripleo_nova_compute_spice_enabled: false
tripleo_nova_compute_vendordata_dynamic_auth_project_domain_name: Default
tripleo_nova_compute_vendordata_dynamic_auth_user_domain_name: Default
tripleo_nova_compute_vif_plug_ovs_ovsdb_connection: ''
tripleo_nova_compute_vnc_enabled: true
tripleo_nova_compute_vncproxy_host: '' # EndpointMap, NovaPublic, host_nobrackets
tripleo_nova_compute_vnc_server_listen: '{{ hostvars[inventory_hostname][service_net_map["nova_libvirt_network"] ~ "_ip"] }}'
tripleo_nova_compute_vncserver_proxyclient_address: '{{ hostvars[inventory_hostname][service_net_map["nova_libvirt_network"] ~ "_ip"] }}'

# TODO(bogdando): wire-in into aansible config templates
# from t-h-t hiera mappings, and/or user-provided config snippets
tripleo_nova_compute_rbd_libvirt_images_rbd_ceph_conf: /etc/ceph/ + {{ tripleo_nova_compute_ceph_cluster_name }} + .conf
tripleo_nova_compute_rbd_rbd_keyring: client. + {{ tripleo_nova_compute_ceph_client_user_name }}
tripleo_nova_compute_libvirt_migration_support: false
tripleo_nova_compute_migration_client_enabled: true
tripleo_nova_compute_migration_client_ssh_private_key: '' # MigrationSshKey, private_key
# False, if is realtime set, or comes from RoleParametersValue nova_permit_auto_converge/nova_permit_post_copy
tripleo_nova_compute_migration_libvirt_live_migration_permit_auto_converge: false
tripleo_nova_compute_migration_libvirt_live_migration_permit_post_copy: false
tripleo_nova_compute_migration_libvirt_live_migration_tunnelled: false
# from ceph multi-store config, set it via facts and jinja,
# or use direct inputs from user/tht
tripleo_nova_compute_glance_rbd_ceph_conf: {}
tripleo_nova_compute_glance_rbd_user: {}
# from t-h-t EndpointMap, NovaVNCProxyCellPublic, host_nobrackets/port/protocol
# or use direct inputs from user/tht
tripleo_nova_compute_vncproxy_common_vncproxy_host: ''
tripleo_nova_compute_vncproxy_common_vncproxy_port: ''
tripleo_nova_compute_vncproxy_common_vncproxy_protocol: ''

tripleo_nova_compute_config:
  DEFAULT:
    compute_driver: '{{ tripleo_nova_compute_DEFAULT_compute_driver }}'
    cpu_allocation_ratio: '{{ tripleo_nova_compute_cpu_allocation_ratio }}'
    debug: '{{ tripleo_nova_compute_debug }}'
    dhcp_domain: '{{ tripleo_nova_compute_DEFAULT_dhcp_domain }}'
    disk_allocation_ratio: '{{ tripleo_nova_compute_disk_allocation_ratio }}'
    force_config_drive: '{{ tripleo_nova_compute_DEFAULT_force_config_drive }}'
    force_raw_images: '{{ tripleo_nova_compute_force_raw_images }}'
    host: '{{ tripleo_nova_compute_DEFAULT_host }}'
    log_dir: '{{ tripleo_nova_compute_DEFAULT_log_dir }}'
    mkisofs_cmd: '{{ tripleo_nova_compute_mkisofs_cmd }}'
    my_ip: '{{ tripleo_nova_compute_DEFAULT_my_ip }}'
    preallocate_images: '{{ tripleo_nova_compute_DEFAULT_preallocate_images }}'
    ram_allocation_ratio: '{{ tripleo_nova_compute_ram_allocation_ratio }}'
    report_interval: '{{ tripleo_nova_compute_DEFAULT_report_interval }}'
    reserved_host_memory_mb: '{{ tripleo_nova_compute_reserved_host_memory }}'
    resume_guests_state_on_host_boot: '{{ tripleo_nova_compute_resume_guests_state_on_host_boot }}'
    rootwrap_config: '{{ tripleo_nova_compute_DEFAULT_rootwrap_config }}'
    rpc_response_timeout: '{{ tripleo_nova_compute_DEFAULT_rpc_response_timeout }}'
    service_down_time: '{{ tripleo_nova_compute_DEFAULT_service_down_time }}'
    ssl_only: '{{ tripleo_nova_compute_DEFAULT_ssl_only }}'
    state_path: '{{ tripleo_nova_compute_DEFAULT_state_path }}'
    sync_power_state_interval: '{{ tripleo_nova_compute_DEFAULT_sync_power_state_interval }}'
    transport_url: '{{ tripleo_nova_compute_DEFAULT_transport_url }}'
    use_cow_images: '{{ tripleo_nova_compute_use_cow_images }}'
    vif_plugging_is_fatal: '{{ tripleo_nova_compute_DEFAULT_vif_plugging_is_fatal }}'
    vif_plugging_timeout: '{{ tripleo_nova_compute_DEFAULT_vif_plugging_timeout }}'
  cinder:
    auth_type: '{{ tripleo_nova_compute_cinder_auth_type }}'
    auth_url: '{{ tripleo_nova_compute_cinder_auth_url }}'
    catalog_info: '{{ tripleo_nova_compute_cinder_catalog_info }}'
    cross_az_attach: '{{ tripleo_nova_compute_cross_az_attach }}'
    os_region_name: '{{ tripleo_nova_compute_keystone_region }}'
    password: '{{ tripleo_nova_compute_cinder_password }}'
    project_domain_name: '{{ tripleo_nova_compute_cinder_project_domain_name }}'
    project_name: '{{ tripleo_nova_compute_cinder_project_name }}'
    user_domain_name: '{{ tripleo_nova_compute_cinder_user_domain_name }}'
    username: '{{ tripleo_nova_compute_cinder_username }}'
  compute:
    consecutive_build_service_disable_threshold: '{{ tripleo_nova_compute_compute_consecutive_build_service_disable_threshold }}'
    cpu_dedicated_set: '{{ tripleo_nova_compute_compute_cpu_dedicated_set }}'
    cpu_shared_set: '{{ tripleo_nova_compute_compute_cpu_shared_set }}'
    live_migration_wait_for_vif_plug: '{{ tripleo_nova_compute_compute_live_migration_wait_for_vif_plug }}'
    max_disk_devices_to_attach: '{{ tripleo_nova_compute_compute_max_disk_devices_to_attach }}'
    provider_config_location: '{{ tripleo_nova_compute_compute_provider_config_location }}'
  image_cache:
    manager_interval: '{{ tripleo_nova_compute_image_cache_manager_interval }}'
    precache_concurrency: '{{ tripleo_nova_compute_image_cache_precache_concurrency }}'
    remove_unused_base_images: '{{ tripleo_nova_compute_image_cache_remove_unused_base_images }}'
    remove_unused_original_minimum_age_seconds: '{{ tripleo_nova_compute_image_cache_ttl }}'
    remove_unused_resized_minimum_age_seconds: '{{ tripleo_nova_compute_image_cache_remove_unused_resized_minimum_age }}'
  key_manager:
    backend: '{{ tripleo_nova_compute_key_manager_backend }}'
  libvirt:
    cpu_mode: '{{ tripleo_nova_compute_cpu_mode }}'
    cpu_model_extra_flags: '{{ tripleo_nova_compute_cpu_model_extra_flags }}'
    enabled_perf_events: '{{ tripleo_nova_compute_libvirt_enabled_perf_events }}'
    file_backed_memory: '{{ tripleo_nova_compute_file_backed_memory }}'
    hw_machine_type: '{{ tripleo_nova_compute_hw_machine_type }}'
    inject_key: '{{ tripleo_nova_compute_libvirt_inject_key }}'
    inject_partition: '{{ tripleo_nova_compute_libvirt_inject_partition }}'
    inject_password: '{{ tripleo_nova_compute_libvirt_inject_password }}'
    live_migration_inbound_addr: '{{ tripleo_nova_compute_libvirt_live_migration_inbound_addr }}'
    live_migration_permit_auto_converge: '{{ tripleo_nova_compute_libvirt_live_migration_permit_auto_converge }}'
    live_migration_permit_post_copy: '{{ tripleo_nova_compute_libvirt_live_migration_permit_post_copy }}'
    live_migration_tunnelled: '{{ tripleo_nova_compute_libvirt_live_migration_tunnelled }}'
    live_migration_uri: '{{ tripleo_nova_compute_libvirt_live_migration_uri }}'
    mem_stats_period_seconds: '{{ tripleo_nova_compute_mem_stats_period_seconds }}'
    num_pcie_ports: '{{ tripleo_nova_compute_num_pcie_ports }}'
    pmem_namespaces: '{{ tripleo_nova_compute_pmem_mappings }}'
    rx_queue_size: '{{ tripleo_nova_compute_rx_queue_size }}'
    swtpm_enabled: '{{ tripleo_nova_compute_enable_vtpm }}'
    tx_queue_size: '{{ tripleo_nova_compute_tx_queue_size }}'
    virt_type: '{{ tripleo_nova_compute_libvirt_virt_type }}'
    volume_use_multipath: '{{ tripleo_nova_compute_volume_use_multipath }}'
  neutron:
    default_floating_pool: '{{ tripleo_nova_compute_neutron_default_floating_pool }}'
    extension_sync_interval: '{{ tripleo_nova_compute_neutron_extension_sync_interval }}'
    ovs_bridge: '{{ tripleo_nova_compute_neutron_ovs_bridge }}'
    timeout: '{{ tripleo_nova_compute_neutron_timeout }}'
    valid_interfaces: '{{ tripleo_nova_compute_neutron_valid_interfaces }}'
  notifications:
    notification_format: '{{ tripleo_nova_compute_notifications_notification_format }}'
    notify_on_state_change: '{{ tripleo_nova_compute_notifications_notify_on_state_change }}'
  oslo_concurrency:
    lock_path: '{{ tripleo_nova_compute_oslo_concurrency_lock_path }}'
  oslo_messaging_notifications:
    driver: '{{ tripleo_nova_compute_oslo_messaging_notifications_driver }}'
    transport_url: '{{ tripleo_nova_compute_oslo_messaging_notifications_transport_url }}'
  oslo_messaging_rabbit:
    heartbeat_timeout_threshold: '{{ tripleo_nova_compute_oslo_messaging_rabbit_heartbeat_timeout_threshold }}'
    ssl: '{{ tripleo_nova_compute_oslo_messaging_rabbit_ssl }}'
  oslo_policy:
    enforce_new_defaults: '{{ tripleo_nova_compute_oslo_policy_enforce_new_defaults }}'
    enforce_scope: '{{ tripleo_nova_compute_oslo_policy_enforce_scope }}'
    policy_file: '{{ tripleo_nova_compute_oslo_policy_policy_file }}'
  spice:
    enabled: '{{ tripleo_nova_compute_spice_enabled }}'
  vendordata_dynamic_auth:
    project_domain_name: '{{ tripleo_nova_compute_vendordata_dynamic_auth_project_domain_name }}'
    user_domain_name: '{{ tripleo_nova_compute_vendordata_dynamic_auth_user_domain_name }}'
  vif_plug_ovs:
    ovsdb_connection: '{{ tripleo_nova_compute_vif_plug_ovs_ovsdb_connection }}'
  vnc:
    enabled: '{{ tripleo_nova_compute_vnc_enabled }}'
    novncproxy_base_url: '{{ tripleo_nova_compute_vncproxy_host }}'
    server_listen: '{{ tripleo_nova_compute_vnc_server_listen }}'
    server_proxyclient_address: '{{ tripleo_nova_compute_vncserver_proxyclient_address }}'
  workarounds:
    disable_compute_service_check_for_ffu: '{{ tripleo_nova_compute_disable_compute_service_check_for_ffu }}'
    never_download_image_if_on_rbd: '{{ tripleo_nova_compute_disable_image_download_to_rbd }}'

tripleo_nova_compute_config_overrides: {}
