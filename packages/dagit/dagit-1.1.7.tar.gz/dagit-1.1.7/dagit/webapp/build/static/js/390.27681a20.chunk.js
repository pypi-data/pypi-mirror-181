"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[390],{85548:function(n,e,t){t.d(e,{Z:function(){return m}});var r=t(54268),i=t(32030),s=t(762),o=t(325),a=t(59549),u=t(9091),c=t(34653),d=t(55752),l=t(5484),h=t(28797),p=t(80609),x=t(32289),m=o.memo((function(n){var e=n.name,t=n.run,m=n.showHover,f=void 0!==m&&m,g=n.showButton,j=void 0===g||g,y=n.showSummary,v=void 0===y||y,w=t.status,S=o.useMemo((function(){switch(w){case l.VO.SUCCESS:return"success";case l.VO.CANCELED:case l.VO.CANCELING:case l.VO.FAILURE:return"danger";default:return"none"}}),[w]);return(0,x.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-start",gap:16},children:[(0,x.jsxs)(i.x,{flex:{direction:"column",alignItems:"flex-start",gap:4},children:[(0,x.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[function(){var n=(0,x.jsx)(r.V,{intent:S,children:(0,x.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,x.jsx)(a.K9,{status:t.status,size:10}),(0,x.jsx)(d.Zr,{run:t})]})});return f?(0,x.jsx)(s.J,{position:"top",interactionKind:"hover",content:(0,x.jsx)("div",{children:(0,x.jsx)(u.qL,{run:t,name:e})}),hoverOpenDelay:100,children:n}):n}(),v?(0,x.jsx)(d.Tw,{run:t}):null]}),v&&(c.hd.has(t.status)||c.Ys.has(t.status))?(0,x.jsx)(p.I,{runId:t.id}):void 0]}),j?(0,x.jsx)(h.A,{to:"/runs/".concat(t.id),children:"View run"}):null]})}))},80609:function(n,e,t){t.d(e,{I:function(){return f}});var r,i=t(99500),s=t(73701),o=t(3159),a=t(12745),u=t(7838),c=t(41332),d=t.n(c),l=t(325),h=t(74549),p=t(34653),x=t(5484),m=t(32289),f=function(n){var e=n.runId,t=(0,s.a)(g,{variables:{runId:e}}).data,r=null===t||void 0===t?void 0:t.pipelineRunOrError,i="Run"===(null===r||void 0===r?void 0:r.__typename)?r.status:null,o=l.useMemo((function(){if("Run"!==(null===r||void 0===r?void 0:r.__typename))return[];var n=r.status;return p.hd.has(n)?r.stepStats.filter((function(n){return n.status===x.SG.FAILURE})):p.Ys.has(n)?r.stepStats.filter((function(n){return n.status===x.SG.IN_PROGRESS})):[]}),[r]),c=o.length;if(!c||!i)return null;if(p.hd.has(i)){if(1===c){var f=o[0],j=f.endTime?d().stringify({focusedTime:Math.floor(1e3*f.endTime)},{addQueryPrefix:!0}):"";return(0,m.jsxs)(a.YS,{color:u.w.Gray500,children:["Failed at ",(0,m.jsx)(h.rU,{to:"/runs/".concat(e).concat(j),children:f.stepKey})]})}return(0,m.jsxs)(a.YS,{color:u.w.Gray500,children:["Failed at ",(0,m.jsxs)(h.rU,{to:"/runs/".concat(e),children:[c," steps"]})]})}if(p.Ys.has(i)){if(1===c){var y=o[0],v=y.endTime?d().stringify({focusedTime:Math.floor(1e3*y.endTime)},{addQueryPrefix:!0}):"";return(0,m.jsxs)(a.YS,{color:u.w.Gray500,children:["In progress at ",(0,m.jsx)(h.rU,{to:"/runs/".concat(e).concat(v),children:y.stepKey})]})}return(0,m.jsxs)(a.YS,{color:u.w.Gray500,children:["In progress at ",(0,m.jsxs)(h.rU,{to:"/runs/".concat(e),children:[c," steps"]})]})}return null},g=(0,o.Ps)(r||(r=(0,i.Z)(["\n  query StepSummaryForRunQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        stepStats {\n          endTime\n          stepKey\n          status\n        }\n      }\n    }\n  }\n"])))},62997:function(n,e,t){t.d(e,{TW:function(){return _},i0:function(){return E},lB:function(){return N},dY:function(){return F}});var r,i,s=t(99500),o=t(19065),a=t(922),u=t(73701),c=t(3159),d=t(54268),l=t(60652),h=t(8358),p=t(75453),x=t(11831),m=t(32030),f=t(34595),g=t(89646),j=t(6466),y=t(7838),v=t(12745),w=t(24971),S=t(325),R=t(14156),I=t(12436),k=t(76341),T=t(22797),C=t(5484),b=t(32289),_=function(n){var e=n.tick,t=n.instigationType,r=S.useState(!1),i=(0,o.Z)(r,2),s=i[0],a=i[1];switch(e.status){case C.iz.STARTED:return(0,b.jsx)(d.V,{children:"Started"});case C.iz.SUCCESS:if(!e.runIds.length)return(0,b.jsx)(d.V,{intent:"primary",children:"Requested"});var u=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.V,{intent:"primary",interactive:!0,children:(0,b.jsxs)(l.Z,{underline:"never",onClick:function(){return a(!0)},children:[e.runIds.length," Requested"]})}),(0,b.jsxs)(h.Vq,{isOpen:s,onClose:function(){return a(!1)},style:{width:"90vw"},title:"Launched runs",children:[(0,b.jsx)(E,{runIds:e.runIds}),(0,b.jsx)(h.cN,{children:(0,b.jsx)(p.zx,{intent:"primary",onClick:function(){return a(!1)},children:"OK"})})]})]});if(e.runKeys.length>e.runIds.length){var c="".concat(e.runKeys.length," runs requested, but ").concat(e.runKeys.length-e.runIds.length," skipped because the runs already exist for those requested keys.");return(0,b.jsx)(x.u,{position:"right",content:c,children:u})}return u;case C.iz.SKIPPED:if(e.runKeys.length){var m="".concat(e.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,b.jsx)(x.u,{position:"right",content:m,children:(0,b.jsx)(d.V,{intent:"warning",children:"Skipped"})})}return e.skipReason?(0,b.jsx)(x.u,{position:"right",content:e.skipReason,targetTagName:"div",children:(0,b.jsx)(d.V,{intent:"warning",children:"Skipped"})}):(0,b.jsx)(d.V,{intent:"warning",children:"Skipped"});case C.iz.FAILURE:if(e.error){var f=e.error,g=function(){return(0,R._)({title:t?t===C._5.SCHEDULE?"Schedule Response":"Sensor Response":"Python Error",body:(0,b.jsx)(I.T9,{error:f})})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q,{onClick:g,children:(0,b.jsx)(d.V,{minimal:!0,intent:"danger",children:"Failure"})}),(0,b.jsx)(l.Z,{onClick:g,style:{marginLeft:8,fontSize:12},children:"View"})]})}return(0,b.jsx)(d.V,{intent:"danger",children:"Failure"});default:return(0,k.UT)(e.status)}},E=function(n){var e=n.runIds,t=(0,u.a)(O,{variables:{filter:{runIds:e}}}),r=t.data;return t.loading||!r?(0,b.jsx)(m.x,{padding:32,children:(0,b.jsx)(f.$,{purpose:"section"})}):"Runs"!==r.pipelineRunsOrError.__typename?(0,b.jsx)(m.x,{padding:32,children:(0,b.jsx)(g.t,{icon:"error",title:"An error occurred",description:r.pipelineRunsOrError.message})}):(0,b.jsx)(m.x,{padding:{bottom:8},children:(0,b.jsx)(T.A,{runs:r.pipelineRunsOrError.results})})},N=function(n){var e=n.originRunIds;return e&&e.length?(0,b.jsxs)(j.Z,{direction:"column",spacing:16,children:[(0,b.jsxs)(m.x,{padding:12,border:{side:"bottom",width:1,color:y.w.Gray200},children:[(0,b.jsxs)(v.uT,{children:["Failed Runs",(0,b.jsx)(x.u,{content:"Failed runs this tick reacted on and reported back to.",children:(0,b.jsx)(w.JO,{name:"info",color:y.w.Gray500})})]}),(0,b.jsx)(E,{runIds:e})]}),(0,b.jsxs)(m.x,{padding:12,margin:{bottom:8},children:[(0,b.jsxs)(v.uT,{children:["Requested Runs",(0,b.jsx)(x.u,{content:"Runs launched by the run requests in this tick.",children:(0,b.jsx)(w.JO,{name:"info",color:y.w.Gray500})})]}),(0,b.jsx)(g.t,{icon:"sensors",title:"No runs to display",description:"This sensor does not target a pipeline or job."})]})]}):null},q=a.ZP.button.withConfig({displayName:"InstigationTick__LinkButton",componentId:"o7n48i-0"})(["background:inherit;border:none;cursor:pointer;font-size:inherit;text-decoration:none;padding:0;"]),F=(0,c.Ps)(r||(r=(0,s.Z)(["\n  fragment TickTagFragment on InstigationTick {\n    id\n    status\n    timestamp\n    skipReason\n    runIds\n    runKeys\n    error {\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),I.Bq),O=(0,c.Ps)(i||(i=(0,s.Z)(["\n  query LaunchedRunListQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n          runId\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"])),T.Z,I.Bq)},45352:function(n,e,t){t.d(e,{UD:function(){return j},RX:function(){return y},S9:function(){return v},ai:function(){return w},Jy:function(){return S}});var r,i,s=t(99500),o=t(922),a=t(3159),u=t(7838),c=t(6466),d=t(12745),l=(t(325),t(74549)),h=t(12436),p=t(85548),x=t(59549),m=t(55752),f=t(62997),g=t(32289),j=function(n){var e=n.instigationState;return e.runs.length?(0,g.jsx)(p.Z,{run:e.runs[0],name:e.name}):(0,g.jsx)("span",{style:{color:u.w.Gray300},children:"None"})},y=function(n){var e=n.run;return(0,g.jsxs)(c.Z,{direction:"row",spacing:4,alignItems:"center",children:[(0,g.jsx)(x.K9,{status:e.status}),(0,g.jsx)(l.rU,{to:"/runs/".concat(e.runId),target:"_blank",rel:"noreferrer",children:(0,g.jsx)(d.fv,{children:(0,m.EI)({runId:e.runId})})})]})},v=(0,a.Ps)(r||(r=(0,s.Z)(["\n  fragment RunStatusFragment on Run {\n    id\n    runId\n    status\n  }\n"]))),w=(0,a.Ps)(i||(i=(0,s.Z)(["\n  fragment InstigationStateFragment on InstigationState {\n    id\n    selectorId\n    name\n    instigationType\n    status\n    repositoryName\n    repositoryLocationName\n    typeSpecificData {\n      ... on SensorData {\n        lastRunKey\n        lastCursor\n      }\n      ... on ScheduleData {\n        cronSchedule\n      }\n    }\n    runs(limit: 1) {\n      id\n      ...RunStatusFragment\n      ...RunTimeFragment\n    }\n    status\n    ticks(limit: 1) {\n      id\n      cursor\n      ...TickTagFragment\n    }\n    runningCount\n  }\n  ","\n  ","\n  ","\n  ","\n"])),h.Bq,f.dY,v,m.$X),S=o.ZP.table.withConfig({displayName:"InstigationUtils__StatusTable",componentId:"sc-1od21u7-0"})(["font-size:13px;border-spacing:0;&&&&& tr{box-shadow:none;}&&&&& tbody > tr > td{background:transparent;box-shadow:none !important;padding:1px 0;}&&&&& tbody > tr > td:first-child{color:",";}"],u.w.Gray500)},9091:function(n,e,t){t.d(e,{JH:function(){return g},qL:function(){return j}});var r=t(922),i=t(7838),s=t(32030),o=t(762),a=t(12745),u=t(8546),c=(t(325),t(74549)),d=t(80609),l=t(59549),h=t(34653),p=t(55752),x=t(32289),m={QUEUED:i.w.Blue500,NOT_STARTED:i.w.Blue500,STARTING:i.w.Blue500,MANAGED:i.w.Blue500,STARTED:i.w.Blue500,SUCCESS:i.w.Green500,FAILURE:i.w.Red500,CANCELING:i.w.Red500,CANCELED:i.w.Red500},f=function(n){var e=n.status,t=n.opacity,r=void 0===t?1:t,i=m[e];return(0,x.jsx)(R,{$color:i,$opacity:r})},g=function(n){var e=n.fade,t=n.jobName,r=n.runs,i=r.length,a=.8/Math.max(3,i);return(0,x.jsx)(s.x,{flex:{direction:"row",alignItems:"center",gap:2},children:r.map((function(n,r){return(0,x.jsx)(o.J,{position:"top",interactionKind:"hover",content:(0,x.jsx)("div",{children:(0,x.jsx)(j,{run:n,name:t})}),hoverOpenDelay:100,children:(0,x.jsx)(f,{runId:n.runId,status:n.status,opacity:e?1-(i-r-1)*a:1},n.runId)},n.runId)}))})},j=function(n){var e=n.name,t=n.run;return(0,x.jsxs)(y,{children:[(0,x.jsx)(v,{children:e}),(0,x.jsxs)(w,{children:[(0,x.jsxs)(s.x,{flex:{alignItems:"center",direction:"row",gap:8},children:[(0,x.jsx)(l.K9,{status:t.status}),(0,x.jsx)(c.rU,{to:"/runs/".concat(t.runId),children:(0,x.jsx)(a.fv,{style:{fontSize:"14px"},children:(0,p.EI)(t)})})]}),(0,x.jsxs)(s.x,{flex:{direction:"column",gap:4},padding:{top:2},children:[(0,x.jsx)(p.Zr,{run:t}),(0,x.jsx)(p.Tw,{run:t})]})]}),h.hd.has(t.status)||h.Ys.has(t.status)?(0,x.jsx)(S,{children:(0,x.jsx)(d.I,{runId:t.id})}):null]})},y=r.ZP.div.withConfig({displayName:"RunStatusPez__OverlayContainer",componentId:"sc-1eclpuq-0"})(["padding:4px;font-size:12px;width:220px;"]),v=r.ZP.div.withConfig({displayName:"RunStatusPez__OverlayTitle",componentId:"sc-1eclpuq-1"})(["padding:8px;box-shadow:inset 0 -1px ",";font-family:",";font-size:14px;font-weight:500;color:",";max-width:100%;text-overflow:ellipsis;overflow:hidden;min-width:0px;"],i.w.KeylineGray,u.b.default,i.w.Dark),w=r.ZP.div.withConfig({displayName:"RunStatusPez__RunRow",componentId:"sc-1eclpuq-2"})(["padding:8px;font-size:12px;display:flex;align-items:flex-start;justify-content:space-between;"]),S=r.ZP.div.withConfig({displayName:"RunStatusPez__SummaryContainer",componentId:"sc-1eclpuq-3"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:4px 8px 8px;:empty{display:none;}"]),R=r.ZP.div.withConfig({displayName:"RunStatusPez__Pez",componentId:"sc-1eclpuq-4"})(["background-color:",";border-radius:2px;height:16px;opacity:",";width:8px;"],(function(n){return n.$color}),(function(n){return n.$opacity}))},42430:function(n,e,t){t.r(e),t.d(e,{ScheduledRunListRoot:function(){return I}});var r,i=t(99500),s=t(73701),o=t(3159),a=t(30804),u=t(60736),c=t(6466),d=t(60652),l=t(7838),h=(t(325),t(14156)),p=t(12436),x=t(19102),m=t(78093),f=t(82348),g=t(78042),j=t(81403),y=t(89324),v=t(24375),w=t(50741),S=t(31747),R=t(32289),I=function(){(0,m.Px)(),(0,f.j)("Scheduled runs");var n=(0,s.a)(k,{fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0}),e=(0,x.C4)(n,x.dT);return(0,R.jsxs)(a.T,{children:[(0,R.jsx)(S.a,{refreshStates:[e]}),(0,R.jsx)(w.g,{queryResult:n,children:function(n){var e=n.repositoriesOrError,t=n.instance;if("PythonError"===e.__typename){var r=e.message;return(0,R.jsx)(u.b,{intent:"warning",title:(0,R.jsxs)(c.Z,{direction:"row",spacing:4,children:[(0,R.jsx)("div",{children:"Could not load scheduled ticks."}),(0,R.jsx)(d.Z,{color:l.w.Link,underline:"always",onClick:function(){(0,h._)({title:"Python error",body:r})},children:"View error"})]})})}return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(y.K,{daemonHealth:t.daemonHealth,padding:{vertical:16,horizontal:24}}),(0,R.jsx)(v.n,{repos:e.nodes})]})}})]})};e.default=I;var k=(0,o.Ps)(r||(r=(0,i.Z)(["\n  query SchedulerInfoQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      ... on RepositoryConnection {\n        nodes {\n          __typename\n          id\n          ... on Repository {\n            ...RepositorySchedulesFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n  ","\n"])),g.O,j.dM,p.Bq)},81403:function(n,e,t){t.d(e,{GA:function(){return h},dM:function(){return p},tj:function(){return x}});var r,i,s,o=t(99500),a=t(3159),u=t(12436),c=t(78042),d=t(45352),l=t(2097),h=(0,a.Ps)(r||(r=(0,o.Z)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n  ","\n"])),d.ai),p=(0,a.Ps)(i||(i=(0,o.Z)(["\n  fragment RepositorySchedulesFragment on Repository {\n    name\n    id\n    location {\n      id\n      name\n    }\n    schedules {\n      id\n      ...ScheduleFragment\n    }\n    ...RepositoryInfoFragment\n  }\n  ","\n  ","\n"])),l.x,h),x=(0,a.Ps)(s||(s=(0,o.Z)(["\n  query SchedulesRootQuery(\n    $repositorySelector: RepositorySelector!\n    $instigationType: InstigationType!\n  ) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      __typename\n      ... on Repository {\n        id\n        ...RepositorySchedulesFragment\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: $instigationType) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"])),u.Bq,p,d.ai,c.O)},89324:function(n,e,t){t.d(e,{K:function(){return c}});var r=t(95764),i=t(81034),s=t(32030),o=t(60736),a=(t(325),t(32289)),u=["daemonHealth"],c=function(n){var e=n.daemonHealth,t=(0,i.Z)(n,u),c=void 0;if(e){var d=e.allDaemonStatuses.filter((function(n){return"SCHEDULER"===n.daemonType}));if(d){var l=d[0];c=!(!l.required||!l.healthy)}}return!1===c?(0,a.jsx)(s.x,(0,r.Z)((0,r.Z)({},t),{},{children:(0,a.jsx)(o.b,{intent:"warning",title:"The scheduler daemon is not running.",description:(0,a.jsxs)("div",{children:["See the"," ",(0,a.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})})):null}},24375:function(n,e,t){t.d(e,{n:function(){return L}});var r,i=t(99500),s=t(19065),o=t(95764),a=t(59019),u=t(922),c=t(65880),d=t(3159),l=t(32030),h=t(89646),p=t(75453),x=t(24971),m=t(55113),f=t(34595),g=t(762),j=t(8412),y=t(12745),v=t(7838),w=t(24818),S=t(8358),R=t(60652),I=t(6466),k=t(41332),T=t.n(k),C=t(325),b=t(74549),_=t(13065),E=t(12436),N=t(9429),q=t(62e3),F=t(80342),O=t(5484),P=t(90933),Z=t(76336),z=t(26306),U=t(25582),A=t(68156),K=t(32289),L=C.memo((function(n){var e=n.repos,t=[],r=!1,i=!1,s=(0,Z.vl)().options;return e.forEach((function(n){var e=n.schedules;i=i||e.length>0;var s={name:n.name,location:n.location.name},o=e.filter((function(n){return n.futureTicks.results.length&&n.scheduleState.status===O.yn.RUNNING})),u=Math.min.apply(Math,(0,a.Z)(o.map((function(n){return n.futureTicks.results[n.futureTicks.results.length-1].timestamp}))));o.forEach((function(n){n.futureTicks.results.forEach((function(e){e.timestamp<=u&&t.push({schedule:n,timestamp:e.timestamp,repoAddress:s})}))})),r||(r=e.some((function(n){return!!n.mode})))})),t.sort((function(n,e){return n.timestamp-e.timestamp})),t.length?(0,K.jsxs)(m.i,{children:[(0,K.jsx)("thead",{children:(0,K.jsxs)("tr",{children:[(0,K.jsx)("th",{style:{width:"260px"},children:"Timestamp"}),(0,K.jsx)("th",{style:{width:"30%"},children:"Schedule"}),(0,K.jsx)("th",{children:r?"Job / Pipeline":"Job"}),(0,K.jsx)("th",{children:"Metadata"})]})}),(0,K.jsx)("tbody",{children:t.map((function(n){var e=n.schedule,t=n.timestamp,r=n.repoAddress,i=(0,Z.qz)(s,r);return(0,K.jsxs)("tr",{children:[(0,K.jsx)("td",{children:(0,K.jsx)(A.v,{timestamp:t,timezone:e.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})}),(0,K.jsx)("td",{children:(0,K.jsx)(b.rU,{to:(0,U.$U)(r,"/schedules/".concat(e.name)),children:e.name})}),(0,K.jsx)("td",{children:(0,K.jsx)(q.h,{pipelineName:e.pipelineName,pipelineHrefContext:r,isJob:!!i&&(0,Z.E8)(i,e.pipelineName)})}),(0,K.jsx)("td",{children:(0,K.jsx)(V,{repoAddress:r,schedule:e,tickTimestamp:t})})]},"".concat(e.id,":").concat(t))}))})]}):(0,K.jsx)(l.x,{padding:{vertical:32},children:(0,K.jsx)(h.t,{icon:"error",title:"No scheduled ticks",description:i?(0,K.jsxs)(K.Fragment,{children:["There are no running schedules."," ",(0,K.jsx)(b.rU,{to:"/overview/schedules",children:"Start a schedule"})," to see scheduled ticks."]}):(0,K.jsx)(K.Fragment,{children:"There are no schedules in this workspace. Create a running schedule to view its scheduled ticks."}),action:i?null:(0,K.jsx)(p.fr,{icon:(0,K.jsx)(x.JO,{name:"open_in_new"}),href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",children:"View documentation"})})})})),V=C.memo((function(n){var e,t=n.repoAddress,r=n.schedule,i=n.tickTimestamp,a=(0,o.Z)((0,o.Z)({},(0,z.$)(t)),{},{scheduleName:r.name}),u=C.useState(!1),d=(0,s.Z)(u,2),l=d[0],h=d[1],m=(0,c.t)(D,{variables:{scheduleSelector:a,tickTimestamp:i}}),y=(0,s.Z)(m,2),v=y[0],w=y[1],S=w.called,R=w.loading,I=w.data,k=!!S&&!R,T="Schedule"===(null===I||void 0===I||null===(e=I.scheduleOrError)||void 0===e?void 0:e.__typename)?I.scheduleOrError.futureTick.evaluationResult:null,b=k?(0,K.jsx)($,{repoAddress:t,schedule:r,loading:R,onItemOpen:h,evaluationResult:T}):(0,K.jsx)(f.$,{purpose:"body-text"});return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(g.J,{content:(0,K.jsx)(j.v2,{children:b}),position:"bottom-right",onOpening:function(){S||v()},children:(0,K.jsx)(p.zx,{icon:(0,K.jsx)(x.JO,{name:"expand_more"})})}),(0,K.jsx)(G,{repoAddress:t,isOpen:l,setOpen:h,schedule:r,tickTimestamp:i,evaluationResult:T})]})})),$=function(n){var e=n.repoAddress,t=n.schedule,r=n.evaluationResult,i=n.loading,s=n.onItemOpen;if(!r)return(0,K.jsx)(j.sN,{text:"Could not preview tick for this schedule"});if(r.skipReason)return(0,K.jsx)(j.sN,{text:"View skip reason...",onClick:function(){return s(!0)}});if(r.error)return(0,K.jsx)(j.sN,{text:"View error...",onClick:function(){return s(!0)}});if(!r.runRequests||!r.runRequests.length)return(0,K.jsx)(j.sN,{text:"No runs requested for this projected schedule tick"});if(1===r.runRequests.length){var o=r.runRequests[0],a=o?o.runConfigYaml:"";return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(j.sN,{text:i?"Loading Configuration...":"View Configuration...",icon:"open_in_new",onClick:function(){return s(!0)}}),(0,K.jsx)(P.U,{text:"Open in Launchpad...",icon:"edit",target:"_blank",to:(0,U.$U)(e,"/pipeline_or_job/".concat(t.pipelineName,"/playground/setup?").concat(T().stringify({mode:t.mode,config:a,solidSelection:t.solidSelection})))})]})}return(0,K.jsx)(j.sN,{text:"View ".concat(r.runRequests.length," run requests..."),icon:"edit",target:"_blank",onClick:function(){return s(!0)}})},G=function(n){var e=n.repoAddress,t=n.evaluationResult,r=n.schedule,i=n.tickTimestamp,o=n.setOpen,a=n.isOpen,u=C.useState(t&&t.runRequests&&1===t.runRequests.length?t.runRequests[0]:null),c=(0,s.Z)(u,2),d=c[0],h=c[1],f=(0,N.m)(),k=(0,Z.Ux)(e),b=(0,Z.E8)(k,r.pipelineName);C.useEffect((function(){t&&t.runRequests&&1===t.runRequests.length&&h(t.runRequests[0])}),[t]);var q,O=function(){h(null),o(!1)};return t?d?q=(0,K.jsxs)(l.x,{flex:{direction:"column",gap:20},children:[(0,K.jsxs)(l.x,{flex:{direction:"column",gap:12},padding:{top:16,horizontal:24},children:[(0,K.jsx)(y.pm,{children:"Tags"}),d.tags.length?(0,K.jsx)(F.Qq,{tags:d.tags,mode:b?null:r.mode}):null]}),(0,K.jsxs)("div",{children:[(0,K.jsx)(l.x,{border:{side:"bottom",width:1,color:v.w.KeylineGray},padding:{left:24,bottom:16},children:(0,K.jsx)(y.pm,{children:"Config"})}),(0,K.jsx)(w.NU,{value:d.runConfigYaml,options:{lineNumbers:!0,mode:"yaml"}})]})]}):t.error?q=(0,K.jsx)(S.a7,{children:(0,K.jsx)(E.T9,{error:t.error})}):t.skipReason?q=(0,K.jsx)(S.a7,{children:(0,K.jsx)(Y,{children:t.skipReason})}):t.runRequests&&(q=(0,K.jsx)(S.a7,{children:(0,K.jsx)(B,{children:(0,K.jsxs)(m.i,{children:[(0,K.jsx)("thead",{children:(0,K.jsxs)("tr",{children:[(0,K.jsx)("th",{children:"Run key"}),(0,K.jsx)("th",{children:"Config"}),(0,K.jsx)("th",{children:"Actions"})]})}),(0,K.jsx)("tbody",{children:t.runRequests.map((function(n,t){return n?(0,K.jsxs)("tr",{children:[(0,K.jsx)("td",{children:n.runKey||(0,K.jsx)("span",{children:"\u2014"})}),(0,K.jsx)("td",{children:(0,K.jsx)(R.Z,{onClick:function(){return h(n)},underline:!1,children:(0,K.jsxs)(I.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,K.jsx)(x.JO,{name:"open_in_new",color:v.w.Gray400}),(0,K.jsx)("span",{children:"View config"})]})})}),(0,K.jsx)("td",{children:(0,K.jsx)(g.J,{content:(0,K.jsx)(j.v2,{children:(0,K.jsx)(P.U,{text:"Open in Launchpad...",icon:"edit",target:"_blank",to:(0,U.$U)(e,"/".concat(b?"jobs":"pipelines","/").concat(r.pipelineName,"/playground/setup?").concat(T().stringify({mode:r.mode,config:n.runConfigYaml,solidSelection:r.solidSelection})))})}),position:"bottom",children:(0,K.jsx)(p.zx,{icon:(0,K.jsx)(x.JO,{name:"expand_more"})})})})]},t):null}))})]})})})):q=null,(0,K.jsxs)(S.Vq,{onClose:function(){return O()},style:{width:"50vw"},title:(0,K.jsxs)(l.x,{flex:{direction:"row",gap:4},children:[(0,K.jsx)(A.v,{timestamp:i,timezone:r.executionTimezone}),null!==d&&void 0!==d&&d.runKey?(0,K.jsxs)("div",{children:[": ",null===d||void 0===d?void 0:d.runKey]}):null]}),isOpen:a,children:[q,(0,K.jsxs)(S.cN,{topBorder:!0,children:[d?(0,K.jsx)(p.zx,{autoFocus:!1,onClick:function(){f(d.runConfigYaml),_.L.show({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"})},children:"Copy config"}):null,(0,K.jsx)(p.zx,{intent:"primary",autoFocus:!0,onClick:function(){return O()},children:"OK"})]})]})},D=(0,d.Ps)(r||(r=(0,i.Z)(["\n  query ScheduleTickConfigQuery($scheduleSelector: ScheduleSelector!, $tickTimestamp: Int!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        futureTick(tickTimestamp: $tickTimestamp) {\n          evaluationResult {\n            runRequests {\n              runKey\n              runConfigYaml\n              tags {\n                key\n                value\n              }\n            }\n            skipReason\n            error {\n              ...PythonErrorFragment\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),E.Bq),B=u.ZP.div.withConfig({displayName:"SchedulesNextTicks__RunRequestBody",componentId:"io9s6c-0"})(["font-size:13px;"]),Y=u.ZP.div.withConfig({displayName:"SchedulesNextTicks__SkipWrapper",componentId:"io9s6c-1"})(["background-color:#fdfcf2;border:1px solid ",";border-radius:3px;"],v.w.Yellow500)}}]);
//# sourceMappingURL=390.27681a20.chunk.js.map