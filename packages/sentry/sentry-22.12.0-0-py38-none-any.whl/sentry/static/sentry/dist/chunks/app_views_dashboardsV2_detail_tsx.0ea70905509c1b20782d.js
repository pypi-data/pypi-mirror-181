"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_dashboardsV2_detail_tsx"],{"./app/views/dashboardsV2/detail.tsx":(t,e,a)=>{a.d(e,{R:()=>Dt,Z:()=>St});var i=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(a("../node_modules/core-js/modules/es.array.includes.js"),a("../node_modules/react/index.js")),o=a("../node_modules/react-router/es/index.js"),r=a("../node_modules/lodash/isEqual.js"),n=a.n(r),h=a("../node_modules/lodash/omit.js"),l=a.n(h),p=a("./app/actionCreators/dashboards.tsx"),c=a("./app/actionCreators/indicator.tsx"),g=a("./app/actionCreators/modal.tsx"),u=a("./app/components/breadcrumbs.tsx"),b=a("./app/components/hookOrDefault.tsx"),m=a("./app/components/layouts/thirds.tsx"),w=a("./app/components/modals/widgetViewerModal/utils.tsx"),Z=a("./app/components/noProjectMessage.tsx"),D=a("./app/components/organizations/pageFilters/container.tsx"),f=a("./app/components/sentryDocumentTitle.tsx"),E=a("./app/constants/index.tsx"),v=a("./app/locale.tsx"),y=a("./app/styles/organization.tsx"),x=a("./app/styles/space.tsx"),S=a("./app/utils.tsx"),C=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),z=a("./app/utils/discover/eventView.tsx"),P=a("./app/utils/performance/contexts/metricsCardinality.tsx"),W=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),I=a("./app/utils/withApi.tsx"),k=a("./app/utils/withOrganization.tsx"),R=a("./app/utils/withProjects.tsx"),q=a("./app/views/dashboardsV2/utils.tsx"),A=a("./app/views/performance/landing/metricsDataSwitcherAlert.tsx"),V=a("./app/views/performance/data.tsx"),T=a("./app/views/performance/landing/metricsDataSwitcher.tsx"),L=a("./app/views/performance/utils.tsx"),U=a("./app/views/dashboardsV2/widgetViewer/widgetViewerContext.tsx"),$=a("./app/components/acl/feature.tsx"),B=a("./app/components/acl/featureDisabled.tsx"),_=a("./app/components/button.tsx"),N=a("./app/components/buttonBar.tsx"),j=a("./app/components/confirm.tsx"),F=a("./app/components/hovercard.tsx"),M=a("./app/components/tooltip.tsx"),O=a("./app/icons/index.tsx"),X=a("./app/views/dashboardsV2/types.tsx"),H=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function G(t){let{organization:e,dashboardState:a,dashboards:i,hasUnsavedFilters:s,widgetLimitReached:o,onEdit:r,onCommit:n,onDelete:h,onCancel:l,onAddWidget:p}=t;function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.t)("Cancel");return(0,H.tZ)(_.ZP,{"data-test-id":"dashboard-cancel",onClick:t=>{t.preventDefault(),l()},children:t})}return[X.n3.EDIT,X.n3.PENDING_DELETE].includes(a)?(0,H.BX)(J,{gap:1,children:[c(),(0,H.tZ)(j.Z,{priority:"danger",message:(0,v.t)("Are you sure you want to delete this dashboard?"),onConfirm:h,disabled:i.length<=1,children:(0,H.tZ)(_.ZP,{"data-test-id":"dashboard-delete",priority:"danger",children:(0,v.t)("Delete")})}),(0,H.tZ)(_.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),n()},priority:"primary",children:(0,v.t)("Save and Finish")})]},"edit-controls"):a===X.n3.CREATE?(0,H.BX)(J,{gap:1,children:[c(),(0,H.tZ)(_.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),n()},priority:"primary",children:(0,v.t)("Save and Finish")})]},"create-controls"):a===X.n3.PREVIEW?(0,H.BX)(J,{gap:1,children:[c((0,v.t)("Go Back")),(0,H.tZ)(_.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),n()},priority:"primary",children:(0,v.t)("Add Dashboard")})]},"preview-controls"):(0,H.tZ)(J,{gap:1,children:(0,H.tZ)(Y,{children:t=>(0,H.BX)(d.Fragment,{children:[(0,H.tZ)(_.ZP,{"data-test-id":"dashboard-edit",onClick:t=>{t.preventDefault(),r()},icon:(0,H.tZ)(O.yl,{}),disabled:!t||s,title:s&&Dt,priority:"default",size:"sm",children:(0,v.t)("Edit Dashboard")}),t?(0,H.tZ)(M.Z,{title:(0,v._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:X.ZU}),disabled:!o,children:(0,H.tZ)(_.ZP,{"data-test-id":"add-widget-library",priority:"primary",size:"sm",disabled:o,icon:(0,H.tZ)(O.N_,{isCircled:!0}),onClick:()=>{(0,C.Z)("dashboards_views.widget_library.opened",{organization:e}),p()},children:(0,v.t)("Add Widget")})}):null]})})},"controls")}G.displayName="Controls";const Y=t=>{let{children:e}=t;return(0,H.tZ)($.Z,{hookName:"feature-disabled:dashboards-edit",features:["organizations:dashboards-edit"],renderDisabled:t=>(0,H.tZ)(F.uI,{body:(0,H.tZ)(B.Z,{features:t.features,hideHelpToggle:!0,featureName:(0,v.t)("Dashboard Editing")}),children:t.children(t)}),children:t=>{let{hasFeature:a}=t;return e(a)}})};Y.displayName="DashboardEditFeature";const J=(0,s.Z)(N.ZP,{target:"e78awt50"})("@media (max-width: ",(t=>t.theme.breakpoints.small),"){grid-auto-flow:row;grid-row-gap:",(0,x.Z)(1),";width:100%;}"),K=G;var Q=a("./app/views/dashboardsV2/dashboard.tsx"),tt=a("./app/views/dashboardsV2/data.tsx"),et=a("./app/components/datePageFilter.tsx"),at=a("./app/components/environmentPageFilter.tsx"),it=a("./app/components/organizations/pageFilterBar.tsx"),st=a("./app/components/projectPageFilter.tsx"),dt=a("./app/utils/queryString.tsx"),ot=a("./app/utils/releases/releasesProvider.tsx"),rt=a("./app/utils/useOrganization.tsx"),nt=a("./app/utils/usePageFilters.tsx"),ht=a("./app/views/dashboardsV2/releasesSelectControl.tsx");function lt(t){let{filters:e,hasUnsavedChanges:a,isEditingDashboard:i,isPreview:s,location:o,onCancel:r,onDashboardFilterChange:n,onSave:h}=t;const{selection:l}=(0,nt.Z)(),p=(0,rt.Z)(),c=((0,S.ri)(o.query?.[X.qA.RELEASE])?(0,dt.qP)(o.query[X.qA.RELEASE]):e?.[X.qA.RELEASE])??[];return(0,H.BX)(pt,{children:[(0,H.BX)(it.Z,{condensed:!0,children:[(0,H.tZ)(st.Z,{disabled:i}),(0,H.tZ)(at.Z,{disabled:i}),(0,H.tZ)(et.Z,{alignDropdown:"left",disabled:i})]}),(0,H.BX)(d.Fragment,{children:[(0,H.tZ)(ct,{children:(0,H.tZ)(gt,{children:(0,H.tZ)(ot.lR,{organization:p,selection:l,children:(0,H.tZ)(ht.Z,{handleChangeFilter:n,selectedReleases:c,isDisabled:i})})})}),a&&!i&&!s&&(0,H.BX)(ct,{children:[(0,H.tZ)(_.ZP,{priority:"primary",onClick:h,children:(0,v.t)("Save")}),(0,H.tZ)(_.ZP,{onClick:r,children:(0,v.t)("Cancel")})]})]})]})}lt.displayName="FiltersBar";const pt=(0,s.Z)("div",{target:"eecuk2e2"})("display:flex;flex-direction:row;gap:",(0,x.Z)(1.5),";margin-bottom:",(0,x.Z)(2),";@media (max-width: ",(t=>t.theme.breakpoints.small),"){display:grid;grid-auto-flow:row;}"),ct=(0,s.Z)(N.ZP,{target:"eecuk2e1"})("display:grid;gap:",(0,x.Z)(1.5),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){display:flex;align-items:flex-start;gap:",(0,x.Z)(1.5),";}"),gt=(0,s.Z)("div",{target:"eecuk2e0"})("@media (min-width: ",(t=>t.theme.breakpoints.small),"){max-width:300px;}");var ut=a("./app/views/dashboardsV2/layoutUtils.tsx"),bt=a("./app/components/editableText.tsx");function mt(t){let{dashboard:e,isEditing:a,onUpdate:i}=t;return(0,H.tZ)("div",{children:e?(0,H.tZ)(bt.Z,{isDisabled:!a,value:e.title,onChange:t=>i({...e,title:t}),errorMessage:(0,v.t)("Please set a title for this dashboard"),autoSelect:!0}):(0,v.t)("Dashboards")})}mt.displayName="DashboardTitle";const wt=mt,Zt=(0,v.t)("You have unsaved changes, are you sure you want to leave?"),Dt=(0,v.t)("You have unsaved dashboard filters. You can save or discard them."),ft=(0,b.Z)({hookName:"component:dashboards-header"});class Et extends d.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{dashboardState:this.props.initialState,modifiedDashboard:this.updateModifiedDashboard(this.props.initialState),widgetLimitReached:this.props.dashboard.widgets.length>=X.ZU,setData:t=>{this.setState(t)}}),(0,i.Z)(this,"onEdit",(()=>{const{dashboard:t,organization:e}=this.props;(0,C.Z)("dashboards2.edit.start",{organization:e}),this.setState({dashboardState:X.n3.EDIT,modifiedDashboard:(0,q.qk)(t)})})),(0,i.Z)(this,"onRouteLeave",(()=>{const{dashboard:t}=this.props,{modifiedDashboard:e}=this.state;if(![X.n3.VIEW,X.n3.PENDING_DELETE,X.n3.PREVIEW].includes(this.state.dashboardState)&&!n()(e,t))return Zt})),(0,i.Z)(this,"onUnload",(t=>{const{dashboard:e}=this.props,{modifiedDashboard:a}=this.state;[X.n3.VIEW,X.n3.PENDING_DELETE,X.n3.PREVIEW].includes(this.state.dashboardState)||n()(a,e)||(t.preventDefault(),t.returnValue=Zt)})),(0,i.Z)(this,"onDelete",(t=>()=>{const{api:e,organization:a,location:i}=this.props;if(!t?.id)return;const s=this.state.dashboardState;this.setState({dashboardState:X.n3.PENDING_DELETE},(()=>{(0,p.iM)(e,a.slug,t.id).then((()=>{(0,c.S9)((0,v.t)("Dashboard deleted")),(0,C.Z)("dashboards2.delete",{organization:a}),o.browserHistory.replace({pathname:`/organizations/${a.slug}/dashboards/`,query:i.query})})).catch((()=>{this.setState({dashboardState:s})}))}))})),(0,i.Z)(this,"onCancel",(()=>{const{organization:t,dashboard:e,location:a,params:i}=this.props,{modifiedDashboard:s}=this.state;let d=!n()(s,e);if(e.widgets.every((t=>{let{layout:e}=t;return!(0,S.ri)(e)}))&&(d=!n()({...s,widgets:s?.widgets.map((t=>l()(t,"layout")))},{...e,widgets:e.widgets.map((t=>l()(t,"layout")))})),!d||this.isPreview||confirm(Zt)){if(i.dashboardId)return(0,C.Z)("dashboards2.edit.cancel",{organization:t}),void this.setState({dashboardState:X.n3.VIEW,modifiedDashboard:null});(0,C.Z)("dashboards2.create.cancel",{organization:t}),o.browserHistory.replace({pathname:`/organizations/${t.slug}/dashboards/`,query:a.query})}})),(0,i.Z)(this,"handleChangeFilter",(t=>{const{dashboard:e,location:a}=this.props,{modifiedDashboard:i}=this.state,s=i||e;if(Object.keys(t).every((e=>!s.filters?.[e]&&0===t[e].length)))return;const d={};Object.keys(t).forEach((e=>{d[e]=t[e].length?t[e]:""})),n()(t,e.filters)||o.browserHistory.push({...a,query:{...a.query,...d}})})),(0,i.Z)(this,"handleUpdateWidgetList",(t=>{const{organization:e,dashboard:a,api:i,onDashboardUpdate:s,location:d}=this.props,{modifiedDashboard:r}=this.state,n=(0,ut.RI)(t),h=(0,ut.Sp)(n),l={...(0,q.qk)(r||a),widgets:(0,ut._F)(t,h)};this.setState({modifiedDashboard:l,widgetLimitReached:t.length>=X.ZU}),this.isEditing||this.isPreview||(0,p.Y)(i,e.slug,l).then((t=>{s&&(s(t),this.setState({modifiedDashboard:null})),(0,c.S9)((0,v.t)("Dashboard updated")),a&&t.id!==a.id&&o.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboard/${t.id}/`,query:{...d.query}})}),(()=>{}))})),(0,i.Z)(this,"handleAddCustomWidget",(t=>{const{dashboard:e}=this.props,{modifiedDashboard:a}=this.state,i=a||e;this.onUpdateWidget([...i.widgets,t])})),(0,i.Z)(this,"onAddWidget",(()=>{const{organization:t,dashboard:e,router:a,location:i,params:{dashboardId:s}}=this.props;this.setState({modifiedDashboard:(0,q.qk)(e)}),s&&a.push({pathname:`/organizations/${t.slug}/dashboard/${s}/widget/new/`,query:{...i.query,source:X.EN.DASHBOARDS}})})),(0,i.Z)(this,"onCommit",(()=>{const{api:t,organization:e,location:a,dashboard:i,onDashboardUpdate:s}=this.props,{modifiedDashboard:d,dashboardState:r}=this.state;switch(r){case X.n3.PREVIEW:case X.n3.CREATE:if(d){this.isPreview&&(0,C.Z)("dashboards_manage.templates.add",{organization:e,dashboard_id:i.id,dashboard_title:i.title,was_previewed:!0});const s={...(0,q.qk)(d),...(0,q.EK)(a),filters:(0,q.lM)(a)??d.filters};(0,p.JR)(t,e.slug,s,this.isPreview).then((t=>{(0,c.S9)((0,v.t)("Dashboard created")),(0,C.Z)("dashboards2.create.complete",{organization:e}),this.setState({dashboardState:X.n3.VIEW}),o.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboard/${t.id}/`,query:{query:l()(a.query,Object.values(X.qA))}})}),(()=>{}))}break;case X.n3.EDIT:if(d)return n()(i,d)?void this.setState({dashboardState:X.n3.VIEW,modifiedDashboard:null}):void(0,p.Y)(t,e.slug,d).then((t=>{s&&s(t),(0,c.S9)((0,v.t)("Dashboard updated")),(0,C.Z)("dashboards2.edit.complete",{organization:e}),this.setState({dashboardState:X.n3.VIEW,modifiedDashboard:null}),i&&t.id!==i.id&&o.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboard/${t.id}/`,query:{...a.query}})}),(()=>{}));this.setState({dashboardState:X.n3.VIEW,modifiedDashboard:null});break;case X.n3.VIEW:default:this.setState({dashboardState:X.n3.VIEW,modifiedDashboard:null})}})),(0,i.Z)(this,"setModifiedDashboard",(t=>{this.setState({modifiedDashboard:t})})),(0,i.Z)(this,"onUpdateWidget",(t=>{this.setState((e=>({...e,widgetLimitReached:t.length>=X.ZU,modifiedDashboard:{...e.modifiedDashboard||this.props.dashboard,widgets:t}})))}))}componentDidMount(){const{route:t,router:e}=this.props;e.setRouteLeaveHook(t,this.onRouteLeave),window.addEventListener("beforeunload",this.onUnload),this.checkIfShouldMountWidgetViewerModal()}componentDidUpdate(t){this.checkIfShouldMountWidgetViewerModal(),t.initialState!==this.props.initialState&&this.setState({dashboardState:this.props.initialState})}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}checkIfShouldMountWidgetViewerModal(){const{params:{widgetId:t,dashboardId:e},organization:a,dashboard:i,location:s,router:d}=this.props,{seriesData:o,tableData:r,pageLinks:n,totalIssuesCount:h,seriesResultsType:p}=this.state;if((0,w.X)(s.pathname)){const u=(0,S.ri)(t)&&(i.widgets.find((e=>{let{id:a}=e;return a===String(t)}))??i.widgets[t]);u?((0,g.openWidgetViewerModal)({organization:a,widget:u,seriesData:o,seriesResultsType:p,tableData:r,pageLinks:n,totalIssuesCount:h,onClose:()=>{const t=l()(s.query,Object.values(w.R));d.push({pathname:s.pathname.replace(/widget\/[0-9]+\/$/,""),query:t})},onEdit:()=>{const t=i.widgets.indexOf(u);e&&d.push({pathname:`/organizations/${a.slug}/dashboard/${e}/widget/${t}/edit/`,query:{...s.query,source:X.EN.DASHBOARDS}})}}),(0,C.Z)("dashboards_views.widget_viewer.open",{organization:a,widget_type:u.widgetType??X.l9.DISCOVER,display_type:u.displayType})):(d.replace({pathname:`/organizations/${a.slug}/dashboard/${i.id}/`,query:s.query}),(0,c.Iw)((0,v.t)("Widget not found")))}}updateModifiedDashboard(t){const{dashboard:e}=this.props;switch(t){case X.n3.PREVIEW:case X.n3.CREATE:case X.n3.EDIT:return(0,q.qk)(e);default:return null}}get isPreview(){const{dashboardState:t}=this.state;return X.n3.PREVIEW===t}get isEditing(){const{dashboardState:t}=this.state;return[X.n3.EDIT,X.n3.CREATE,X.n3.PENDING_DELETE].includes(t)}get isWidgetBuilderRouter(){const{location:t,params:e,organization:a}=this.props,{dashboardId:i,widgetIndex:s}=e,d=[`/organizations/${a.slug}/dashboards/new/widget/new/`,`/organizations/${a.slug}/dashboard/${i}/widget/new/`,`/organizations/${a.slug}/dashboards/new/widget/${s}/edit/`,`/organizations/${a.slug}/dashboard/${i}/widget/${s}/edit/`];return E.Yj&&d.push("/dashboards/new/widget/new/",`/dashboard/${i}/widget/new/`,`/dashboards/new/widget/${s}/edit/`,`/dashboard/${i}/widget/${s}/edit/`),d.includes(t.pathname)}get dashboardTitle(){const{dashboard:t}=this.props,{modifiedDashboard:e}=this.state;return e?e.title:t.title}renderWidgetBuilder(){const{children:t,dashboard:e}=this.props,{modifiedDashboard:a}=this.state;return(0,d.isValidElement)(t)?(0,d.cloneElement)(t,{dashboard:a??e,onSave:this.isEditing?this.onUpdateWidget:this.handleUpdateWidgetList}):t}renderDefaultDashboardDetail(){const{organization:t,dashboard:e,dashboards:a,params:i,router:s,location:d}=this.props,{modifiedDashboard:o,dashboardState:r,widgetLimitReached:n}=this.state,{dashboardId:h}=i;return(0,H.tZ)(D.Z,{desyncedAlertMessage:'Using filter values saved to this dashboard. To edit saved filters, click "Edit Dashboard".',hideDesyncRevertButton:!0,defaultSelection:{datetime:{start:null,end:null,utc:!1,period:tt.GY}},children:(0,H.tZ)(y.JH,{children:(0,H.BX)(Z.Z,{organization:t,children:[(0,H.BX)(vt,{children:[(0,H.tZ)(yt,{children:(0,H.tZ)(wt,{dashboard:o??e,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})}),(0,H.tZ)(K,{organization:t,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(e),dashboardState:r,widgetLimitReached:n})]}),(0,H.tZ)(ft,{organization:t}),(0,H.tZ)(lt,{filters:{},location:d,hasUnsavedChanges:!1,isEditingDashboard:!1,isPreview:!1,onDashboardFilterChange:this.handleChangeFilter}),(0,H.tZ)(P.BT,{organization:t,location:d,children:(0,H.tZ)(T.d,{organization:t,eventView:z.ZP.fromLocation(d),location:d,hideLoadingIndicator:!0,children:a=>(0,H.tZ)(W.kP,{location:d,forceTransactions:a.forceTransactionsOnly,children:(0,H.tZ)(Q.ZP,{paramDashboardId:h,dashboard:o??e,organization:t,isEditing:this.isEditing,widgetLimitReached:n,onUpdate:this.onUpdateWidget,handleUpdateWidgetList:this.handleUpdateWidgetList,handleAddCustomWidget:this.handleAddCustomWidget,isPreview:this.isPreview,router:s,location:d})})})})]})})})}getBreadcrumbLabel(){const{dashboardState:t}=this.state;let e=this.dashboardTitle;return t===X.n3.CREATE?e=(0,v.t)("Create Dashboard"):this.isPreview&&(e=(0,v.t)("Preview Dashboard")),e}renderDashboardDetail(){const{api:t,organization:e,dashboard:a,dashboards:i,params:s,router:d,location:r,newWidget:n,onSetNewWidget:h,onDashboardUpdate:g,projects:b}=this.props,{modifiedDashboard:w,dashboardState:E,widgetLimitReached:y,seriesData:x,setData:S}=this.state,{dashboardId:C}=s,z="default-overview"!==a.id&&E!==X.n3.CREATE&&(0,q.S$)(a,r),I=(0,V.C)(r,b),k=a.widgets.some(q.Gx);return(0,H.tZ)(f.Z,{title:a.title,orgSlug:e.slug,children:(0,H.tZ)(D.Z,{desyncedAlertMessage:'Using filter values saved to this dashboard. To edit saved filters, click "Edit Dashboard".',hideDesyncRevertButton:!0,defaultSelection:{datetime:{start:null,end:null,utc:!1,period:tt.GY}},children:(0,H.tZ)(xt,{children:(0,H.BX)(Z.Z,{organization:e,children:[(0,H.BX)(m.h4,{children:[(0,H.BX)(m.oB,{children:[(0,H.tZ)(u.Z,{crumbs:[{label:(0,v.t)("Dashboards"),to:`/organizations/${e.slug}/dashboards/`},{label:this.getBreadcrumbLabel()}]}),(0,H.tZ)(m.Dx,{children:(0,H.tZ)(wt,{dashboard:w??a,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})})]}),(0,H.tZ)(m.kP,{children:(0,H.tZ)(K,{organization:e,dashboards:i,hasUnsavedFilters:z,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(a),dashboardState:E,widgetLimitReached:y})})]}),(0,H.tZ)(m.uT,{children:(0,H.tZ)(m.or,{fullWidth:!0,children:(0,H.tZ)(P.BT,{organization:e,location:r,children:(0,H.tZ)(T.d,{organization:e,eventView:I,location:r,hideLoadingIndicator:!0,children:i=>(0,H.BX)(W.kP,{location:r,forceTransactions:i.forceTransactionsOnly,children:[k?(0,H.tZ)(A.v,{organization:e,eventView:I,projects:b,location:r,router:d,source:L.Pv.DISCOVER,...i}):null,(0,H.tZ)(lt,{filters:(w??a).filters,location:r,hasUnsavedChanges:z,isEditingDashboard:E!==X.n3.CREATE&&this.isEditing,isPreview:this.isPreview,onDashboardFilterChange:this.handleChangeFilter,onCancel:()=>{(0,q.Z5)(a,r),this.setState({modifiedDashboard:{...w??a,filters:a.filters}})},onSave:()=>{const i={...(0,q.qk)(w??a),...(0,q.EK)(r),filters:(0,q.lM)(r)??(w??a).filters};(0,p.Y)(t,e.slug,i).then((t=>{g&&(g(t),this.setState({modifiedDashboard:null})),(0,c.S9)((0,v.t)("Dashboard filters updated")),o.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboard/${t.id}/`,query:l()(r.query,Object.values(X.qA))})}),(()=>{}))}}),(0,H.tZ)(U.M.Provider,{value:{seriesData:x,setData:S},children:(0,H.tZ)(Q.ZP,{paramDashboardId:C,dashboard:w??a,organization:e,isEditing:this.isEditing,widgetLimitReached:y,onUpdate:this.onUpdateWidget,handleUpdateWidgetList:this.handleUpdateWidgetList,handleAddCustomWidget:this.handleAddCustomWidget,router:d,location:r,newWidget:n,onSetNewWidget:h,isPreview:this.isPreview})})]})})})})})]})})})})}render(){const{organization:t}=this.props;return this.isWidgetBuilderRouter?this.renderWidgetBuilder():t.features.includes("dashboards-edit")?this.renderDashboardDetail():this.renderDefaultDashboardDetail()}}Et.displayName="DashboardDetail";const vt=(0,s.Z)("div",{target:"e1anno2f2"})("display:grid;grid-template-columns:minmax(0, 1fr);grid-row-gap:",(0,x.Z)(2),";align-items:center;margin-bottom:",(0,x.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints.medium),"){grid-template-columns:minmax(0, 1fr) max-content;grid-column-gap:",(0,x.Z)(2),";height:40px;}"),yt=(0,s.Z)(m.Dx,{target:"e1anno2f1"})({name:"1i9vogi",styles:"margin-top:0"}),xt=(0,s.Z)(y.JH,{target:"e1anno2f0"})({name:"1hcx8jb",styles:"padding:0"}),St=(0,R.Z)((0,I.Z)((0,k.Z)(Et)))}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboardsV2_detail_tsx.753eab532f50196a8276bc488990e978.js.map