"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_index_tsx"],{"./app/components/events/errorLevel.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const o="13px",r=(0,i.Z)("span",{target:"e145dcfe0"})("padding:0;position:relative;width:",(e=>e.size||o),";height:",(e=>e.size||o),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.level?e.theme.level[e.level]:e.theme.level.error),";")},"./app/components/events/eventMessage.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/events/errorLevel.tsx"),r=s("./app/styles/space.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,i.Z)((e=>{let{className:t,level:s,levelIndicatorSize:i,message:r,annotations:a}=e;return(0,n.BX)("div",{className:t,children:[s&&(0,n.tZ)(o.Z,{size:i,level:s,children:s}),r&&(0,n.tZ)(l,{children:r}),a]})}),{target:"e1rp796r1"})("display:flex;gap:",(0,r.Z)(1),";align-items:center;position:relative;line-height:1.2;overflow:hidden;"),l=(0,i.Z)("span",{target:"e1rp796r0"})((e=>e.theme.overflowEllipsis)," width:auto;max-height:38px;"),d=a},"./app/components/pageAlertBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});const i=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"eb4vrz50"})("display:flex;align-items:center;justify-content:center;color:",(e=>e.theme.headerBackground),";background-color:",(e=>e.theme.bannerBackground),";padding:6px 30px;font-size:14px;")},"./app/components/projects/missingProjectMembership.tsx":(e,t,s)=>{s.d(t,{Z:()=>E});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("./app/actionCreators/indicator.tsx"),a=s("./app/actionCreators/teams.tsx"),l=s("./app/components/button.tsx"),d=s("./app/components/emptyMessage.tsx"),p=s("./app/components/forms/controls/selectControl.tsx"),c=s("./app/components/panels/index.tsx"),u=s("./app/icons/index.tsx"),h=s("./app/locale.tsx"),g=s("./app/stores/teamStore.tsx"),m=s("./app/styles/space.tsx"),v=s("./app/utils/withApi.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends r.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{loading:!1,error:!1,project:this.props.project,team:""}),(0,i.Z)(this,"getPendingTeamOption",(e=>({value:e,label:(0,Z.tZ)(S,{children:`#${e}`})})))}joinTeam(e){this.setState({loading:!0}),(0,a.um)(this.props.api,{orgId:this.props.organization.slug,teamId:e},{success:()=>{this.setState({loading:!1,error:!1}),(0,n.S9)((0,h.t)("Request to join team sent."))},error:()=>{this.setState({loading:!1,error:!0}),(0,n.Iw)((0,h.t)("There was an error while trying to request access."))}})}renderJoinTeam(e,t){const s=g.Z.getBySlug(e);return s?this.state.loading?t.has("open-membership")?(0,Z.tZ)(l.ZP,{busy:!0,children:(0,h.t)("Join Team")}):(0,Z.tZ)(l.ZP,{busy:!0,children:(0,h.t)("Request Access")}):s?.isPending?(0,Z.tZ)(l.ZP,{disabled:!0,children:(0,h.t)("Request Pending")}):t.has("open-membership")?(0,Z.tZ)(l.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,h.t)("Join Team")}):(0,Z.tZ)(l.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,h.t)("Request Access")}):null}getTeamsForAccess(){const e=[],t=[];return(this.state.project?.teams??[]).forEach((s=>{let{slug:i}=s;const o=g.Z.getBySlug(i);o&&(o.isPending?t.push(o.slug):e.push(o.slug))})),[e,t]}render(){const{organization:e}=this.props,t=this.state.team,s=this.state.project?.teams??[],i=new Set(e.features),o=[{label:(0,h.t)("Request Access"),options:this.getTeamsForAccess()[0].map((e=>({value:e,label:`#${e}`})))},{label:(0,h.t)("Pending Requests"),options:this.getTeamsForAccess()[1].map((e=>this.getPendingTeamOption(e)))}];return(0,Z.tZ)(y,{children:s.length?(0,Z.tZ)(d.Z,{icon:(0,Z.tZ)(u.Gy,{size:"xl"}),title:(0,h.t)("You're not a member of this project."),description:(0,h.t)("You'll need to join a team with access before you can view this data."),action:(0,Z.BX)(f,{children:[(0,Z.tZ)(x,{name:"select",placeholder:(0,h.t)("Select a Team"),options:o,onChange:e=>{const t=e?e.value:null;this.setState({team:t})}}),t?this.renderJoinTeam(t,i):(0,Z.tZ)(l.ZP,{disabled:!0,children:(0,h.t)("Select a Team")})]})}):(0,Z.tZ)(d.Z,{icon:(0,Z.tZ)(u.Gy,{size:"xl"}),children:(0,h.t)("No teams have access to this project yet. Ask an admin to add your team to this project.")})})}}b.displayName="MissingProjectMembership";const y=(0,o.Z)(c.s_,{target:"e1cfryqt3"})("margin:",(0,m.Z)(2)," 0;"),f=(0,o.Z)("div",{target:"e1cfryqt2"})("display:grid;grid-auto-flow:column;gap:",(0,m.Z)(2),";text-align:left;"),x=(0,o.Z)(p.Z,{target:"e1cfryqt1"})({name:"xu0q36",styles:"width:250px"}),S=(0,o.Z)("div",{target:"e1cfryqt0"})({name:"v6ye5b",styles:"display:flex;opacity:0.5;overflow:hidden"}),E=(0,v.Z)(b)},"./app/components/replays/replayCountBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("./app/components/badge.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{count:t}=e;const s=t&&t>50?"50+":t??null;return(0,o.tZ)(i.Z,{text:s})}r.displayName="ReplayCountBadge";const n=r},"./app/components/replays/replaysFeatureBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("./app/components/featureBadge.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){return(0,o.tZ)(i.Z,{...e,type:"beta"})}r.displayName="ReplaysFeatureBadge";const n=r},"./app/components/seenByList.tsx":(e,t,s)=>{s.d(t,{Z:()=>Z});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),r=s("../node_modules/moment/moment.js"),n=s.n(r),a=s("./app/components/avatar/avatarList.tsx"),l=s("./app/components/tooltip.tsx"),d=s("./app/icons/index.tsx"),p=s("./app/locale.tsx"),c=s("./app/stores/configStore.tsx"),u=s("./app/utils/formatters.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=e=>{let{avatarSize:t=28,seenBy:s=[],iconTooltip:i=(0,p.t)("People who have viewed this"),maxVisibleAvatars:r=10,iconPosition:g="left",className:Z}=e;const b=c.Z.get("user"),y=s.filter((e=>b.id!==e.id));return 0===y.length?null:(0,h.BX)(m,{iconPosition:g,className:Z,children:[(0,h.tZ)(a.Z,{users:y,avatarSize:t,maxVisibleAvatars:r,renderTooltip:e=>(0,h.BX)(o.Fragment,{children:[(0,u.He)(e),(0,h.tZ)("br",{}),n()(e.lastSeen).format("LL")]})}),(0,h.tZ)(v,{iconPosition:g,children:(0,h.tZ)(l.Z,{title:i,skipWrapper:!0,children:(0,h.tZ)(d.fn,{size:"sm",color:"subText"})})})]})};g.displayName="SeenByList";const m=(0,i.Z)("div",{target:"e1ayiung1"})("display:flex;",(e=>"left"===e.iconPosition?"flex-direction: row-reverse":""),";"),v=(0,i.Z)("div",{target:"e1ayiung0"})("display:flex;align-items:center;background-color:transparent;color:",(e=>e.theme.textColor),";height:28px;width:24px;text-align:center;",(e=>"left"===e.iconPosition?"margin-right: 10px":""),";"),Z=g},"./app/stores/organizationEnvironmentsStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("../node_modules/reflux/src/index.js"),o=s("./app/utils/environment.tsx");const r={state:{environments:null,error:null},init(){this.state={environments:null,error:null}},makeEnvironment:e=>({id:e.id,name:e.name,get displayName(){return(0,o.G)(e)},get urlRoutingName(){return(0,o.z)(e)}}),onFetchEnvironments(){this.state={environments:null,error:null},this.trigger(this.state)},onFetchEnvironmentsSuccess(e){this.state={error:null,environments:e.map(this.makeEnvironment)},this.trigger(this.state)},onFetchEnvironmentsError(e){this.state={error:e,environments:null},this.trigger(this.state)},getState(){return this.state}},n=(0,i.createStore)(r)},"./app/utils/displayReprocessEventAction.tsx":(e,t,s)=>{s.d(t,{B:()=>n}),s("../node_modules/core-js/modules/es.array.includes.js");var i=s("./app/types/index.tsx");const o=["cocoa","native"];function r(e){const t=e?.frames??[],s=e?.stacktrace?.frames??[];return t.length||s.length?[...t,...s].map((e=>e.platform)).filter((e=>!!e)):[]}function n(e,t){if(!t||!e.includes("reprocessing-v2"))return!1;const{entries:s}=t,n=s.find((e=>e.type===i.UZ.EXCEPTION));return!!n&&!!(function(e){const{data:t}=e;return(t.values??[]).some((e=>"minidump"===e.mechanism?.type))}(n)||function(e){const{data:t}=e;return(t.values??[]).some((e=>"applecrashreport"===e.mechanism?.type))}(n)||function(e,t){const{platform:s}=e;if(s&&o.includes(s))return!0;const n=function(e,t){const s=(t.data.values??[]).flatMap(r),o=e.entries.find((e=>e.type===i.UZ.STACKTRACE))?.data??{},n=Object.keys(o).flatMap((e=>r(o[e]))),a=(e.entries.find((e=>e.type===i.UZ.THREADS))?.data.values??[]).flatMap((e=>{let{stacktrace:t}=e;return r(t)}));return new Set([...s,...n,...a])}(e,t);return o.some((e=>n.has(e)))}(t,n))}},"./app/utils/environment.tsx":(e,t,s)=>{function i(e){return e.name?encodeURIComponent(e.name):e.displayName?encodeURIComponent(e.displayName):"none"}function o(e){return e.name||e.displayName||"(No Environment)"}s.d(t,{G:()=>o,z:()=>i})},"./app/views/organizationGroupDetails/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>kt});var i=s("../node_modules/react/index.js"),o=s("./app/actionCreators/indicator.tsx"),r=s("./app/locale.tsx"),n=s("./app/stores/projectsStore.tsx"),a=s("./app/utils/handleXhrErrorResponse.tsx"),l=s("./app/utils/analytics.tsx"),d=s("./app/utils/useApi.tsx"),p=s("./app/utils/useOrganization.tsx"),c=s("./app/utils/useProjects.tsx"),u=s("./app/utils/withPageFilters.tsx"),h=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react-router/es/index.js")),v=s("../node_modules/@sentry/core/esm/exports.js"),Z=s("../node_modules/@sentry/react/esm/profiler.js"),b=s("../node_modules/prop-types/index.js"),y=s("./app/stores/organizationEnvironmentsStore.tsx"),f=s("./app/components/loadingError.tsx"),x=s("./app/components/loadingIndicator.tsx"),S=s("./app/components/organizations/pageFilters/container.tsx"),E=s("./app/components/projects/missingProjectMembership.tsx"),w=s("./app/components/sentryDocumentTitle.tsx"),k=s("./app/components/tabs/index.tsx"),I=s("./app/sentryTypes.tsx"),_=s("./app/stores/groupStore.tsx"),j=s("./app/styles/space.tsx"),T=s("./app/types/index.tsx"),R=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),A=s("./app/utils/dates.tsx"),C=s("./app/utils/events.tsx"),D=s("../node_modules/moment/moment.js"),N=s.n(D);function z(e){const t=N()(e).utc().startOf("day");return N()().utc().startOf("day").diff(t,"days")}var O=s("./app/utils/projects.tsx"),P=s("./app/utils/recreateRoute.tsx"),B=s("./app/utils/routeAnalytics/withRouteAnalytics.tsx"),$=s("./app/utils/withApi.tsx");const U="GROUP_NOT_FOUND",G="MISSING_MEMBERSHIP";var q=s("../node_modules/lodash/omit.js"),M=s.n(q),F=s("./app/components/assistant/guideAnchor.tsx"),X=s("./app/components/badge.tsx"),L=s("./app/components/breadcrumbs.tsx"),V=s("./app/components/count.tsx"),Y=s("./app/components/environmentPageFilter.tsx"),H=s("./app/components/eventOrGroupTitle.tsx"),K=s("./app/components/events/errorLevel.tsx"),J=s("./app/components/events/eventMessage.tsx"),Q=s("./app/components/group/inboxBadges/inboxReason.tsx"),W=s("./app/components/group/inboxBadges/unhandledTag.tsx"),ee=s("./app/components/idBadge/projectBadge.tsx"),te=s("./app/components/layouts/thirds.tsx"),se=s("./app/components/links/link.tsx"),ie=s("./app/components/replays/replayCountBadge.tsx"),oe=s("./app/components/replays/replaysFeatureBadge.tsx"),re=s("./app/components/replays/useReplaysCount.tsx"),ne=s("./app/components/seenByList.tsx"),ae=s("./app/components/shortId.tsx"),le=s("./app/components/tooltip.tsx"),de=s("./app/icons/index.tsx"),pe=s("./app/utils/replays/projectSupportsReplay.tsx"),ce=s("./app/utils/useLocation.tsx"),ue=s("./app/actionCreators/group.tsx"),he=s("./app/actionCreators/modal.tsx"),ge=s("./app/components/acl/feature.tsx"),me=s("./app/components/acl/featureDisabled.tsx"),ve=s("./app/components/actions/button.tsx"),Ze=s("./app/components/actions/ignore.tsx"),be=s("./app/components/actions/resolve.tsx"),ye=s("./app/components/button.tsx"),fe=s("./app/components/dropdownMenuControl.tsx"),xe=s("./app/utils/discover/eventView.tsx"),Se=s("./app/utils/displayReprocessEventAction.tsx"),Ee=s("./app/utils/groupCapabilities.tsx"),we=s("./app/utils/guid.tsx"),ke=s("./app/utils/withOrganization.tsx"),Ie=s("./app/views/issueList/actions/reviewAction.tsx"),_e=s("./app/components/autoSelectText.tsx"),je=s("./app/components/switchButton.tsx"),Te=s("./app/stores/useLegacyStore.tsx"),Re=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Ae(e){let{Header:t,Body:s,Footer:n,organization:a,projectSlug:l,groupId:p,onToggle:c}=e;const u=(0,d.Z)({persistInFlight:!0}),[h,g]=(0,i.useState)(!1),m=(0,i.useRef)(null),v=(0,Te.X)(_.Z).find((e=>e.id===p)),Z=v?.isPublic,b=(0,i.useCallback)(((e,t)=>{e?.preventDefault(),g(!0),c(),(0,ue.Gv)(u,{orgId:a.slug,projectId:l,itemIds:[p],data:{isPublic:t??!Z}},{error:()=>{(0,o.Iw)((0,r.t)("Error sharing"))},complete:()=>{g(!1)}})}),[u,g,c,Z,a.slug,l,p]);(0,i.useEffect)((()=>{Z||b(null,!0)}),[]);const y=v?.shareId?function(){const e=`/share/issue/${v.shareId}/`,{host:t,protocol:s}=window.location;return`${s}//${t}${e}`}():null;return(0,Re.BX)(i.Fragment,{children:[(0,Re.tZ)(t,{closeButton:!0,children:(0,Re.tZ)("h4",{children:(0,r.t)("Share Issue")})}),(0,Re.tZ)(s,{children:(0,Re.BX)(De,{children:[(0,Re.BX)(Ne,{children:[(0,Re.BX)("div",{children:[(0,Re.tZ)(ze,{children:(0,r.t)("Create a public link")}),(0,Re.tZ)(Oe,{children:(0,r.t)("Share a link with anyone outside your organization")})]}),(0,Re.tZ)(je.Z,{"aria-label":Z?(0,r.t)("Unshare"):(0,r.t)("Share"),isActive:Z,size:"lg",toggle:b})]}),(!v||h)&&(0,Re.tZ)(Pe,{children:(0,Re.tZ)(x.Z,{mini:!0})}),v&&!h&&Z&&y&&(0,Re.BX)(Be,{children:[(0,Re.tZ)(Ue,{children:(0,Re.tZ)($e,{ref:m,children:y})}),(0,Re.tZ)(Ge,{title:(0,r.t)("Copy to clipboard"),borderless:!0,size:"sm",onClick:()=>{navigator.clipboard.writeText(y),m.current?.selectText()},icon:(0,Re.tZ)(de.vU,{}),"aria-label":(0,r.t)("Copy to clipboard")}),(0,Re.tZ)(qe,{title:(0,r.t)("Generate new URL. Invalidates previous URL"),"aria-label":(0,r.t)("Generate new URL"),borderless:!0,size:"sm",icon:(0,Re.tZ)(de.tr,{}),onClick:()=>b(null,!0)})]})]})}),(0,Re.tZ)(n,{children:!h&&Z&&y?(0,Re.tZ)(ye.ZP,{type:"button",priority:"primary",onClick:()=>{navigator.clipboard.writeText(y),(0,he.closeModal)()},children:(0,r.t)("Copy Link")}):(0,Re.tZ)(ye.ZP,{type:"button",priority:"primary",onClick:()=>{(0,he.closeModal)()},children:(0,r.t)("Close")})})]})}Ae.displayName="ShareIssueModal";const Ce=Ae,De=(0,g.Z)("div",{target:"e1nhf9vk9"})("display:flex;gap:",(0,j.Z)(2),";flex-direction:column;min-height:100px;"),Ne=(0,g.Z)("div",{target:"e1nhf9vk8"})("display:flex;justify-content:space-between;align-items:center;gap:",(0,j.Z)(2),";"),ze=(0,g.Z)("div",{target:"e1nhf9vk7"})("padding-right:",(0,j.Z)(4),";white-space:nowrap;"),Oe=(0,g.Z)("p",{target:"e1nhf9vk6"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeSmall),";"),Pe=(0,g.Z)("div",{target:"e1nhf9vk5"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),Be=(0,g.Z)("div",{target:"e1nhf9vk4"})("display:flex;align-items:stretch;border:1px solid ",(e=>e.theme.border),";border-radius:",(0,j.Z)(.5),";"),$e=(0,g.Z)(_e.Z,{target:"e1nhf9vk3"})("padding:",(0,j.Z)(1)," ",(0,j.Z)(1),";",(e=>e.theme.overflowEllipsis),";"),Ue=(0,g.Z)("div",{target:"e1nhf9vk2"})("position:relative;display:flex;flex-grow:1;background-color:transparent;border-right:1px solid ",(e=>e.theme.border),";min-width:0;"),Ge=(0,g.Z)(ye.ZP,{target:"e1nhf9vk1"})("border-radius:0;border-right:1px solid ",(e=>e.theme.border),";height:100%;flex-shrink:0;&:hover{border-right:1px solid ",(e=>e.theme.border),";}"),qe=(0,g.Z)(ye.ZP,{target:"e1nhf9vk0"})({name:"vdwx3d",styles:"height:100%;flex-shrink:0"});function Me(e){let{onToggle:t,disabled:s,group:i,organization:o,disabledReason:n}=e;return(0,Re.tZ)(le.Z,{title:n,disabled:!s,children:(0,Re.tZ)(ye.ZP,{type:"button",size:"xs",onClick:()=>{(0,he.openModal)((e=>(0,Re.tZ)(Ce,{...e,organization:o,projectSlug:i.project.slug,groupId:i.id,onToggle:t})))},disabled:s,icon:(0,Re.tZ)(Xe,{"aria-label":i.isPublic?(0,r.t)("Shared"):(0,r.t)("Not Shared"),isShared:i.isPublic}),children:(0,r.t)("Share")})})}Me.displayName="ShareIssue";const Fe=Me,Xe=(0,g.Z)("div",{target:"e1td2f060"})("border-radius:50%;width:10px;height:10px;background:",(e=>e.isShared?e.theme.active:e.theme.border),";");var Le=s("./app/views/organizationGroupDetails/utils.tsx");function Ve(e){let{className:t,disabled:s,group:i,icon:o,onClick:n,disablePriority:a,size:l="xs"}=e;const d=i.subscriptionDetails?.disabled??!1;return(0,Re.tZ)(ve.Z,{className:t,disabled:s||d,title:(0,Le.sC)(i,!0),tooltipProps:{delay:300},priority:!a&&i.isSubscribed?"primary":"default",size:l,"aria-label":(0,r.t)("Subscribe"),onClick:n,icon:o??(0,Re.tZ)(de.lJ,{size:l})})}Ve.displayName="SubscribeAction";const Ye=Ve;class He extends i.Component{constructor(){super(...arguments),(0,h.Z)(this,"onDelete",(()=>{const{group:e,project:t,organization:s,api:i}=this.props;(0,o.E3)((0,r.t)("Delete event…")),(0,ue.MU)(i,{orgId:s.slug,projectId:t.slug,itemIds:[e.id]},{complete:()=>{(0,o.B8)(),m.browserHistory.push(`/${s.slug}/${t.slug}/`)}}),this.trackIssueAction("deleted")})),(0,h.Z)(this,"onUpdate",(e=>{const{group:t,project:s,organization:i,api:n}=this.props;(0,o.E3)((0,r.t)("Saving changes…")),(0,ue.Gv)(n,{orgId:i.slug,projectId:s.slug,itemIds:[t.id],data:e},{complete:o.B8}),e.status&&this.trackIssueAction(e.status),void 0!==e.inbox&&this.trackIssueAction("mark_reviewed")})),(0,h.Z)(this,"onReprocessEvent",(()=>{const{group:e,organization:t}=this.props;(0,he.openReprocessEventModal)({organization:t,groupId:e.id})})),(0,h.Z)(this,"onToggleShare",(()=>{!this.props.group.isPublic&&(0,R.Z)("issue.shared_publicly",{organization:this.props.organization}),this.trackIssueAction("shared")})),(0,h.Z)(this,"onToggleBookmark",(()=>{this.onUpdate({isBookmarked:!this.props.group.isBookmarked}),this.trackIssueAction("bookmarked")})),(0,h.Z)(this,"onToggleSubscribe",(()=>{this.onUpdate({isSubscribed:!this.props.group.isSubscribed}),this.trackIssueAction("subscribed")})),(0,h.Z)(this,"onDiscard",(()=>{const{group:e,project:t,organization:s,api:i}=this.props,n=(0,we.E)();(0,o.E3)((0,r.t)("Discarding event…")),_.Z.onDiscard(n,e.id),i.request(`/issues/${e.id}/`,{method:"PUT",data:{discard:!0},success:i=>{_.Z.onDiscardSuccess(n,e.id,i),m.browserHistory.push(`/${s.slug}/${t.slug}/`)},error:t=>{_.Z.onDiscardError(n,e.id,t)},complete:o.B8}),this.trackIssueAction("discarded")})),(0,h.Z)(this,"renderDiscardModal",(e=>{let{Body:t,Footer:s,closeModal:o}=e;const{organization:n,project:a}=this.props;return(0,Re.tZ)(ge.Z,{features:["projects:discard-groups"],hookName:"feature-disabled:discard-groups",organization:n,project:a,renderDisabled:function(e){let{children:t,...s}=e;return t({...s,renderDisabled:e=>{let{features:t}=e;return(0,Re.tZ)(me.Z,{alert:!0,featureName:(0,r.t)("Discard and Delete"),features:t})}})},children:e=>{let{hasFeature:n,renderDisabled:a,...l}=e;return(0,Re.BX)(i.Fragment,{children:[(0,Re.BX)(t,{children:[!n&&"function"==typeof a&&a({...l,hasFeature:n,children:null}),(0,r.t)("Discarding this event will result in the deletion of most data associated with this issue and future events being discarded before reaching your stream. Are you sure you wish to continue?")]}),(0,Re.BX)(s,{children:[(0,Re.tZ)(ye.ZP,{onClick:o,children:(0,r.t)("Cancel")}),(0,Re.tZ)(ye.ZP,{style:{marginLeft:(0,j.Z)(1)},priority:"primary",onClick:this.onDiscard,disabled:!n,children:(0,r.t)("Discard Future Events")})]})]})}})})),(0,h.Z)(this,"openDeleteModal",(()=>(0,he.openModal)((e=>{let{Body:t,Footer:s,closeModal:o}=e;return(0,Re.BX)(i.Fragment,{children:[(0,Re.tZ)(t,{children:(0,r.t)("Deleting this issue is permanent. Are you sure you wish to continue?")}),(0,Re.BX)(s,{children:[(0,Re.tZ)(ye.ZP,{onClick:o,children:(0,r.t)("Cancel")}),(0,Re.tZ)(ye.ZP,{style:{marginLeft:(0,j.Z)(1)},priority:"primary",onClick:this.onDelete,children:(0,r.t)("Delete")})]})]})})))),(0,h.Z)(this,"openDiscardModal",(()=>{const{organization:e}=this.props;(0,he.openModal)(this.renderDiscardModal),(0,l.co)("feature.discard_group.modal_opened",{org_id:parseInt(e.id,10)})})),(0,h.Z)(this,"openShareModal",(()=>{const{group:e,organization:t}=this.props;(0,he.openModal)((s=>(0,Re.tZ)(Ce,{...s,organization:t,projectSlug:e.project.slug,groupId:e.id,onToggle:this.onToggleShare})))}))}getShareUrl(e){if(!e)return"";const t=`/share/issue/${e}/`,{host:s,protocol:i}=window.location;return`${i}//${s}${t}`}getDiscoverUrl(){const{group:e,project:t,organization:s}=this.props,{title:i,type:o,shortId:r}=e,n={id:void 0,name:i||o,fields:["title","release","environment","user.display","timestamp"],orderby:"-timestamp",query:`issue:${r}`,projects:[Number(t.id)],version:2,range:"90d"};return xe.ZP.fromSavedQuery(n).getResultsViewUrlTarget(s.slug)}trackIssueAction(e){const{group:t,project:s,organization:i,query:o={}}=this.props,{alert_date:r,alert_rule_id:n,alert_type:a}=o;(0,R.Z)("issue_details.action_clicked",{organization:i,project_id:parseInt(s.id,10),group_id:parseInt(t.id,10),issue_category:t.issueCategory,action_type:e,alert_date:"string"==typeof r?(0,A.v5)(Number(r)):void 0,alert_rule_id:"string"==typeof n?n:void 0,alert_type:"string"==typeof a?a:void 0})}handleClick(e,t){return function(s){if(e)return s.preventDefault(),void s.stopPropagation();t(s)}}render(){const{group:e,project:t,organization:s,disabled:o,event:n}=this.props,{status:a,isBookmarked:l}=e,d=new Set(s.features),p=l?"unbookmark":"bookmark",c=l?(0,r.t)("Remove bookmark"):(0,r.t)("Bookmark"),u=!!t.features?.includes("releases"),h="resolved"===a,g="resolved"===e.status?e.statusDetails.autoResolved:void 0,m="ignored"===a,v=(0,Ee.t)(e.issueCategory,"delete"),Z=(0,Ee.t)(e.issueCategory,"deleteAndDiscard"),b=(0,Ee.t)(e.issueCategory,"share"),y=s.access.includes("event:admin"),f=[{key:p,label:c,onAction:this.onToggleBookmark},{key:"reprocess",label:(0,r.t)("Reprocess events"),hidden:!(0,Se.B)(s.features,n),onAction:this.onReprocessEvent},{key:"delete-issue",priority:"danger",label:(0,r.t)("Delete"),hidden:!y,disabled:!v.enabled,details:v.disabledReason,onAction:this.openDeleteModal},{key:"delete-and-discard",priority:"danger",label:(0,r.t)("Delete and discard future events"),hidden:!y,disabled:!Z.enabled,details:Z.disabledReason,onAction:this.openDiscardModal}];if(d.has("issue-actions-v2")){const{dropdownItems:n,onIgnore:a}=(0,Ze.c)({onUpdate:this.onUpdate});return(0,Re.BX)(Je,{children:[(0,Re.tZ)(fe.Z,{triggerProps:{"aria-label":(0,r.t)("More Actions"),icon:(0,Re.tZ)(de.YR,{size:"xs"}),showChevron:!1,size:"sm"},items:[...m?[]:[{key:"ignore",className:"hidden-sm hidden-md hidden-lg",label:(0,r.t)("Ignore"),isSubmenu:!0,disabled:o,children:[{key:"ignore-now",label:(0,r.t)("Ignore Issue"),onAction:()=>a()},...n]}],{key:"open-in-discover",className:"hidden-sm hidden-md hidden-lg",label:(0,r.t)("Open in Discover"),to:o?"":this.getDiscoverUrl(),onAction:()=>this.trackIssueAction("open_in_discover")},{key:e.isSubscribed?"unsubscribe":"subscribe",className:"hidden-sm hidden-md hidden-lg",label:e.isSubscribed?(0,r.t)("Unsubscribe"):(0,r.t)("Subscribe"),disabled:o||e.subscriptionDetails?.disabled,onAction:this.onToggleSubscribe},{key:"mark-review",label:(0,r.t)("Mark reviewed"),disabled:!e.inbox||o,details:!e.inbox||o?(0,r.t)("Issue has been reviewed"):void 0,onAction:()=>this.onUpdate({inbox:!1})},{key:"share",label:(0,r.t)("Share"),disabled:o||!b.enabled,hidden:!d.has("shared-issues"),onAction:this.openShareModal},...f]}),(0,Re.tZ)(Ye,{className:"hidden-xs",disabled:o,disablePriority:!0,group:e,onClick:this.handleClick(o,this.onToggleSubscribe),icon:e.isSubscribed?(0,Re.tZ)(de.lJ,{}):(0,Re.tZ)(de.mA,{}),size:"sm"}),(0,Re.tZ)("div",{className:"hidden-xs",children:(0,Re.tZ)(Y.Z,{alignDropdown:"right",size:"sm"})}),(0,Re.tZ)(ge.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:s,children:(0,Re.tZ)(ve.Z,{className:"hidden-xs",disabled:o,to:o?"":this.getDiscoverUrl(),onClick:()=>this.trackIssueAction("open_in_discover"),size:"sm",children:(0,Re.tZ)(F.Z,{target:"open_in_discover",children:(0,r.t)("Open in Discover")})})}),h||m?(0,Re.tZ)(ve.Z,{type:"button",priority:"primary",title:g?(0,r.t)("This event is resolved due to the Auto Resolve configuration for this project"):(0,r.t)("Change status to unresolved"),size:"sm",icon:h?(0,Re.tZ)(de.DL,{}):(0,Re.tZ)(de.i1,{}),disabled:o||g,onClick:()=>this.onUpdate({status:T.d7.UNRESOLVED,statusDetails:{}}),children:m?(0,r.t)("Ignored"):(0,r.t)("Resolved")}):(0,Re.BX)(i.Fragment,{children:[(0,Re.tZ)(F.Z,{target:"ignore_delete_discard",position:"bottom",offset:20,children:(0,Re.tZ)(Ze.Z,{className:"hidden-xs",isIgnored:m,onUpdate:this.onUpdate,disabled:o,size:"sm",hideIcon:!0,disableTooltip:!0})}),(0,Re.tZ)(F.Z,{target:"resolve",position:"bottom",offset:20,children:(0,Re.tZ)(be.Z,{disableTooltip:!0,disabled:o,disableDropdown:o,hasRelease:u,latestRelease:t.latestRelease,onUpdate:this.onUpdate,orgSlug:s.slug,projectSlug:t.slug,isResolved:h,isAutoResolved:g,size:"sm",hideIcon:!0,priority:"primary"})})]})]})}return(0,Re.BX)(Ke,{children:[(0,Re.tZ)(F.Z,{target:"resolve",position:"bottom",offset:20,children:(0,Re.tZ)(be.Z,{disabled:o,disableDropdown:o,hasRelease:u,latestRelease:t.latestRelease,onUpdate:this.onUpdate,orgSlug:s.slug,projectSlug:t.slug,isResolved:h,isAutoResolved:"resolved"===e.status?e.statusDetails.autoResolved:void 0})}),(0,Re.tZ)(F.Z,{target:"ignore_delete_discard",position:"bottom",offset:20,children:(0,Re.tZ)(Ze.Z,{isIgnored:m,onUpdate:this.onUpdate,disabled:o})}),(0,Re.tZ)(Ie.Z,{onUpdate:this.onUpdate,disabled:!e.inbox||o,tooltip:(0,r.t)("Issue has been reviewed"),tooltipProps:{disabled:!!e.inbox||o,delay:300}}),(0,Re.tZ)(ge.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:s,children:(0,Re.tZ)(ve.Z,{disabled:o,to:o?"":this.getDiscoverUrl(),onClick:()=>this.trackIssueAction("open_in_discover"),children:(0,Re.tZ)(F.Z,{target:"open_in_discover",children:(0,r.t)("Open in Discover")})})}),d.has("shared-issues")&&(0,Re.tZ)(Fe,{organization:s,group:e,disabled:o||!b.enabled,disabledReason:b.disabledReason,onToggle:this.onToggleShare}),(0,Re.tZ)(Ye,{disabled:o,group:e,onClick:this.handleClick(o,this.onToggleSubscribe)}),(0,Re.tZ)(fe.Z,{triggerProps:{"aria-label":(0,r.t)("More Actions"),icon:(0,Re.tZ)(de.YR,{size:"xs"}),showChevron:!1,size:"xs"},items:f})]})}}He.displayName="Actions";const Ke=(0,g.Z)("div",{target:"e1sp93pk1"})("display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:center;grid-auto-flow:column;gap:",(0,j.Z)(.5),";white-space:nowrap;"),Je=(0,g.Z)("div",{target:"e1sp93pk0"})("display:flex;align-items:center;gap:",(0,j.Z)(.5),";"),Qe=(0,$.Z)((0,ke.Z)(He));var We=s("./app/views/organizationGroupDetails/types.tsx"),et=s("./app/views/organizationGroupDetails/unhandledTag.tsx");function tt(e){let{baseUrl:t,group:s,groupReprocessingStatus:o,organization:n,event:a,project:l}=e;const d=(0,ce.T)(),p=(0,re.Z)({groupIds:s.id,organization:n,project:l})[s.id],c=(0,i.useMemo)((()=>n.features.includes("reprocessing-v2")?o===Le.m7.REPROCESSING?[We.O.ACTIVITY,We.O.USER_FEEDBACK,We.O.ATTACHMENTS,We.O.EVENTS,We.O.MERGED,We.O.GROUPING,We.O.SIMILAR_ISSUES,We.O.TAGS]:o===Le.m7.REPROCESSED_AND_HASNT_EVENT?[We.O.DETAILS,We.O.ATTACHMENTS,We.O.EVENTS,We.O.MERGED,We.O.GROUPING,We.O.SIMILAR_ISSUES,We.O.TAGS,We.O.USER_FEEDBACK]:[]:[]),[n,o]),u=(0,i.useMemo)((()=>{const e=M()(d.query,"query");return{pathname:`${t}events/`,query:e}}),[d,t]),h=(0,i.useMemo)((()=>{const e=new Set(l?l.features:[]),i=new Set(n?n.features:[]),o=i.has("grouping-tree-ui"),a=e.has("similarity-view"),h=i.has("event-attachments"),g=i.has("session-replay-ui")&&(0,pe.Z)(l);return(0,Re.BX)(gt,{hideBorder:!0,children:[(0,Re.tZ)(k.ck,{disabled:c.includes(We.O.DETAILS),to:`${t}${d.search}`,children:(0,r.t)("Details")},We.O.DETAILS),(0,Re.BX)(k.ck,{textValue:(0,r.t)("Activity"),disabled:c.includes(We.O.ACTIVITY),to:`${t}activity/${d.search}`,children:[(0,r.t)("Activity"),(0,Re.BX)(ht,{children:[s.numComments,(0,Re.tZ)(de.f7,{size:"xs"})]})]},We.O.ACTIVITY),(0,Re.BX)(k.ck,{textValue:(0,r.t)("User Feedback"),disabled:c.includes(We.O.USER_FEEDBACK),to:`${t}feedback/${d.search}`,children:[(0,r.t)("User Feedback")," ",(0,Re.tZ)(X.Z,{text:s.userReportCount})]},We.O.USER_FEEDBACK),(0,Re.tZ)(k.ck,{hidden:!h,disabled:c.includes(We.O.ATTACHMENTS),to:`${t}attachments/${d.search}`,children:(0,r.t)("Attachments")},We.O.ATTACHMENTS),(0,Re.tZ)(k.ck,{disabled:c.includes(We.O.TAGS),to:`${t}tags/${d.search}`,children:(0,r.t)("Tags")},We.O.TAGS),(0,Re.tZ)(k.ck,{disabled:c.includes(We.O.EVENTS),to:u,children:(0,r.t)("All Events")},We.O.EVENTS),(0,Re.tZ)(k.ck,{disabled:c.includes(We.O.MERGED),to:`${t}merged/${d.search}`,children:(0,r.t)("Merged Issues")},We.O.MERGED),(0,Re.tZ)(k.ck,{hidden:!o,disabled:c.includes(We.O.GROUPING),to:`${t}grouping/${d.search}`,children:(0,r.t)("Grouping")},We.O.GROUPING),(0,Re.tZ)(k.ck,{hidden:!a,disabled:c.includes(We.O.SIMILAR_ISSUES),to:`${t}similar/${d.search}`,children:(0,r.t)("Similar Issues")},We.O.SIMILAR_ISSUES),(0,Re.BX)(k.ck,{textValue:(0,r.t)("Replays"),hidden:!g,to:`${t}replays/${d.search}`,children:[(0,r.t)("Replays"),(0,Re.tZ)(ie.Z,{count:p}),(0,Re.tZ)(oe.Z,{noTooltip:!0})]},We.O.REPLAYS)]})}),[t,d,c,s.numComments,s.userReportCount,n,l,p,u]),g=(0,i.useMemo)((()=>(0,Re.BX)(gt,{hideBorder:!0,children:[(0,Re.tZ)(k.ck,{disabled:c.includes(We.O.DETAILS),to:`${t}${d.search}`,children:(0,r.t)("Details")},We.O.DETAILS),(0,Re.BX)(k.ck,{textValue:(0,r.t)("Activity"),disabled:c.includes(We.O.ACTIVITY),to:`${t}activity/${d.search}`,children:[(0,r.t)("Activity"),(0,Re.BX)(ht,{children:[s.numComments,(0,Re.tZ)(de.f7,{size:"xs"})]})]},We.O.ACTIVITY),(0,Re.tZ)(k.ck,{disabled:c.includes(We.O.TAGS),to:`${t}tags/${d.search}`,children:(0,r.t)("Tags")},We.O.TAGS),(0,Re.tZ)(k.ck,{disabled:c.includes(We.O.EVENTS),to:u,children:(0,r.t)("Events")},We.O.EVENTS)]})),[c,s.numComments,t,d,u]),{userCount:m}=s;let v="group-detail";s.hasSeen&&(v+=" hasSeen"),"resolved"===s.status&&(v+=" isResolved");const Z=(0,C.FC)(s),b=!!c.length,y=s.shortId&&(0,Re.tZ)(F.Z,{target:"issue_number",position:"bottom",children:(0,Re.BX)(ot,{children:[(0,Re.tZ)(ee.Z,{project:l,avatarSize:16,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:l.slug}}),(0,Re.tZ)(le.Z,{className:"help-link",title:(0,r.t)("This identifier is unique across your organization, and can be used to reference an issue in various places, like commit messages."),position:"bottom",children:(0,Re.tZ)(rt,{shortId:s.shortId})})]})}),f=n.features.includes("issue-actions-v2");return(0,Re.tZ)(te.h4,{children:(0,Re.BX)("div",{className:v,children:[(0,Re.BX)(it,{children:[(0,Re.tZ)(L.Z,{crumbs:[{label:"Issues",to:`/organizations/${n.slug}/issues/${d.search}`},{label:y}]}),f&&(0,Re.tZ)(Qe,{group:s,project:l,disabled:b,event:a,query:d.query})]}),(0,Re.BX)(nt,{children:[(0,Re.BX)(at,{children:[(0,Re.BX)(lt,{children:[(0,Re.tZ)("h3",{children:(0,Re.tZ)(pt,{hasGuideAnchor:!0,data:s})}),s.inbox&&(0,Re.tZ)(Q.Z,{inbox:s.inbox,fontSize:"md"})]}),(0,Re.BX)(ut,{children:[s.level&&(0,Re.tZ)(K.Z,{level:s.level,size:"11px"}),s.isUnhandled&&(0,Re.tZ)(W.Z,{}),(0,Re.tZ)(J.Z,{message:Z})]})]}),(0,Re.BX)(ct,{children:[(0,Re.BX)("div",{className:"count",children:[(0,Re.tZ)("h6",{className:"nav-header",children:(0,r.t)("Events")}),(0,Re.tZ)(se.Z,{disabled:b,to:u,children:(0,Re.tZ)(V.Z,{className:"count",value:s.count})})]}),(0,Re.BX)("div",{className:"count",children:[(0,Re.tZ)("h6",{className:"nav-header",children:(0,r.t)("Users")}),0!==m?(0,Re.tZ)(se.Z,{disabled:b,to:`${t}tags/user/${d.search}`,children:(0,Re.tZ)(V.Z,{className:"count",value:m})}):(0,Re.tZ)("span",{children:"0"})]})]})]}),f?(0,Re.tZ)(nt,{className:"hidden-sm hidden-md hidden-lg",children:(0,Re.tZ)(Y.Z,{alignDropdown:"right"})}):(0,Re.BX)(nt,{children:[(0,Re.tZ)(Qe,{group:s,project:l,disabled:b,event:a,query:d.query}),(0,Re.tZ)(dt,{seenBy:s.seenBy,iconTooltip:(0,r.t)("People who have viewed this issue")})]}),s.issueCategory===T.qE.PERFORMANCE?g:h]})})}tt.displayName="GroupHeader";const st=tt,it=(0,g.Z)("div",{target:"e1ptdvq011"})("display:flex;flex-direction:row;justify-content:space-between;gap:",(0,j.Z)(1),";align-items:center;"),ot=(0,g.Z)("div",{target:"e1ptdvq010"})("display:flex;gap:",(0,j.Z)(1),";align-items:center;"),rt=(0,g.Z)(ae.Z,{target:"e1ptdvq09"})("font-family:",(e=>e.theme.text.family),";font-size:",(e=>e.theme.fontSizeMedium),";"),nt=(0,g.Z)("div",{target:"e1ptdvq08"})("display:flex;gap:",(0,j.Z)(2),";justify-content:space-between;margin-top:",(0,j.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){flex-direction:column;}"),at=(0,g.Z)("div",{target:"e1ptdvq07"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){max-width:65%;}"),lt=(0,g.Z)("div",{target:"e1ptdvq06"})("display:flex;line-height:2;gap:",(0,j.Z)(1),";"),dt=(0,g.Z)(ne.Z,{target:"e1ptdvq05"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){display:none;}"),pt=(0,g.Z)(H.Z,{target:"e1ptdvq04"})({name:"870gjp",styles:"font-size:inherit"}),ct=(0,g.Z)("div",{target:"e1ptdvq03"})("display:grid;grid-template-columns:repeat(2, min-content);gap:calc(",(0,j.Z)(3)," + ",(0,j.Z)(3),");@media (min-width: ",(e=>e.theme.breakpoints.small),"){justify-content:flex-end;}"),ut=(0,g.Z)(et.S,{target:"e1ptdvq02"})("display:flex;gap:",(0,j.Z)(1),";justify-content:flex-start;line-height:1.2;"),ht=(0,g.Z)(X.Z,{target:"e1ptdvq01"})("display:flex;align-items:center;gap:",(0,j.Z)(.5),";"),gt=(0,g.Z)(k.td,{target:"e1ptdvq00"})("margin-top:",(0,j.Z)(2),";");var mt=s("./app/components/pageAlertBar.tsx");function vt(e){let{organization:t,project:s}=e;return(0,Re.BX)(mt.Z,{children:[(0,Re.tZ)(de.Db,{}),(0,Re.tZ)(bt,{children:(0,r.t)("You are viewing a sample error. Configure Sentry to start viewing real errors.")}),(0,Re.tZ)(ye.ZP,{size:"xs",priority:"primary",to:`/${t.slug}/${s.slug}/getting-started/${s.platform||""}`,onClick:()=>(0,R.Z)("growth.sample_error_onboarding_link_clicked",{project_id:s.id?.toString(),organization:t,platform:s.platform}),children:(0,r.t)("Get Started")})]})}vt.displayName="SampleEventAlert";const Zt=vt,bt=(0,g.Z)("span",{target:"e1k8ur580"})("margin:0 ",(0,j.Z)(1),";");function yt(e){return e.activity&&e.activity.filter((e=>e.type===T.fc.ASSIGNED)).find((e=>!!e.data.integration))?.data.integration||""}class ft extends i.Component{constructor(){super(...arguments),(0,h.Z)(this,"state",this.initialState),(0,h.Z)(this,"refetchInterval",null),(0,h.Z)(this,"remountComponent",(()=>{this.setState(this.initialState),this.fetchData()})),(0,h.Z)(this,"refetchGroup",(async()=>{const{loadingGroup:e,loading:t,loadingEvent:s,group:i}=this.state;if(i?.status!==Le.m7.REPROCESSING||e||t||s)return;const{api:o}=this.props;this.setState({loadingGroup:!0});try{const e=await o.requestPromise(this.groupDetailsEndpoint,{query:this.getGroupQuery()}),t=this.getReprocessingNewRoute(e);if(t)return void m.browserHistory.push(t);this.setState({group:e,loadingGroup:!1})}catch(e){this.handleRequestError(e)}})),(0,h.Z)(this,"listener",_.Z.listen((e=>this.onGroupChange(e)),void 0))}getChildContext(){return{group:this.state.group,location:this.props.location}}componentDidMount(){this.fetchData(this.canLoadEventEarly(this.props)),this.updateReprocessingProgress(),async function(e,t){y.Z.onFetchEnvironments();try{const s=await e.requestPromise(`/organizations/${t}/environments/`);if(!s)return void y.Z.onFetchEnvironmentsError(new Error("retrieved environments is falsey"));y.Z.onFetchEnvironmentsSuccess(s)}catch(e){y.Z.onFetchEnvironmentsError(e)}}(this.props.api,this.props.organization.slug)}componentDidUpdate(e,t){const s=e.isGlobalSelectionReady!==this.props.isGlobalSelectionReady;(s||e.location.pathname!==this.props.location.pathname)&&this.fetchData(s&&this.canLoadEventEarly(this.props)),(!this.canLoadEventEarly(e)&&!t?.group&&this.state.group||e.params?.eventId!==this.props.params?.eventId&&this.state.group)&&this.getEvent(this.state.group).then((()=>this.state.group?.project&&this.trackView(this.state.group?.project)))}componentWillUnmount(){_.Z.reset(),this.listener?.(),this.refetchInterval&&window.clearInterval(this.refetchInterval)}get initialState(){return{group:null,loading:!0,loadingEvent:!0,loadingGroup:!0,error:!1,eventError:!1,errorType:null,project:null}}trackView(e){const{group:t,event:s}=this.state,{params:i,location:o}=this.props,{alert_date:r,alert_rule_id:n,alert_type:a}=o.query;this.props.setEventNames("issue_details.viewed","Issue Details: Viewed"),this.props.setRouteAnalyticsParams({project_id:parseInt(e.id,10),group_id:parseInt(i.groupId,10),issue_category:t?.issueCategory??T.qE.ERROR,issue_status:t?.status,issue_age:t?.firstSeen?z(t.firstSeen):-1,issue_level:t?.level,is_assigned:!!t?.assignedTo,error_count:Number(t?.count||-1),error_has_replay:Boolean(s?.tags?.find((e=>{let{key:t}=e;return"replayId"===t}))),group_has_replay:Boolean(t?.tags?.find((e=>{let{key:t}=e;return"replayId"===t}))),num_comments:t?t.numComments:-1,project_has_replay:t?.project.hasReplays,project_platform:t?.project.platform,has_external_issue:!!t?.annotations&&t?.annotations.length>0,has_owner:!!t?.owners&&t?.owners.length>0,integration_assignment_source:t?yt(t):"",...(0,C.UF)(s),alert_date:"string"==typeof r?(0,A.v5)(Number(r)):void 0,alert_rule_id:"string"==typeof n?n:void 0,alert_type:"string"==typeof a?a:void 0,has_otel:void 0!==s?.contexts?.otel})}canLoadEventEarly(e){return!e.params.eventId||["oldest","latest"].includes(e.params.eventId)}get groupDetailsEndpoint(){return`/issues/${this.props.params.groupId}/`}get groupReleaseEndpoint(){return`/issues/${this.props.params.groupId}/first-last-release/`}async getEvent(e){e&&this.setState({loadingEvent:!0,eventError:!1});const{params:t,environments:s,api:i}=this.props,o=t.orgId,r=t.groupId,n=t.eventId??"latest",a=e?.project?.slug;try{const e=await(0,Le.MN)(i,o,r,n,s,a);this.setState({event:e,loading:!1,eventError:!1,loadingEvent:!1})}catch(e){v.Tb(e),this.setState({eventError:!0,loading:!1,loadingEvent:!1})}}getCurrentTab(){const{router:e,routes:t}=this.props,s=t[t.length-1];return e.params.tagKey?We.O.TAGS:Object.values(We.O).find((e=>s.path===We.h[e]))??We.O.DETAILS}getCurrentRouteInfo(e){const{organization:t,router:s}=this.props,{event:i}=this.state,o=this.getCurrentTab();return{baseUrl:`/organizations/${t.slug}/issues/${e.id}/${s.params.eventId&&i?`events/${i.id}/`:""}`,currentTab:o}}updateReprocessingProgress(){this.hasReprocessingV2Feature()&&(this.refetchInterval&&window.clearInterval(this.refetchInterval),this.refetchInterval=window.setInterval(this.refetchGroup,3e4))}hasReprocessingV2Feature(){const{organization:e}=this.props;return e.features?.includes("reprocessing-v2")}getReprocessingNewRoute(e){const{routes:t,location:s,params:i}=this.props,{groupId:o}=i,{id:r}=e,n=this.hasReprocessingV2Feature(),a=(0,Le.M3)(e),{currentTab:l,baseUrl:d}=this.getCurrentRouteInfo(e);if(o!==r)return n&&a===Le.m7.REPROCESSED_AND_HASNT_EVENT&&l!==We.O.ACTIVITY?{pathname:`${d}${We.O.ACTIVITY}/`,query:{...i,groupId:r}}:(0,P.Z)("",{routes:t,location:s,params:{...i,groupId:r}});if(n){if(a===Le.m7.REPROCESSING&&l!==We.O.DETAILS)return{pathname:d,query:i};if(a===Le.m7.REPROCESSED_AND_HASNT_EVENT&&l!==We.O.ACTIVITY&&l!==We.O.USER_FEEDBACK)return{pathname:`${d}${We.O.ACTIVITY}/`,query:i}}}getGroupQuery(){const{environments:e}=this.props;return{...e?{environment:e}:{},expand:["inbox","owners"],collapse:"release"}}getFetchDataRequestErrorType(e){return e?404===e?U:403===e?G:null:null}handleRequestError(e){v.Tb(e);const t=this.getFetchDataRequestErrorType(e?.status);this.setState({loadingGroup:!1,loading:!1,error:!0,errorType:t})}async fetchGroupReleases(){const{api:e}=this.props,t=await e.requestPromise(this.groupReleaseEndpoint);_.Z.onPopulateReleases(this.props.params.groupId,t)}async fetchData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{api:t,isGlobalSelectionReady:s,params:i}=this.props;if(s)try{const s=this.canLoadEventEarly(this.props)?this.getEvent():void 0,o=await t.requestPromise(this.groupDetailsEndpoint,{query:this.getGroupQuery()}),[r]=await Promise.all([o,s]),n=this.fetchGroupReleases(),a=this.getReprocessingNewRoute(r);if(a)return void m.browserHistory.push(a);const l=r.project;if((0,Le.V7)(t,i.orgId,l.slug,i.groupId),l){const e={...this.props.location};void 0===e.query.project&&void 0===e.query._allp&&(e.query={...e.query,project:l.id}),delete e.query._allp,m.browserHistory.replace(e)}else v.$e((()=>{v.Tb(new Error("Project not found"))}));this.setState({project:l,loadingGroup:!1}),_.Z.loadInitialData([r]),e&&n.then((()=>this.trackView(l)))}catch(e){this.handleRequestError(e)}}onGroupChange(e){const t=this.props.params.groupId;if(e.has(t)){const e=_.Z.get(t);if(e){if(e.stale)return void this.fetchData();this.setState({group:e})}}}getTitle(){const{organization:e}=this.props,{group:t}=this.state,s="Sentry";if(!t)return s;const{title:i}=(0,C.YQ)(t,e?.features),o=(0,C.FC)(t),{project:r}=t,n=`${e.slug} - ${r.slug}`;return i&&o?`${i}: ${o} - ${n}`:`${i||o||s} - ${n}`}tabClickAnalyticsEvent(e){const{organization:t}=this.props,{project:s,group:i,event:o}=this.state;if(!s||!i)return;if((0,R.Z)("issue_details.tab_changed",{organization:t,group_id:parseInt(i.id,10),issue_category:i.issueCategory,project_id:parseInt(s.id,10),tab:e}),i.issueCategory!==T.qE.ERROR)return;const r=o?o.tags.filter((e=>{let{key:t}=e;return["device","os","browser"].includes(t)})).reduce(((e,t)=>{let{key:s,value:i}=t;return e[s]=i,e}),{}):{};(0,R.Z)("issue_group_details.tab.clicked",{organization:t,tab:e,platform:s.platform,...r})}renderError(){const{projects:e,location:t}=this.props,s=t.query.project,i=e.find((e=>e.id===s));switch(this.state.errorType){case U:return(0,Re.tZ)(St,{message:(0,r.t)("The issue you were looking for was not found.")});case G:return(0,Re.tZ)(E.Z,{organization:this.props.organization,project:i});default:return(0,Re.tZ)(St,{onRetry:this.remountComponent})}}renderContent(e,t){const{children:s,environments:o,organization:r,router:n}=this.props,{loadingEvent:a,eventError:l,event:d}=this.state,{currentTab:p,baseUrl:c}=this.getCurrentRouteInfo(t),u=(0,Le.M3)(t);let h={environments:o,group:t,project:e};if(p===We.O.DETAILS)if(t.id===d?.groupID||l)h={...h,event:d,loadingEvent:a,eventError:l,groupReprocessingStatus:u,onRetry:()=>this.remountComponent()};else{const e=`/organizations/${r.slug}/issues/${d?.groupID}/events/${d?.id}/`;n.push(e)}return p===We.O.TAGS&&(h={...h,event:d,baseUrl:c}),(0,Re.BX)(k.mQ,{value:p,onChange:e=>this.tabClickAnalyticsEvent(e),children:[(0,Re.tZ)(st,{organization:r,groupReprocessingStatus:u,event:d,group:t,baseUrl:c,project:e}),(0,Re.tZ)(Et,{children:(0,Re.tZ)(k.ck,{children:(0,i.isValidElement)(s)?(0,i.cloneElement)(s,h):s},p)})]})}renderPageContent(){const{error:e,group:t,project:s,loading:i}=this.state;if(i||!t&&!e)return(0,Re.tZ)(x.Z,{});if(e)return this.renderError();const{organization:o}=this.props;return(0,Re.tZ)(O.Z,{orgId:o.slug,slugs:[s?.slug??""],"data-test-id":"group-projects-container",children:e=>{let{projects:s,initiallyLoaded:i,fetchError:o}=e;return i?o?(0,Re.tZ)(St,{message:(0,r.t)("Error loading the specified project")}):this.renderContent(s[0],t):(0,Re.tZ)(x.Z,{})}})}render(){const{project:e,group:t}=this.state,{organization:s}=this.props,o=t?.tags?.some((e=>"sample_event"===e.key));return(0,Re.BX)(i.Fragment,{children:[o&&e&&(0,Re.tZ)(Zt,{project:e,organization:s}),(0,Re.tZ)(w.Z,{noSuffix:!0,title:this.getTitle(),children:(0,Re.tZ)(S.Z,{skipLoadLastUsed:!0,forceProject:e,shouldForceProject:!0,children:this.renderPageContent()})})]})}}ft.displayName="GroupDetails",(0,h.Z)(ft,"childContextTypes",{group:I.Z.Group,location:b.object});const xt=(0,B.Z)((0,$.Z)(Z.zH(ft))),St=(0,g.Z)(f.Z,{target:"eyu73lm1"})("margin:",(0,j.Z)(2),";"),Et=(0,g.Z)(k.nP,{target:"eyu73lm0"})({name:"1xwzzid",styles:"flex-grow:1;display:flex;flex-direction:column;justify-content:stretch"});function wt(e){let{selection:t,...s}=e;const u=(0,p.Z)(),{projects:h}=(0,c.Z)(),g=(0,d.Z)(),{params:m,location:v}=s,Z=v.query.project,b=h.find((e=>e.id===Z));return(0,i.useEffect)((()=>{b?.slug&&function(e){let{api:t,orgSlug:s,projSlug:i}=e;t.requestPromise(`/projects/${s}/${i}/`).then(n.Z.onUpdateSuccess).catch((e=>{const t=(0,r.t)("Unable to fetch project details");(0,a.Z)(t)(e),(0,o.Iw)(t)}))}({api:g,orgSlug:u.slug,projSlug:b.slug})}),[g,u.slug,b?.slug]),(0,i.useEffect)((()=>{(0,l.co)("issue_page.viewed",{group_id:parseInt(m.groupId,10),org_id:parseInt(u.id,10)})}),[u,m.groupId]),(0,Re.tZ)(xt,{environments:t.environments,organization:u,projects:h,...s},`${m.groupId}-envs:${t.environments.join(",")}`)}wt.displayName="OrganizationGroupDetails";const kt=(0,u.Z)(wt)},"./app/views/organizationGroupDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>m,M3:()=>Z,MN:()=>d,V7:()=>p,dG:()=>u,g5:()=>c,m7:()=>v,sC:()=>g});var i=s("../node_modules/lodash/orderBy.js"),o=s.n(i),r=s("./app/actionCreators/group.tsx"),n=s("./app/api.tsx"),a=s("./app/locale.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");async function d(e,t,s,i,o,r){const n="latest"===i||"oldest"===i?`/issues/${s}/events/${i}/`:`/projects/${t}/${r}/events/${i}/?group_id=${s}`,a={};return 0!==o.length&&(a.environment=o),await e.requestPromise(n,{query:a})}function p(e,t,s,i){(0,r.Gv)(e,{orgId:t,projectId:s,itemIds:[i],failSilently:!0,data:{hasSeen:!0}},{})}function c(e,t){return(new n.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function u(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const h={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a._N)("You have [link:disabled workflow notifications] for this project.",{link:t?(0,l.tZ)("span",{}):(0,l.tZ)("a",{href:"/account/settings/notifications/"})});if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&h.hasOwnProperty(t))return h[t]}return(0,a._N)("You're receiving updates because you are [link:subscribed to workflow notifications] for this project.",{link:t?(0,l.tZ)("span",{}):(0,l.tZ)("a",{href:"/account/settings/notifications/"})})}function m(e){return o()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let v;function Z(e,t){const{status:s,count:i,activity:o}=e,r=Number(i);switch(s){case"reprocessing":return v.REPROCESSING;case"unresolved":return"reprocess"===(t??m(o))?.type?0===r?v.REPROCESSED_AND_HASNT_EVENT:v.REPROCESSED_AND_HAS_EVENT:v.NO_STATUS;default:return v.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(v||(v={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_index_tsx.f00d5f689c35b712f79c2825a30ff104.js.map