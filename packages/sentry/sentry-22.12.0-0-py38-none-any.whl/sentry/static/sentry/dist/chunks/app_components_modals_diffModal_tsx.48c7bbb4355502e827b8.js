"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_diffModal_tsx"],{"./app/components/events/interfaces/crashContent/stackTrace/rawContent.tsx":(e,t,n)=>{n.d(t,{ZP:()=>a});var o=n("./app/components/events/interfaces/frame/utils.tsx"),i=n("./app/utils.tsx");function s(e,t){return e+Array(Math.max(0,t-e.length)+1).join(" ")}function r(e,t,n){switch(e.platform&&(n=e.platform),n){case"javascript":return function(e){let t="";return(0,i.ri)(e.function)?t+="  at "+e.function+"(":t+="  at ? (",(0,i.ri)(e.filename)?t+=e.filename:(0,i.ri)(e.module)&&(t+=e.module),(0,i.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,i.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),t+=")",t}(e);case"ruby":return function(e){let t="  from ";return(0,i.ri)(e.filename)?t+=e.filename:(0,i.ri)(e.module)?t+="("+e.module+")":t+="?",(0,i.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,i.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),(0,i.ri)(e.function)&&(t+=":in `"+e.function+"'"),t}(e);case"php":return function(e,t){const n="null"===e.function?"{main}":e.function;return`#${t} ${e.filename||e.module}(${e.lineNo}): ${n}`}(e,t);case"python":default:return function(e){let t="";return(0,i.ri)(e.filename)?t+='  File "'+e.filename+'"':(0,i.ri)(e.module)?t+='  Module "'+e.module+'"':t+="  ?",(0,i.ri)(e.lineNo)&&e.lineNo>=0&&(t+=", line "+e.lineNo),(0,i.ri)(e.colNo)&&e.colNo>=0&&(t+=", col "+e.colNo),(0,i.ri)(e.function)&&(t+=", in "+e.function),(0,i.ri)(e.context)&&e.context.forEach((n=>{n[0]===e.lineNo&&(t+="\n    "+(0,i.fy)(n[1]))})),t}(e);case"java":return function(e){let t="    at";return(0,i.ri)(e.module)&&(t+=" "+e.module+"."),(0,i.ri)(e.function)&&(t+=e.function),(0,i.ri)(e.filename)&&(t+="("+e.filename,(0,i.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e);case"objc":case"cocoa":case"native":return function(e){let t="  ";return(0,i.ri)(e.package)&&(t+=s((0,o.Q6)(e.package),20)),(0,i.ri)(e.instructionAddr)&&(t+=s(e.instructionAddr,12)),t+=" "+(e.function||e.symbolAddr),(0,i.ri)(e.filename)&&(t+=" ("+e.filename,(0,i.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e)}}function a(e,t,n){const o=[];return(e?.frames??[]).forEach(((e,n)=>{o.push(r(e,n,t))})),"python"!==t&&o.reverse(),n&&o.unshift(function(e,t){return"java"===t?function(e){let t=`${e.type}: ${e.value}`;return e.module&&(t=`${e.module}.${t}`),t}(e):e.type+": "+e.value}(n,t)),o.join("\n")}},"./app/components/events/interfaces/frame/utils.tsx":(e,t,n)=>{n.d(t,{C4:()=>h,H5:()=>f,IR:()=>g,IY:()=>p,Q6:()=>c,XQ:()=>u,Xf:()=>l,c$:()=>d,uI:()=>m});var o=n("./app/icons/index.tsx"),i=n("./app/locale.tsx"),s=n("./app/utils.tsx"),r=n("./app/components/events/interfaces/types.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){const t=e.split(/^([a-z]:\\|\\\\)/i.test(e)?"\\":"/");return(t[t.length-1]||t[t.length-2]||e).replace(/\.(dylib|so|a|dll|exe)$/,"")}function l(e,t){return e||t}function u(e){const{symbolicatorStatus:t}=e,n=e.function||"<unknown>",s=(0,a.tZ)(o.BS,{size:"xs",color:"#2c45a8"}),c=(0,a.tZ)(o.FC,{size:"xs",color:"red300"});if(n.match(/^@objc\s/))return[(0,i.t)("Objective-C -> Swift shim frame"),s];if(n.match(/^__?hidden#\d+/))return[(0,i.t)("Hidden function from bitcode build"),c];if(!t&&"<unknown>"===n)return[(0,i.t)("No function name was supplied by the client SDK."),s];if("<unknown>"===n||"<redacted>"===n&&t===r.i.MISSING_SYMBOL)switch(t){case r.i.MISSING_SYMBOL:return[(0,i.t)("The symbol was not found within the debug file."),s];case r.i.UNKNOWN_IMAGE:return[(0,i.t)("No image is specified for the address of the frame."),s];case r.i.MISSING:return[(0,i.t)("The debug file could not be retrieved from any of the sources."),c];case r.i.MALFORMED:return[(0,i.t)("The retrieved debug file could not be processed."),c]}return"<redacted>"===n?[(0,i.t)("Unknown system frame. Usually from beta SDKs"),s]:[null,null]}function d(e){return"csharp"===e}function p(e){return(0,s.ri)(e.context)&&!!e.context.length}function f(e){return!(0,s.z)(e.vars||{})}function m(e){return!(0,s.z)(e)}function h(e,t){return d(l(e.platform,t??"other"))&&(0,s.ri)(e.package)}function g(e){let{frame:t,registers:n,emptySourceNotation:o,platform:i,isOnlyFrame:s}=e;return!s&&o||p(t)||f(t)||m(n)||h(t,i)}},"./app/components/events/interfaces/types.tsx":(e,t,n)=>{let o;n.d(t,{i:()=>o}),function(e){e.SYMBOLICATED="symbolicated",e.MISSING_SYMBOL="missing_symbol",e.UNKNOWN_IMAGE="unknown_image",e.MISSING="missing",e.MALFORMED="malformed"}(o||(o={}))},"./app/components/modals/diffModal.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>D,modalCss:()=>w});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/react/index.js")),r=n("../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),a=n("./app/actionCreators/indicator.tsx"),c=n("./app/components/button.tsx"),l=n("./app/components/buttonBar.tsx"),u=n("./app/components/loadingIndicator.tsx"),d=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),f=n("./app/utils/getStacktraceBody.tsx"),m=n("./app/utils/withApi.tsx");function h(e){const t=[(0,d.t)("Type: %s",e.type)];e.hash&&t.push((0,d.t)("Hash: %s",e.hash)),e.description&&t.push((0,d.t)("Description: %s",e.description));const n=[t.join("\n")];return"component"in e&&e.component&&n.push(g(e.component).join("\n")),n}function g(e){if(!e.contributes)return[];const{name:t,id:n,hint:o}=e,i=t||n,s=i&&o?`${i} (${o})`:i,r=s?[s]:[];if(e.values)for(const t of e.values)if("string"!=typeof t)for(const e of g(t))r.push(`  ${e}`);else r.push(`  ${t}`);return r}var v=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class x extends s.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!0,groupingDiff:!1,baseEvent:[],targetEvent:[],SplitDiffAsync:void 0}),(0,o.Z)(this,"toggleDiffMode",(()=>{this.setState((e=>({groupingDiff:!e.groupingDiff,loading:!0})),this.fetchData)})),(0,o.Z)(this,"fetchEventData",(async(e,t)=>{const{orgId:n,project:o,api:i}=this.props,{groupingDiff:s}=this.state;let r=t;if("latest"===t&&(r=(await i.requestPromise(`/issues/${e}/events/latest/`)).eventID),s){return function(e){return Object.values(e).map(h).flat()}(await i.requestPromise(`/projects/${n}/${o.slug}/events/${r}/grouping-info/`))}const a=await i.requestPromise(`/projects/${n}/${o.slug}/events/${r}/`);return(0,f.Z)(a)}))}componentDidMount(){this.fetchData()}fetchData(){const{baseIssueId:e,targetIssueId:t,baseEventId:o,targetEventId:i}=this.props;Promise.all([Promise.all([n.e("vendors-node_modules_diff_lib_index_mjs"),n.e("app_components_splitDiff_tsx")]).then(n.bind(n,"./app/components/splitDiff.tsx")),this.fetchEventData(e,o??"latest"),this.fetchEventData(t,i??"latest")]).then((e=>{let[{default:t},n,o]=e;this.setState({SplitDiffAsync:t,baseEvent:n,targetEvent:o,loading:!1})})).catch((()=>{(0,a.Iw)((0,d.t)("Error loading events"))}))}render(){const{className:e,project:t}=this.props,{SplitDiffAsync:n,loading:o,groupingDiff:i,baseEvent:s,targetEvent:r}=this.state,a=t.features.includes("similarity-view-v2");return(0,v.BX)(y,{className:e,loading:o,children:[o&&(0,v.tZ)(u.Z,{}),!o&&a&&(0,v.tZ)(N,{children:(0,v.BX)(l.ZP,{merged:!0,active:i?"grouping":"event",children:[(0,v.tZ)(c.ZP,{barId:"event",size:"sm",onClick:this.toggleDiffMode,children:(0,d.t)("Diff stack trace and message")}),(0,v.tZ)(c.ZP,{barId:"grouping",size:"sm",onClick:this.toggleDiffMode,children:(0,d.t)("Diff grouping information")})]})}),!o&&n&&s.map(((e,t)=>(0,v.tZ)(n,{base:e,target:r[t]??"",type:"words"},t)))]})}}x.displayName="IssueDiff",(0,o.Z)(x,"defaultProps",{baseEventId:"latest",targetEventId:"latest"});const b=(0,m.Z)(x),y=(0,i.Z)("div",{shouldForwardProp:e=>"string"==typeof e&&(0,r.Z)(e)&&"loading"!==e,target:"ectlbkf1"})("background-color:",(e=>e.theme.backgroundSecondary),";overflow:auto;padding:",(0,p.Z)(1),";flex:1;display:flex;flex-direction:column;",(e=>e.loading&&`\n        background-color: ${e.theme.background};\n        justify-content: center;\n        align-items: center;\n      `),";"),N=(0,i.Z)("div",{target:"ectlbkf0"})("display:flex;align-items:center;margin-bottom:",(0,p.Z)(2),";"),j=e=>{let{className:t,Body:n,CloseButton:o,...i}=e;return(0,v.BX)(n,{children:[(0,v.tZ)(o,{}),(0,v.tZ)(b,{className:t,...i})]})};j.displayName="DiffModal";const w={name:"1rr6fjx",styles:"position:absolute;left:20px;right:20px;top:20px;bottom:20px;display:flex;padding:0;width:auto;[role='document']{height:100%;display:flex;flex:1;}section{display:flex;width:100%;}"},D=j},"./app/utils/getStacktraceBody.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var o=n("./app/components/events/interfaces/crashContent/stackTrace/rawContent.tsx");function i(e){if(!e||!e.entries)return[];const t=e.entries.find((e=>{let{type:t}=e;return"exception"===t}));if(!t){const t=e.entries.find((e=>{let{type:t}=e;return"message"===t}));return t?t?.data?.formatted&&[t.data.formatted]:[]}return t.data?t.data.values.filter((e=>!!e.stacktrace)).map((t=>(0,o.ZP)(t.stacktrace,e.platform,t))).reduce(((e,t)=>e.concat(t)),[]):[]}},"./app/utils/useApi.tsx":(e,t,n)=>{n.d(t,{Z:()=>s});var o=n("../node_modules/react/index.js"),i=n("./app/api.tsx");const s=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.useRef)();void 0===n.current&&void 0===t&&(n.current=new i.KU);const s=t??n.current,r=(0,o.useCallback)((()=>{e||s.clear()}),[s,e]);return(0,o.useEffect)((()=>r),[r]),s}},"./app/utils/withApi.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var o=n("./app/utils/getDisplayName.tsx"),i=n("./app/utils/useApi.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=n=>{let{api:o,...r}=n;const a=(0,i.Z)({api:o,...t});return(0,s.tZ)(e,{...r,api:a})};return n.displayName=`withApi(${(0,o.Z)(e)})`,n}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_diffModal_tsx.6d7c9031b535945e21be01f97344e6e7.js.map