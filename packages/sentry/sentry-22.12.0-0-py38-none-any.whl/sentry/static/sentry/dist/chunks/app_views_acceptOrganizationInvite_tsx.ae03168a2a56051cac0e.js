"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_acceptOrganizationInvite_tsx"],{"./app/components/narrowLayout.tsx":(t,e,i)=>{i.d(e,{Z:()=>g});var n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=i("../node_modules/react/index.js"),a=i("./app/actionCreators/account.tsx"),s=i("./app/icons/index.tsx"),o=i("./app/locale.tsx"),c=i("./app/utils/useApi.tsx"),l=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(t){let{maxWidth:e,showLogout:i,children:n}=t;const d=(0,c.Z)();return(0,r.useEffect)((()=>(document.body.classList.add("narrow"),()=>document.body.classList.remove("narrow"))),[]),(0,l.BX)("div",{className:"app",children:[(0,l.tZ)("div",{className:"pattern-bg"}),(0,l.tZ)("div",{className:"container",style:{maxWidth:e},children:(0,l.BX)("div",{className:"box box-modal",children:[(0,l.BX)("div",{className:"box-header",children:[(0,l.tZ)("a",{href:"/",children:(0,l.tZ)(s.iW,{size:"lg"})}),i&&(0,l.tZ)("a",{className:"logout pull-right",onClick:async function(){await(0,a.kS)(d),window.location.assign("/auth/login")},children:(0,l.tZ)(h,{children:(0,o.t)("Sign out")})})]}),(0,l.tZ)("div",{className:"box-content with-padding",children:n})]})})]})}d.displayName="NarrowLayout";const h=(0,n.Z)("span",{target:"eaq1ri90"})("font-size:",(t=>t.theme.fontSizeLarge),";"),g=d},"./app/views/acceptOrganizationInvite.tsx":(t,e,i)=>{i.r(e),i.d(e,{default:()=>P});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=i("../node_modules/react/index.js"),s=i("../node_modules/react-router/es/index.js"),o=i("../node_modules/@sentry/utils/esm/object.js"),c=i("./app/actionCreators/account.tsx"),l=i("./app/components/alert.tsx"),d=i("./app/components/button.tsx"),h=i("./app/components/links/externalLink.tsx"),g=i("./app/components/links/link.tsx"),u=i("./app/components/narrowLayout.tsx"),p=i("./app/locale.tsx"),m=i("./app/stores/configStore.tsx"),Z=i("./app/styles/space.tsx"),v=i("./app/views/asyncView.tsx"),S=i("./app/views/settings/components/settingsPageHeader.tsx"),y=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class w extends v.Z{constructor(){super(...arguments),(0,n.Z)(this,"disableErrorReport",!1),(0,n.Z)(this,"handleLogout",(async t=>{t.preventDefault(),await(0,c.kS)(this.api),window.location.replace(this.makeNextUrl("/auth/login/"))})),(0,n.Z)(this,"handleAcceptInvite",(async()=>{const{memberId:t,orgId:e,token:i}=this.props.params;this.setState({accepting:!0});try{e?await this.api.requestPromise(`/accept-invite/${e}/${t}/${i}/`,{method:"POST"}):await this.api.requestPromise(`/accept-invite/${t}/${i}/`,{method:"POST"}),s.browserHistory.replace(`/${this.state.inviteDetails.orgSlug}/`)}catch{this.setState({acceptError:!0})}this.setState({accepting:!1})}))}getEndpoints(){const{memberId:t,orgId:e,token:i}=this.props.params;return e?[["inviteDetails",`/accept-invite/${e}/${t}/${i}/`]]:[["inviteDetails",`/accept-invite/${t}/${i}/`]]}getTitle(){return(0,p.t)("Accept Organization Invite")}makeNextUrl(t){return`${t}?${(0,o._j)({next:window.location.pathname})}`}get existingMemberAlert(){const t=m.Z.get("user");return(0,y.tZ)(l.Z,{type:"warning","data-test-id":"existing-member",children:(0,p._N)("Your account ([email]) is already a member of this organization. [switchLink:Switch accounts]?",{email:t.email,switchLink:(0,y.tZ)(g.Z,{to:"","data-test-id":"existing-member-link",onClick:this.handleLogout})})})}get authenticationActions(){const{inviteDetails:t}=this.state;return(0,y.BX)(a.Fragment,{children:[!t.requireSso&&(0,y.tZ)("p",{"data-test-id":"action-info-general",children:(0,p.t)("To continue, you must either create a new account, or login to an\n              existing Sentry account.")}),t.hasAuthProvider&&(0,y.tZ)("p",{"data-test-id":"action-info-sso",children:t.requireSso?(0,p._N)("Note that [orgSlug] has required Single Sign-On (SSO) using\n               [authProvider]. You may create an account by authenticating with\n               the organization's SSO provider.",{orgSlug:(0,y.tZ)("strong",{children:t.orgSlug}),authProvider:t.ssoProvider}):(0,p._N)("Note that [orgSlug] has enabled Single Sign-On (SSO) using\n               [authProvider]. You may create an account by authenticating with\n               the organization's SSO provider.",{orgSlug:(0,y.tZ)("strong",{children:t.orgSlug}),authProvider:t.ssoProvider})}),(0,y.BX)(x,{children:[(0,y.BX)(b,{children:[t.hasAuthProvider&&(0,y.tZ)(d.ZP,{"data-test-id":"sso-login",priority:"primary",href:this.makeNextUrl(`/auth/login/${t.orgSlug}/`),children:(0,p.t)("Join with %s",t.ssoProvider)}),!t.requireSso&&(0,y.tZ)(d.ZP,{"data-test-id":"create-account",priority:"primary",href:this.makeNextUrl("/auth/register/"),children:(0,p.t)("Create a new account")})]}),!t.requireSso&&(0,y.tZ)(h.Z,{href:this.makeNextUrl("/auth/login/"),openInNewTab:!1,"data-test-id":"link-with-existing",children:(0,p.t)("Login using an existing account")})]})]})}get warning2fa(){const{inviteDetails:t}=this.state;return(0,y.BX)(a.Fragment,{children:[(0,y.tZ)("p",{"data-test-id":"2fa-warning",children:(0,p._N)("To continue, [orgSlug] requires all members to configure two-factor authentication.",{orgSlug:t.orgSlug})}),(0,y.tZ)(x,{children:(0,y.tZ)(d.ZP,{priority:"primary",to:"/settings/account/security/",children:(0,p.t)("Configure Two-Factor Auth")})})]})}get warningEmailVerification(){const{inviteDetails:t}=this.state;return(0,y.BX)(a.Fragment,{children:[(0,y.tZ)("p",{"data-test-id":"email-verification-warning",children:(0,p._N)("To continue, [orgSlug] requires all members to verify their email address.",{orgSlug:t.orgSlug})}),(0,y.tZ)(x,{children:(0,y.tZ)(d.ZP,{priority:"primary",to:"/settings/account/emails/",children:(0,p.t)("Verify Email Address")})})]})}get acceptActions(){const{inviteDetails:t,accepting:e}=this.state;return(0,y.BX)(a.Fragment,{children:[t.hasAuthProvider&&!t.requireSso&&(0,y.tZ)("p",{"data-test-id":"action-info-sso",children:(0,p._N)("Note that [orgSlug] has enabled Single Sign-On (SSO) using\n               [authProvider]. You may join the organization by authenticating with\n               the organization's SSO provider or via your standard account authentication.",{orgSlug:(0,y.tZ)("strong",{children:t.orgSlug}),authProvider:t.ssoProvider})}),(0,y.tZ)(x,{children:(0,y.BX)(b,{children:[t.hasAuthProvider&&!t.requireSso&&(0,y.tZ)(d.ZP,{"data-test-id":"sso-login",priority:"primary",href:this.makeNextUrl(`/auth/login/${t.orgSlug}/`),children:(0,p.t)("Join with %s",t.ssoProvider)}),(0,y.tZ)(d.ZP,{"data-test-id":"join-organization",priority:"primary",disabled:e,onClick:this.handleAcceptInvite,children:(0,p.t)("Join the %s organization",t.orgSlug)})]})})]})}renderError(){return(0,y.tZ)(u.Z,{children:(0,y.tZ)(l.Z,{type:"warning",children:(0,p.t)("This organization invite link is no longer valid.")})})}renderBody(){const{inviteDetails:t,acceptError:e}=this.state;return(0,y.BX)(u.Z,{children:[(0,y.tZ)(S.Z,{title:(0,p.t)("Accept organization invite")}),e&&(0,y.tZ)(l.Z,{type:"error",children:(0,p.t)("Failed to join this organization. Please try again")}),(0,y.tZ)(f,{"data-test-id":"accept-invite",children:(0,p._N)("[orgSlug] is using Sentry to track and debug errors.",{orgSlug:(0,y.tZ)("strong",{children:t.orgSlug})})}),t.needsAuthentication?this.authenticationActions:t.existingMember?this.existingMemberAlert:t.needs2fa?this.warning2fa:t.needsEmailVerification?this.warningEmailVerification:t.requireSso?this.authenticationActions:this.acceptActions]})}}const x=(0,r.Z)("div",{target:"e1adv0ef2"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,Z.Z)(3),";"),b=(0,r.Z)("span",{target:"e1adv0ef1"})(">a{margin-right:",(0,Z.Z)(1),";}"),f=(0,r.Z)("p",{target:"e1adv0ef0"})({name:"1elbn1z",styles:"font-size:1.2em"}),P=w},"./app/views/asyncView.tsx":(t,e,i)=>{i.d(e,{Z:()=>s});var n=i("./app/components/asyncComponent.tsx"),r=i("./app/components/sentryDocumentTitle.tsx"),a=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class s extends n.Z{getTitle(){return""}render(){return(0,a.tZ)(r.Z,{title:this.getTitle(),children:this.renderComponent()})}}s.displayName="AsyncView"}}]);
//# sourceMappingURL=../sourcemaps/app_views_acceptOrganizationInvite_tsx.9c78d63f6b1a408cdcecc8490382dff0.js.map