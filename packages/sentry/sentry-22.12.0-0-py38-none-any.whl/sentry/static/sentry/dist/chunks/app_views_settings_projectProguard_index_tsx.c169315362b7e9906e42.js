"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectProguard_index_tsx"],{"./app/components/acl/access.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),r=s("./app/components/alert.tsx"),i=s("./app/locale.tsx"),a=s("./app/utils/isRenderFunc.tsx"),l=s("./app/utils/withConfig.tsx"),p=s("./app/utils/withOrganization.tsx");const d=(0,s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(r.Z,{type:"error",showIcon:!0,children:(0,i.t)("You do not have sufficient permissions to access this.")});class c extends o.Component{render(){const{organization:e,config:t,access:s,requireAll:n,isSuperuser:o,renderNoAccessMessage:r,children:i}=this.props,{access:l}=e||{access:[]},p=!s||s[n?"every":"some"]((e=>l.includes(e))),c=!(!t.user||!t.user.isSuperuser),u={hasAccess:p,hasSuperuser:c},m=p&&(!o||c);return m||"function"!=typeof r?!m&&r?d:(0,a.l)(i)?i(u):m?i:null:r(u)}}c.displayName="Access",(0,n.Z)(c,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const u=(0,p.Z)((0,l.Z)(c))},"./app/components/acl/role.tsx":(e,t,s)=>{s.d(t,{u:()=>a}),s("../node_modules/core-js/modules/es.array.includes.js");var n=s("../node_modules/react/index.js"),o=s("./app/stores/configStore.tsx"),r=s("./app/utils/isActiveSuperuser.tsx"),i=s("./app/utils/isRenderFunc.tsx");const a=(0,s("./app/utils/withOrganization.tsx").Z)((function(e){let{role:t,organization:s,children:a}=e;const l=o.Z.get("user"),p=(0,n.useMemo)((()=>function(e,t,s){if(!e)return!1;if((0,r.M)())return!0;if(!Array.isArray(t.orgRoleList))return!1;const n=t.orgRoleList.map((e=>e.id));if(!n.includes(s)||!n.includes(t.role??""))return!1;const o=n.indexOf(s);return n.indexOf(t.role??"")>=o}(l,s,t)),[s,t,l]);return(0,i.l)(a)?a({hasRole:p}):p?a:null}))},"./app/components/searchBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>x,p:()=>h});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),r=s("./app/components/button.tsx"),i=s("./app/components/inputGroup.tsx"),a=s("./app/icons/index.tsx"),l=s("./app/icons/iconClose.tsx"),p=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{query:t,defaultQuery:s="",onChange:n,onSearch:r,width:d,size:u,className:x,trailing:Z,...y}=e;const f=(0,o.useRef)(null),[b,w]=(0,o.useState)(t??s);(0,o.useEffect)((()=>{"string"==typeof t&&w(t)}),[t]);const j=(0,o.useCallback)((e=>{const{value:t}=e.target;w(t),n?.(t)}),[n]),v=(0,o.useCallback)((e=>{e.preventDefault(),f.current?.blur(),r?.(b)}),[r,b]),z=(0,o.useCallback)((()=>{w(""),n?.(""),r?.("")}),[n,r]);return(0,c.tZ)(m,{onSubmit:v,className:x,children:(0,c.BX)(i.BZ,{children:[(0,c.tZ)(i.t_,{disablePointerEvents:!0,children:(0,c.tZ)(a.jV,{color:"subText",size:"xs"===u?"xs":"sm"})}),(0,c.tZ)(g,{...y,ref:f,type:"text",name:"query",autoComplete:"off",value:b,onChange:j,width:d,size:u}),(0,c.BX)(i.Oj,{children:[Z,!!b&&(0,c.tZ)(h,{type:"button",size:"zero",borderless:!0,onClick:z,icon:(0,c.tZ)(l.b,{size:"xs"}),"aria-label":(0,p.t)("Clear")})]})]})})}u.displayName="SearchBar";const m=(0,n.Z)("form",{target:"e4xnwji2"})({name:"4bgdod",styles:"display:block;position:relative"}),g=(0,n.Z)(i.II,{target:"e4xnwji1"})((e=>e.width&&`width: ${e.width};`),";"),h=(0,n.Z)(r.ZP,{target:"e4xnwji0"})("color:",(e=>e.theme.subText),";padding:",(0,d.Z)(.5),";"),x=u},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});const n=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;const o=`${e} - ${t}`,r=n?`${o} - ${n}`:o;return s?`${r} - Sentry`:r}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var n=s("./app/components/asyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends n.Z{getTitle(){return""}render(){return(0,r.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/settings/projectProguard/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var n=s("../node_modules/react/index.js"),o=s("./app/utils/withOrganization.tsx"),r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/components/links/externalLink.tsx"),l=s("./app/components/pagination.tsx"),p=s("./app/components/panels/index.tsx"),d=s("./app/components/searchBar.tsx"),c=s("./app/locale.tsx"),u=s("./app/utils/routeTitle.tsx"),m=s("./app/views/asyncView.tsx"),g=s("./app/views/settings/components/settingsPageHeader.tsx"),h=s("./app/views/settings/components/text/textBlock.tsx"),x=s("./app/components/acl/access.tsx"),Z=s("./app/components/acl/role.tsx"),y=s("./app/components/button.tsx"),f=s("./app/components/buttonBar.tsx"),b=s("./app/components/confirm.tsx"),w=s("./app/components/fileSize.tsx"),j=s("./app/components/links/link.tsx"),v=s("./app/components/timeSince.tsx"),z=s("./app/components/tooltip.tsx"),k=s("./app/icons/index.tsx"),S=s("./app/styles/space.tsx"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const C=e=>{let{mapping:t,onDelete:s,downloadUrl:o,downloadRole:r,orgSlug:i}=e;const{id:a,debugId:l,uuid:p,size:d,dateCreated:u}=t,m=()=>{s(a)};return(0,_.BX)(n.Fragment,{children:[(0,_.BX)(P,{children:[(0,_.tZ)($,{children:l||p||`(${(0,c.t)("empty")})`}),(0,_.BX)(q,{children:[(0,_.tZ)(k.jo,{size:"sm"}),(0,_.tZ)(v.Z,{date:u})]})]}),(0,_.tZ)(M,{children:(0,_.tZ)(w.Z,{bytes:d})}),(0,_.tZ)(R,{children:(0,_.BX)(f.ZP,{gap:.5,children:[(0,_.tZ)(Z.u,{role:r,children:e=>{let{hasRole:t}=e;return(0,_.tZ)(z.Z,{title:(0,c._N)("Mappings can only be downloaded by users with organization [downloadRole] role[orHigher]. This can be changed in [settingsLink:Debug Files Access] settings.",{downloadRole:r,orHigher:"owner"!==r?` ${(0,c.t)("or higher")}`:"",settingsLink:(0,_.tZ)(j.Z,{to:`/settings/${i}/#debugFilesRole`})}),disabled:t,isHoverable:!0,children:(0,_.tZ)(y.ZP,{size:"sm",icon:(0,_.tZ)(k.Dj,{size:"sm"}),disabled:!t,href:o,title:t?(0,c.t)("Download Mapping"):void 0,"aria-label":(0,c.t)("Download Mapping")})})}}),(0,_.tZ)(x.Z,{access:["project:releases"],children:e=>{let{hasAccess:t}=e;return(0,_.tZ)(z.Z,{disabled:t,title:(0,c.t)("You do not have permission to delete mappings."),children:(0,_.tZ)(b.Z,{message:(0,c.t)("Are you sure you want to remove this mapping?"),onConfirm:m,disabled:!t,children:(0,_.tZ)(y.ZP,{size:"sm",icon:(0,_.tZ)(k.Fz,{size:"sm"}),title:t?(0,c.t)("Remove Mapping"):void 0,"aria-label":(0,c.t)("Remove Mapping"),disabled:!t})})})}})]})})]})};C.displayName="ProjectProguardRow";const P=(0,i.Z)("div",{target:"e1llzagh4"})({name:"1ij1o5n",styles:"display:flex;flex-direction:column;align-items:flex-start;justify-content:center"}),M=(0,i.Z)("div",{target:"e1llzagh3"})({name:"ivtwc8",styles:"display:flex;justify-content:flex-end;text-align:right;align-items:center"}),R=(0,i.Z)(M,{target:"e1llzagh2"})(""),$=(0,i.Z)("div",{target:"e1llzagh1"})("padding-right:",(0,S.Z)(4),";overflow-wrap:break-word;word-break:break-all;"),q=(0,i.Z)("div",{target:"e1llzagh0"})("display:grid;gap:",(0,S.Z)(.5),";grid-template-columns:min-content 1fr;font-size:",(e=>e.theme.fontSizeMedium),";align-items:center;color:",(e=>e.theme.subText),";margin-top:",(0,S.Z)(1),";"),B=C;class T extends m.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleDelete",(e=>{const{orgId:t,projectId:s}=this.props.params;this.setState({loading:!0}),this.api.request(`/projects/${t}/${s}/files/dsyms/?id=${encodeURIComponent(e)}`,{method:"DELETE",complete:()=>this.fetchData()})})),(0,r.Z)(this,"handleSearch",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,query:e}})}))}getTitle(){const{projectId:e}=this.props.params;return(0,u.Z)((0,c.t)("ProGuard Mappings"),e,!1)}getDefaultState(){return{...super.getDefaultState(),mappings:[]}}getEndpoints(){const{params:e,location:t}=this.props,{orgId:s,projectId:n}=e;return[["mappings",`/projects/${s}/${n}/files/dsyms/`,{query:{query:t.query.query,file_formats:"proguard"}}]]}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}getEmptyMessage(){return this.getQuery()?(0,c.t)("There are no mappings that match your search."):(0,c.t)("There are no mappings for this project.")}renderLoading(){return this.renderBody()}renderMappings(){const{mappings:e}=this.state,{organization:t,params:s}=this.props,{orgId:n,projectId:o}=s;return e?.length?e.map((e=>{const s=`${this.api.baseUrl}/projects/${n}/${o}/files/dsyms/?id=${encodeURIComponent(e.id)}`;return(0,_.tZ)(B,{mapping:e,downloadUrl:s,onDelete:this.handleDelete,downloadRole:t.debugFilesRole,orgSlug:t.slug},e.id)})):null}renderBody(){const{loading:e,mappings:t,mappingsPageLinks:s}=this.state;return(0,_.BX)(n.Fragment,{children:[(0,_.tZ)(g.Z,{title:(0,c.t)("ProGuard Mappings"),action:(0,_.tZ)(d.Z,{placeholder:(0,c.t)("Filter mappings"),onSearch:this.handleSearch,query:this.getQuery(),width:"280px"})}),(0,_.tZ)(h.Z,{children:(0,c._N)("ProGuard mapping files are used to convert minified classes, methods and field names into a human readable format. To learn more about proguard mapping files, [link: read the docs].",{link:(0,_.tZ)(a.Z,{href:"https://docs.sentry.io/platforms/android/proguard/"})})}),(0,_.tZ)(D,{headers:[(0,c.t)("Mapping"),(0,_.tZ)(A,{children:(0,c.t)("File Size")},"size"),""],emptyMessage:this.getEmptyMessage(),isEmpty:0===t?.length,isLoading:e,children:this.renderMappings()}),(0,_.tZ)(l.Z,{pageLinks:s})]})}}const D=(0,i.Z)(p.KB,{target:"et988281"})({name:"qc2mzu",styles:"grid-template-columns:minmax(220px, 1fr) max-content 120px"}),A=(0,i.Z)("div",{target:"et988280"})({name:"2qga7i",styles:"text-align:right"}),I=T;class N extends n.Component{render(){return(0,_.tZ)(I,{...this.props})}}N.displayName="ProjectProguardContainer";const F=(0,o.Z)(N)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectProguard_index_tsx.b1324d11648de82b9f0b634d37b1c707.js.map