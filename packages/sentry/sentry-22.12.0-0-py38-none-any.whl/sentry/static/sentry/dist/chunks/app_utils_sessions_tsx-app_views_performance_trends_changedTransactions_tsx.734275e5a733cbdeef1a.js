"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_sessions_tsx-app_views_performance_trends_changedTransactions_tsx","app_utils_sessions_tsx"],{"./app/utils/sessions.tsx":(e,t,n)=>{n.d(t,{$K:()=>y,BN:()=>E,FS:()=>S,Lv:()=>Z,Pn:()=>v,SU:()=>f,U5:()=>C,VH:()=>m,Xz:()=>b,Y5:()=>w,hD:()=>R,iy:()=>A,mo:()=>_,sA:()=>g,wt:()=>x}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/lodash/compact.js"),s=n.n(r),a=n("../node_modules/lodash/mean.js"),o=n.n(a),i=n("../node_modules/moment/moment.js"),l=n.n(i),d=n("./app/components/charts/utils.tsx"),c=n("./app/types/index.tsx"),p=n("./app/utils.tsx"),u=n("./app/views/releases/utils/index.tsx"),h=n("./app/views/releases/utils/sessionTerm.tsx");const m=10;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce(((e,n)=>e+n.totals[t]),0)}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.reduce(((e,r)=>e+r.series[t][n]),0)}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const n=E(e,t,c.$y.CRASHED);return(0,p.ri)(n)?(0,u.Mf)(100-n):null}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const n=g(e,t),r=e.filter((e=>!!e.totals[t])).length;return(0,p.ri)(n)&&null!==r&&0!==n?n/r:null}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=Array(n.length).fill(0),s=e.map((e=>e.series[t]));return s.forEach((e=>{e.forEach(((e,t)=>r[t]+=e))})),r}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const r=g(e,t),s=g(e.filter((e=>{let{by:t}=e;return t["session.status"]===n})),t);return(0,p.ri)(r)&&0!==r?(0,p.aQ)(s??0,r??0):null}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return s()(t.map(((t,r)=>{const s=e.reduce(((e,t)=>e+(t.series[n]?.[r]??0)),0),a=e.find((e=>e.by["session.status"]===c.$y.CRASHED))?.series[n]?.[r]??0,o=(0,p.aQ)(a,s);return 0===s?null:{name:t,value:(0,u.Mf)(100-o)}})))}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return s()(t.map(((t,s)=>{const a=e.reduce(((e,t)=>e+t.series[n][s]),0),o=e.find((e=>e.by["session.status"]===r))?.series[n][s]??0,i=(0,p.aQ)(o,a);return 0===a?null:{name:t,value:(0,u.r)(i)}})))}function _(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return s()(t.map(((t,s)=>{const a=o()(e.map((e=>e.series[n][s])).filter((e=>!!e)));return a?{name:t,value:"function"==typeof r?r(a):a}:null})))}function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return n.map(((n,s)=>{const a=e.reduce(((e,t)=>e+(t.series[r]?.[s]??0)),0),o=t.reduce(((e,t)=>e+(t.series[r]?.[s]??0)),0),i=(0,p.aQ)(a,o);return{name:n,value:Math.round(i)}}))}function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.map(((n,r)=>({name:n,value:t?.series[e][r]??0})))}function Z(e){const t=e.charts.getColorPalette(14);return{[c.$y.HEALTHY]:{seriesName:h.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ERRORED]:{seriesName:h.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ABNORMAL]:{seriesName:h.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.CRASHED]:{seriesName:h.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function b(e){let{highFidelity:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,d.Nm)(e);return l()(e.start).isSameOrBefore(l()().subtract(30,"days"))&&(t=!1),n>=d.Zn?"1d":n>=d.B8?"4h":n>=d.aC?"1h":t?n<=m?"10s":n<=30?"1m":"5m":"1h"}function C(e,t,n){if(!t||!n)return e;const r=[],s=e.intervals.filter(((e,s)=>{const a=l().utc(e).isBetween(l().utc(t),l().utc(n),void 0,"[]");return a&&r.push(s),a})),a=e.groups.map((e=>{const t={},n={};return Object.keys(e.series).forEach((s=>{n[s]=0,t[s]=e.series[s].filter(((e,t)=>{const a=r.includes(t);return a&&(n[s]=(n[s]??0)+e),a})),s.startsWith("p50")&&(n[s]=o()(t[s])),s.startsWith("count_unique")&&(n[s]=e.totals[s])})),{...e,series:t,totals:n}}));return{start:s[0],end:s[s.length-1],query:e.query,intervals:s,groups:a}}},"./app/views/performance/trends/changedTransactions.tsx":(e,t,n)=>{n.d(t,{H:()=>V,Z:()=>pe});var r,s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/react/index.js")),o=n("../node_modules/react-router/es/index.js"),i=n("./app/components/button.tsx"),l=n("./app/components/charts/styles.tsx"),d=n("./app/components/count.tsx"),c=n("./app/components/dropdownLink.tsx"),p=n("./app/components/duration.tsx"),u=n("./app/components/emptyStateWarning.tsx"),h=n("./app/components/forms/controls/radioGroup.tsx"),m=n("./app/components/idBadge/index.tsx"),g=n("./app/components/links/link.tsx"),f=n("./app/components/loadingIndicator.tsx"),v=n("./app/components/menuItem.tsx"),y=n("./app/components/pagination.tsx"),x=n("./app/components/panels/index.tsx"),E=n("./app/components/questionTooltip.tsx"),S=n("./app/components/radio.tsx"),w=n("./app/components/tooltip.tsx"),_=n("./app/icons/index.tsx"),R=n("./app/locale.tsx"),A=n("./app/styles/space.tsx"),Z=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),b=n("./app/utils/formatters.tsx"),C=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),T=n("./app/utils/queryString.tsx"),j=n("./app/utils/tokenizeSearch.tsx"),N=n("./app/utils/useApi.tsx"),L=n("./app/utils/withOrganization.tsx"),D=n("./app/utils/withProjects.tsx"),H=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),O=n("./app/views/performance/transactionSummary/utils.tsx"),k=n("./app/views/performance/trends/chart.tsx"),F=n("./app/views/performance/trends/types.tsx"),q=n("./app/views/performance/trends/utils.tsx"),B=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function M(e){switch(e){case F.ER.IMPROVED:return(0,R.t)("Most Improved Transactions");case F.ER.REGRESSION:return(0,R.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}function P(e,t,n){const r=(0,q.j_)(t),s=(0,T.ro)(e.query[r]);if(!n)return;return n.find((e=>`${e.transaction}-${e.project}`===s))||(n.length>0?n[0]:void 0)}function z(e,t,n){return function(r){const s=(0,q.j_)(n),a={...e.query};r?a[s]=r?`${r.transaction}-${r.project}`:void 0:delete a[s],o.browserHistory.push({pathname:e.pathname,query:a}),(0,Z.Z)("performance_views.trends.widget_interaction",{organization:t,widget_type:n})}}function I(e,t,n,s,a,i,l){const d=(0,q.IO)(e,i,l).column,c=(0,T.ro)(e.query.query),p=new j.MY(c??""),u=p.getFilterValues(d),h=s===r.GREATER_THAN_EQUALS?">":"<";u&&u.forEach((e=>{(e.startsWith(s)||e.startsWith(h))&&p.removeFilterValue(d,e)})),p.addFilterValues(d,[`${s}${n}`]);const m=p.formatString();o.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(m).trim()}}),(0,Z.Z)("performance_views.trends.change_duration",{organization:t,widget_type:M(a),value:`${s}${n}`})}function U(e){const{location:t,trendChangeType:n,previousTrendFunction:r,previousTrendColumn:s,organization:i,projects:l,setError:d}=e,c=(0,N.Z)(),p=e.trendView.clone(),u=M(n);(0,q.kM)(p,t,n,l);const h=(e=>(t,n,r)=>{const s={};e===F.ER.IMPROVED?s.improvedCursor=t:e===F.ER.REGRESSION&&(s.regressionCursor=t),delete r[(0,q.j_)(e)],o.browserHistory.push({pathname:n,query:{...r,...s}})})(n),m=(0,T.ro)(t.query[q.vt[n]]),g=e=>{(0,Z.Z)("performance_views.trends.widget_pagination",{organization:i,direction:e,widget_type:M(n)})};return(0,B.tZ)(C.ZP,{eventView:p,orgSlug:i.slug,location:t,trendChangeType:n,cursor:m,limit:5,setError:e=>d(e?.message),children:o=>{let{isLoading:d,trendsData:m,pageLinks:v}=o;const x=(0,q.CE)(t),S=(0,q.IO)(t,l,p.project),w=(0,q.RP)(m&&m.events&&m.events.data||[]),_=P(t,n,w),A=m?.stats||{},Z=w&&w.slice?w.slice(0,5):[],b=d&&r?r:x.field,C=d&&s?s:S.column,T=(0,R.t)("This compares the baseline (%s) of the past with the present.",x.legendLabel);return(0,B.BX)(Q,{"data-test-id":"changed-transactions",children:[(0,B.BX)(G,{children:[(0,B.BX)(K,{children:[u,(0,B.tZ)(E.Z,{size:"sm",position:"top",title:T})]}),d?(0,B.tZ)(f.Z,{style:{margin:"237px auto"}}):(0,B.tZ)(a.Fragment,{children:Z.length?(0,B.BX)(a.Fragment,{children:[(0,B.tZ)(W,{children:(0,B.tZ)(k.Z,{statsData:A,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:_,isLoading:d,...e})}),Z.map(((r,s)=>(0,B.tZ)($,{api:c,currentTrendFunction:b,currentTrendColumn:C,trendView:e.trendView,organization:i,transaction:r,index:s,trendChangeType:n,transactions:Z,location:t,projects:l,statsData:A,handleSelectTransaction:z(t,i,n)},r.transaction)))]}):(0,B.tZ)(te,{small:!0,children:(0,R.t)("No results")})})]}),(0,B.tZ)(y.Z,{pageLinks:v,onCursor:h,paginationAnalyticsEvent:g})]})}})}function $(e){const{transaction:t,transactions:n,trendChangeType:s,currentTrendFunction:i,currentTrendColumn:l,index:p,location:u,organization:g,projects:f,handleSelectTransaction:y,trendView:x}=e,E=q.es[s].default,A=P(u,s,n)===t,Z=f.find((e=>{let{slug:n}=e;return n===t.project})),C=t.aggregate_range_2,N=t.aggregate_range_1,L=(0,b.rl)(Math.abs(t.trend_percentage-1),0),D=(0,b.g9)(N/1e3,N<1e3&&N>10?0:2),H=(0,b.g9)(C/1e3,C<1e3&&C>10?0:2),O=(0,R.t)("Over this period, the %s for %s has %s %s from %s to %s",i,l,s===F.ER.IMPROVED?(0,R.t)("decreased"):(0,R.t)("increased"),L,D,H),k=s===F.ER.IMPROVED?N:C,M=s===F.ER.IMPROVED?D:H;return(0,B.BX)(ne,{"data-test-id":"trends-list-item-"+s,children:[(0,B.tZ)(re,{color:E,children:(0,B.tZ)(w.Z,{title:(0,B.BX)(de,{children:[(0,B.tZ)("span",{children:(0,R.t)("Total Events")}),(0,B.BX)("span",{children:[(0,B.tZ)(d.Z,{value:t.count_range_1}),(0,B.tZ)(ce,{direction:"right",size:"xs"}),(0,B.tZ)(d.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,B.tZ)(h.V,{index:p,role:"radio",children:(0,B.tZ)(S.Z,{checked:A,onChange:()=>y(t)})})})}),(0,B.tZ)(Y,{...e}),(0,B.tZ)(ie,{children:(0,B.tZ)(w.Z,{title:O,children:(0,B.BX)(a.Fragment,{children:[s===F.ER.REGRESSION?"+":"",(0,b.rl)(t.trend_percentage-1,0)]})})}),(0,B.BX)(c.Z,{caret:!1,anchorRight:!0,title:(0,B.tZ)(J,{size:"xs",icon:(0,B.tZ)(_.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,R.t)("Actions")}),children:[(0,B.tZ)(v.Z,{onClick:()=>I(u,g,k,r.LESS_THAN_EQUALS,s,f,x.project),children:(0,B.tZ)(ee,{children:(0,R.t)("Show ≤ %s",M)})}),(0,B.tZ)(v.Z,{onClick:()=>I(u,g,k,r.GREATER_THAN_EQUALS,s,f,x.project),children:(0,B.tZ)(ee,{children:(0,R.t)("Show ≥ %s",M)})}),(0,B.tZ)(v.Z,{onClick:()=>function(e,t){const n=(0,T.ro)(e.query.query),r=new j.MY(n??"");r.addFilterValues("!transaction",[t]);const s=r.formatString();o.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(s).trim()}})}(u,t.transaction),children:(0,B.tZ)(ee,{children:(0,R.t)("Hide from list")})})]}),(0,B.BX)(ae,{children:[Z&&(0,B.tZ)(w.Z,{title:t.project,children:(0,B.tZ)(m.Z,{avatarSize:16,project:Z,hideName:!0})}),(0,B.tZ)(V,{...e})]}),(0,B.tZ)(le,{color:E,children:(0,B.tZ)(X,{...e})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(r||(r={})),U.displayName="ChangedTransactions",$.displayName="TrendsListItem";const V=e=>{let{transaction:t}=e;const{fromSeconds:n,toSeconds:r,showDigits:s}=(0,q.Kt)(t.aggregate_range_1,t.aggregate_range_2);return(0,B.BX)(oe,{children:[(0,B.tZ)(p.Z,{seconds:n,fixedDigits:s?1:0,abbreviation:!0}),(0,B.tZ)(ce,{direction:"right",size:"xs"}),(0,B.tZ)(p.Z,{seconds:r,fixedDigits:s?1:0,abbreviation:!0})]})};V.displayName="CompareDurations";const X=e=>{let{transaction:t,trendChangeType:n}=e;const{seconds:r,fixedDigits:s,changeLabel:a}=(0,q.wx)(t.trend_difference,n);return(0,B.BX)("span",{children:[(0,B.tZ)(p.Z,{seconds:r,fixedDigits:s,abbreviation:!0})," ",a]})};X.displayName="ValueDelta";const Y=e=>{const{organization:t,trendView:n,transaction:r,projects:s,currentTrendFunction:a,currentTrendColumn:o}=e,i=n.clone(),l=(0,q._H)(r,s),d=(0,O.e1)({orgSlug:t.slug,transaction:String(r.transaction),query:i.generateQueryStringObject(),projectID:l,display:H.D.TREND,trendFunction:a,trendColumn:o});return(0,B.tZ)(se,{to:d,"data-test-id":"item-transaction-name",children:r.transaction})};Y.displayName="TransactionSummaryLink";const Q=(0,s.Z)("div",{target:"e11bn3w115"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),G=(0,s.Z)(x.s_,{target:"e11bn3w114"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),W=(0,s.Z)("div",{target:"e11bn3w113"})("padding:",(0,A.Z)(3),";"),K=(0,s.Z)(l.ws,{target:"e11bn3w112"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,A.Z)(2)," ",(0,A.Z)(3),";"),J=(0,s.Z)(i.ZP,{target:"e11bn3w111"})({name:"1989ovb",styles:"vertical-align:middle"}),ee=(0,s.Z)("div",{target:"e11bn3w110"})("white-space:nowrap;color:",(e=>e.theme.textColor),";");ee.defaultProps={"data-test-id":"menu-action"};const te=(0,s.Z)(u.Z,{target:"e11bn3w19"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),ne=(0,s.Z)("div",{target:"e11bn3w18"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,A.Z)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,A.Z)(1)," ",(0,A.Z)(2),";"),re=(0,s.Z)("div",{target:"e11bn3w17"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),se=(0,s.Z)(g.Z,{target:"e11bn3w16"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,A.Z)(1),";",(e=>e.theme.overflowEllipsis),";"),ae=(0,s.Z)("div",{target:"e11bn3w15"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),oe=(0,s.Z)("span",{target:"e11bn3w14"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,A.Z)(1),";"),ie=(0,s.Z)("div",{target:"e11bn3w13"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),le=(0,s.Z)("div",{target:"e11bn3w12"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),de=(0,s.Z)("div",{target:"e11bn3w11"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),ce=(0,s.Z)(_.CC,{target:"e11bn3w10"})("margin:0 ",(0,A.Z)(1),";"),pe=(0,D.Z)((0,L.Z)(U))},"./app/views/performance/trends/chart.tsx":(e,t,n)=>{n.d(t,{Z:()=>w,k:()=>S});var r=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),a=n("./app/components/charts/chartZoom.tsx"),o=n("./app/components/charts/lineChart.tsx"),i=n("./app/components/charts/transitionChart.tsx"),l=n("./app/components/charts/transparentLoadingMask.tsx"),d=n("./app/components/organizations/pageFilters/parse.tsx"),c=n("./app/locale.tsx"),p=n("./app/utils/dates.tsx"),u=n("./app/utils/discover/charts.tsx"),h=n("./app/utils/discover/fields.tsx"),m=n("./app/utils/getDynamicText.tsx"),g=n("./app/utils/queryString.tsx"),f=n("./app/utils/useLocation.tsx"),v=n("./app/utils/useRouter.tsx"),y=n("./app/views/performance/trends/utils.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function E(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:e}]}}function S(e){let{trendChangeType:t,statsPeriod:n,transaction:S,statsData:w,isLoading:_,start:R,end:A,trendFunctionField:Z,disableXAxis:b,disableLegend:C,grid:T,height:j,projects:N,project:L}=e;const D=(0,f.T)(),H=(0,v.Z)(),O=(0,s.u)(),k=e=>{const{selected:n}=e,s=Object.keys(n).filter((e=>!n[e])),a={...D.query};a[(0,y.P4)(t)]=s;const o={...D,query:a};r.browserHistory.push(o)},F=y.es[t||""],q=(w&&S?.project&&S?.transaction?w[[S.project,S.transaction].join(",")]:void 0)?.data??[],B=(0,y.CE)(D,Z),M=(0,y.IO)(D,N,L),P=(0,y.ed)(B.field,M.column),z=function(e,t){return[{seriesName:t||"Current",data:e.map((e=>{let[t,n]=e;return{name:1e3*t,value:n.reduce(((e,t)=>{let{count:n}=t;return e+n}),0)}}))}]}(q,P),{smoothedResults:I,minValue:U,maxValue:$}=(0,y.vq)(z,P),V=R?(0,p.hC)(R):null,X=A?(0,p.hC)(A):null,{utc:Y}=(0,d.fK)(D.query),Q=(0,g.qP)(D.query[(0,y.P4)(t)]).reduce(((e,t)=>(e[t]=!1,e)),{}),G=C?{show:!1}:{...E(P),selected:Q},W=_,K=_,J=Math.max($,S?.aggregate_range_2||0,S?.aggregate_range_1||0),ee=Math.min(U,S?.aggregate_range_1||Number.MAX_SAFE_INTEGER,S?.aggregate_range_2||Number.MAX_SAFE_INTEGER),te=I?I.map((e=>({...e,color:F.default,lineStyle:{opacity:1}}))):[],ne=function(e,t,n,r){if(!(r&&t.length&&t[0].data&&t[0].data.length))return[];const s=parseInt(t[0].data[0].name,10),a=parseInt(t[0].data.slice(-1)[0].name,10);if(a<s)return[];const o={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{color:e.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0,color:e.textColor,silent:!0},l={...o,markLine:{...o.markLine},seriesName:"Baseline"},d={...o,markLine:{...o.markLine},seriesName:"Baseline"},p={...o,markLine:{...o.markLine},seriesName:"Period split"},h=.5*(a-s)+s;return l.markLine.data=[[{value:"Past",coord:[s,r.aggregate_range_1]},{coord:[h,r.aggregate_range_1]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,c.t)("Past Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_1,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},d.markLine.data=[[{value:"Present",coord:[h,r.aggregate_range_2]},{coord:[a,r.aggregate_range_2]}]],d.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,c.t)("Present Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_2,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{xAxis:h}],label:{show:!1},lineStyle:{color:e.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},l.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},d.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[l,d,p]}(O,I||[],0,S),re=.1*(J-ee),se=[...te,...ne],ae=(0,u.Xp)(se),oe={tooltip:{valueFormatter:(e,t)=>(0,u.CX)(e,(0,h.Px)(t))},yAxis:{min:Math.max(0,ee-re),max:J+re,minInterval:ae,axisLabel:{color:O.chartLabel,formatter:e=>(0,u.gu)(e,"duration",void 0,ae)}}};return(0,x.tZ)(a.Z,{router:H,period:n,start:V,end:X,utc:"true"===Y,children:e=>(0,x.BX)(i.Z,{loading:W,reloading:K,children:[(0,x.tZ)(l.Z,{visible:K}),(0,m.Z)({value:(0,x.tZ)(o.w,{height:j,...e,...oe,onLegendSelectChanged:k,series:se,seriesOptions:{showSymbol:!1},legend:G,toolBox:{show:!1},grid:T??{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:b?{show:!1}:void 0}),fixed:"Duration Chart"})]})})}S.displayName="Chart";const w=S},"./app/views/releases/utils/index.tsx":(e,t,n)=>{n.d(t,{C8:()=>T,EB:()=>L,G$:()=>R,G5:()=>E,Jl:()=>D,Mf:()=>S,O7:()=>j,PS:()=>A,TB:()=>b,eY:()=>Z,hf:()=>x,me:()=>H,r:()=>_,rF:()=>C,zB:()=>w}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/lodash/pick.js"),s=n.n(r),a=n("../node_modules/lodash/round.js"),o=n.n(a),i=n("../node_modules/moment/moment.js"),l=n.n(i),d=n("./app/components/links/externalLink.tsx"),c=n("./app/components/organizations/pageFilters/parse.tsx"),p=n("./app/constants/pageFilters.tsx"),u=n("./app/data/platformCategories.tsx"),h=n("./app/locale.tsx"),m=n("./app/types/index.tsx"),g=n("./app/utils.tsx"),f=n("./app/utils/tokenizeSearch.tsx"),v=n("./app/views/issueList/utils.tsx"),y=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=95,E=e=>o()(e,e>60?0:3),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const r=o()(e,e>t?n:0);return 100===r&&e<100?Math.floor(e*Math.pow(10,n))/Math.pow(10,n):r},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(isNaN(e))return"―";if(e<1&&e>0)return"<1%";const r=S(e,t,n).toLocaleString();return`${r}%`},_=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o()(t?Math.abs(e):e,3)},R=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return`${_(e,t).toLocaleString()}%`},A=(e,t,n)=>({pathname:`/organizations/${e}/issues/`,query:{project:t,statsPeriod:void 0,start:void 0,end:void 0,query:new f.MY([`firstRelease:${n}`]).formatString(),sort:v.qh.FREQ}}),Z=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{pathname:`/organizations/${e}/issues/`,query:{...r,project:t,query:new f.MY([`release:${n}`,"error.unhandled:true"]).formatString(),sort:v.qh.FREQ}}},b=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{pathname:`/organizations/${e}/issues/`,query:{...r,project:t,query:new f.MY([`release:${n}`,"error.handled:true"]).formatString(),sort:v.qh.FREQ}}},C=e=>e.status===m.dE.Archived;function T(e){const t=l()().subtract(90,"days"),{lastEvent:n,currentProjectMeta:r,dateCreated:s}=e||{},{sessionsUpperBound:a}=r||{};let o="normal",i=l()(s).startOf("minute"),d=l()((l()(a).isAfter(n)?a:n)??void 0).endOf("minute");return l()(i).isSame(d,"minute")&&(d=l()(d).add(1,"minutes")),i.isBefore(t)&&(i=t,o="clamped",(d.isBefore(i)||!(0,g.ri)(a)&&!(0,g.ri)(n))&&(d=l()(),o="ancient")),{type:o,releaseStart:i.utc().format(),releaseEnd:d.utc().format()}}function j(e){let{location:t,releaseBounds:n}=e;const r=(0,c.fK)(s()(t.query,[...Object.values(p.nF),...Object.values(p.V),"cursor"]),{allowAbsolutePageDatetime:!0,allowEmptyPeriod:!0});return Object.keys(r).some((e=>[p.nF.START,p.nF.END,p.nF.UTC,p.nF.PERIOD].includes(e)))||(r[p.nF.START]=n.releaseStart,r[p.nF.END]=n.releaseEnd),r}const N=(0,y.tZ)(d.Z,{href:"https://docs.sentry.io/product/releases/health/#adoption-stages"}),L={low_adoption:{name:(0,h.t)("Low Adoption"),tooltipTitle:(0,h._N)("This release has a low percentage of sessions compared to other releases in this project. [link:Learn more]",{link:N}),type:"warning"},adopted:{name:(0,h.t)("Adopted"),tooltipTitle:(0,h._N)("This release has a high percentage of sessions compared to other releases in this project. [link:Learn more]",{link:N}),type:"success"},replaced:{name:(0,h.t)("Replaced"),tooltipTitle:(0,h._N)("This release was previously Adopted, but now has a lower level of sessions compared to other releases in this project. [link:Learn more]",{link:N}),type:"default"}},D=e=>[...u.ai,...u.gv].includes(e);function H(e){return`release:"${e.replace(/"/g,'\\"')}"`}},"./app/views/releases/utils/sessionTerm.tsx":(e,t,n)=>{n.d(t,{RE:()=>d,U1:()=>a,_k:()=>s,w0:()=>o});var r=n("./app/locale.tsx");let s;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption"}(s||(s={}));const a={[s.CRASHES]:(0,r.t)("Crashes"),[s.CRASHED]:(0,r.t)("Crashed"),[s.ABNORMAL]:(0,r.t)("Abnormal"),[s.CRASH_FREE_USERS]:(0,r.t)("Crash Free Users"),[s.CRASH_FREE_SESSIONS]:(0,r.t)("Crash Free Sessions"),[s.HEALTHY]:(0,r.t)("Healthy"),[s.ERRORED]:(0,r.t)("Errored"),[s.UNHANDLED]:(0,r.t)("Unhandled"),[s.ADOPTION]:(0,r.t)("Adoption"),duration:(0,r.t)("Session Duration"),otherCrashed:(0,r.t)("Other Crashed"),otherAbnormal:(0,r.t)("Other Abnormal"),otherErrored:(0,r.t)("Other Errored"),otherHealthy:(0,r.t)("Other Healthy"),otherCrashFreeUsers:(0,r.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,r.t)("Other Crash Free Sessions"),otherReleases:(0,r.t)("Other Releases")},o={[s.CRASHES]:(0,r.t)("Number of sessions with a crashed state"),[s.CRASH_FREE]:(0,r.t)("Percentage of sessions/users who did not experience a crash."),[s.CRASH_FREE_USERS]:(0,r.t)("Percentage of unique users with non-crashed sessions"),[s.CRASH_FREE_SESSIONS]:(0,r.t)("Percentage of non-crashed sessions"),[s.STABILITY]:(0,r.t)("The percentage of crash free sessions."),[s.ADOPTION]:(0,r.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},i={[s.CRASHED]:(0,r.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[s.CRASH_FREE_SESSIONS]:(0,r.t)("Percentage of non-crashed sessions"),[s.ABNORMAL]:(0,r.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[s.HEALTHY]:(0,r.t)("A session without errors"),[s.ERRORED]:(0,r.t)("A session with errors"),[s.UNHANDLED]:(0,r.t)("Not handled by user code")},l={crashed:(0,r.t)("The application crashed with a hard crash (eg. segfault)"),[s.ABNORMAL]:(0,r.t)("The application did not properly end the session, for example, due to force-quit"),[s.HEALTHY]:(0,r.t)("The application exited normally and did not observe any errors"),[s.ERRORED]:(0,r.t)("The application exited normally but observed error events while running"),[s.UNHANDLED]:(0,r.t)("The application crashed with a hard crash")};function d(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:e?.split("-")[0]){case"dotnet":case"java":return{...o,...i};case"java-spring":case"dotnet-aspnetcore":return{...o,...i,[s.CRASHES]:(0,r.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...o,...i,[s.CRASHED]:(0,r.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...o,...i,[s.CRASHED]:(0,r.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...o,[s.CRASHED]:(0,r.t)("During the session an unhandled global error/promise rejection occurred."),[s.ABNORMAL]:(0,r.t)("Non applicable for Javascript."),[s.HEALTHY]:(0,r.t)("No errors were captured during session life-time."),[s.ERRORED]:(0,r.t)("During the session at least one handled error occurred."),[s.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...o,...l};case"rust":return{...o,...l,[s.CRASHED]:(0,r.t)("The application had an unrecoverable error (a panic)")};default:return{...o,[s.CRASHED]:(0,r.t)("Number of users who experienced an unhandled error"),[s.ABNORMAL]:(0,r.t)("An unknown session exit"),[s.HEALTHY]:i.healthy,[s.ERRORED]:i.errored,[s.UNHANDLED]:i.unhandled}}}(t)[e]}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_sessions_tsx-app_views_performance_trends_changedTransactions_tsx.88a21602f44c9721d363e34b04d6a0ba.js.map