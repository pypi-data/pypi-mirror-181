"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectServiceHooks_tsx"],{"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var o=s("./app/components/asyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends o.Z{getTitle(){return""}render(){return(0,n.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/project/projectServiceHooks.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/react/index.js"),n=s("./app/actionCreators/indicator.tsx"),r=s("./app/components/button.tsx"),a=s("./app/components/emptyMessage.tsx"),p=s("./app/components/forms/field/index.tsx"),c=s("./app/components/links/link.tsx"),d=s("./app/components/panels/index.tsx"),l=s("./app/components/switchButton.tsx"),h=s("./app/components/truncate.tsx"),m=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),g=s("./app/utils/withOrganization.tsx"),v=s("./app/views/asyncView.tsx"),x=s("./app/views/settings/components/settingsPageHeader.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function k(e){let{orgId:t,projectId:s,hook:o,onToggleActive:i}=e;return(0,Z.tZ)(p.Z,{label:(0,Z.tZ)(c.Z,{"data-test-id":"project-service-hook",to:`/settings/${t}/projects/${s}/hooks/${o.id}/`,children:(0,Z.tZ)(h.Z,{value:o.url})}),help:(0,Z.tZ)("small",{children:o.events&&0!==o.events.length?o.events.join(", "):(0,Z.tZ)("em",{children:(0,u.t)("no events configured")})}),children:(0,Z.tZ)(l.Z,{isActive:"active"===o.status,size:"lg",toggle:i})})}k.displayName="ServiceHookRow";class j extends v.Z{constructor(){super(...arguments),(0,o.Z)(this,"onToggleActive",(e=>{const{orgId:t,projectId:s}=this.props.params,{hookList:o}=this.state;o&&((0,n.E3)((0,u.t)("Saving changesâ€¦")),this.api.request(`/projects/${t}/${s}/hooks/${e.id}/`,{method:"PUT",data:{isActive:"active"!==e.status},success:e=>{(0,n.B8)(),this.setState({hookList:o.map((t=>t.id===e.id?{...t,...e}:t))})},error:()=>{(0,n.Iw)((0,u.t)("Unable to remove application. Please try again."))}}))}))}getEndpoints(){const{orgId:e,projectId:t}=this.props.params;return[["hookList",`/projects/${e}/${t}/hooks/`]]}renderEmpty(){return(0,Z.tZ)(a.Z,{children:(0,u.t)("There are no service hooks associated with this project.")})}renderResults(){const{orgId:e,projectId:t}=this.props.params;return(0,Z.BX)(i.Fragment,{children:[(0,Z.tZ)(d.V9,{children:(0,u.t)("Service Hook")},"header"),(0,Z.BX)(d.N,{children:[(0,Z.tZ)(d.aU,{type:"info",showIcon:!0,children:(0,u.t)("Service Hooks are an early adopter preview feature and will change in the future.")}),this.state.hookList?.map((s=>(0,Z.tZ)(k,{orgId:e,projectId:t,hook:s,onToggleActive:this.onToggleActive.bind(this,s)},s.id)))]},"body")]})}renderBody(){const{hookList:e}=this.state,t=e&&e.length>0?this.renderResults():this.renderEmpty(),{orgId:s,projectId:o}=this.props.params,n=new Set(this.props.organization.access);return(0,Z.BX)(i.Fragment,{children:[(0,Z.tZ)(x.Z,{title:(0,u.t)("Service Hooks"),action:n.has("project:write")?(0,Z.tZ)(r.ZP,{"data-test-id":"new-service-hook",to:`/settings/${s}/projects/${o}/hooks/new/`,size:"sm",priority:"primary",icon:(0,Z.tZ)(m.N_,{size:"xs",isCircled:!0}),children:(0,u.t)("Create New Hook")}):null}),(0,Z.tZ)(d.s_,{children:t})]})}}const w=(0,g.Z)(j)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectServiceHooks_tsx.b52173a747b7def4473d5df97ba00941.js.map