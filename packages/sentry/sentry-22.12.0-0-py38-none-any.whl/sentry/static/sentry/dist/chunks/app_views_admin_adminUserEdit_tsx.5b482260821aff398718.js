"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_admin_adminUserEdit_tsx"],{"./app/views/admin/adminUserEdit.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>U});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),a=s("../node_modules/react-router/es/index.js"),o=s("./app/actionCreators/indicator.tsx"),d=s("./app/actionCreators/modal.tsx"),l=s("./app/components/button.tsx"),p=s("./app/components/forms/controls/radioGroup.tsx"),m=s("./app/components/forms/form.tsx"),u=s("./app/components/forms/jsonForm.tsx"),c=s("./app/components/forms/model.tsx"),h=s("./app/locale.tsx"),b=s("./app/styles/space.tsx"),y=s("./app/views/asyncView.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g={title:"User details",fields:[{name:"name",type:"string",required:!0,label:(0,h.t)("Name")},{name:"username",type:"string",required:!0,label:(0,h.t)("Username"),help:(0,h.t)("The username is the unique id of the user in the system")},{name:"email",type:"string",required:!0,label:(0,h.t)("Email"),help:(0,h.t)("The users primary email address")},{name:"isActive",type:"boolean",required:!0,label:(0,h.t)("Active"),help:(0,h.t)("Designates whether this user should be treated as active. Unselect this instead of deleting accounts.")},{name:"isStaff",type:"boolean",required:!0,label:(0,h.t)("Admin"),help:(0,h.t)("Designates whether this user can perform administrative functions.")},{name:"isSuperuser",type:"boolean",required:!0,label:(0,h.t)("Superuser"),help:(0,h.t)("Designates whether this user has all permissions without explicitly assigning them.")}]},Z={disable:(0,h.t)("Disable User"),delete:(0,h.t)("Permanently Delete User")};class v extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{deleteType:"disable"}),(0,r.Z)(this,"onRemove",(()=>{this.props.onRemove(this.state.deleteType),this.props.closeModal()}))}render(){const{user:e}=this.props,{deleteType:t}=this.state;return(0,x.BX)(n.Fragment,{children:[(0,x.tZ)(p.Z,{value:t,label:(0,h.t)("Remove user %s",e.email),onChange:e=>this.setState({deleteType:e}),choices:[["disable",(0,h.t)("Disable the account.")],["delete",(0,h.t)("Permanently remove the user and their data.")]]}),(0,x.BX)(f,{children:[(0,x.tZ)(l.ZP,{priority:"danger",onClick:this.onRemove,children:Z[t]}),(0,x.tZ)(l.ZP,{onClick:this.props.closeModal,children:(0,h.t)("Cancel")})]})]})}}v.displayName="RemoveUserModal";class w extends y.Z{constructor(){super(...arguments),(0,r.Z)(this,"removeUser",(e=>"delete"===e?this.deleteUser():this.deactivateUser())),(0,r.Z)(this,"formModel",new c.Z)}get userEndpoint(){const{params:e}=this.props;return`/users/${e.id}/`}getEndpoints(){return[["user",this.userEndpoint]]}async deleteUser(){await this.api.requestPromise(this.userEndpoint,{method:"DELETE",data:{hardDelete:!0,organizations:[]}}),(0,o.S9)((0,h.t)("%s's account has been deleted.",this.state.user?.email)),a.browserHistory.replace("/manage/users/")}async deactivateUser(){const e=await this.api.requestPromise(this.userEndpoint,{method:"PUT",data:{isActive:!1}});this.setState({user:e}),this.formModel.setInitialData(e),(0,o.S9)((0,h.t)("%s's account has been deactivated.",e.email))}renderBody(){const{user:e}=this.state;return null===e?null:(0,x.BX)(n.Fragment,{children:[(0,x.tZ)("h3",{children:(0,h.t)("Users")}),(0,x.tZ)("p",{children:(0,h.t)("Editing user: %s",e.email)}),(0,x.tZ)(m.Z,{model:this.formModel,initialData:e,apiMethod:"PUT",apiEndpoint:this.userEndpoint,requireChanges:!0,onSubmitError:o.Iw,onSubmitSuccess:e=>{this.setState({user:e}),(0,o.S9)("User account updated.")},extraButton:(0,x.tZ)(l.ZP,{type:"button",onClick:()=>(0,d.openModal)((t=>(0,x.tZ)(v,{user:e,onRemove:this.removeUser,...t}))),style:{marginLeft:(0,b.Z)(1)},priority:"danger",children:(0,h.t)("Remove User")}),children:(0,x.tZ)(u.Z,{forms:[g]})})]})}}const f=(0,i.Z)("div",{target:"e1wmf500"})("display:grid;grid-auto-flow:column;gap:",(0,b.Z)(1),";justify-content:end;padding:20px 30px;margin:20px -30px -30px;border-top:1px solid ",(e=>e.theme.border),";"),U=w},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./app/components/asyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends r.Z{getTitle(){return""}render(){return(0,n.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="AsyncView"}}]);
//# sourceMappingURL=../sourcemaps/app_views_admin_adminUserEdit_tsx.819e67a5e98c7c7aeaa9a2e9360c0e35.js.map