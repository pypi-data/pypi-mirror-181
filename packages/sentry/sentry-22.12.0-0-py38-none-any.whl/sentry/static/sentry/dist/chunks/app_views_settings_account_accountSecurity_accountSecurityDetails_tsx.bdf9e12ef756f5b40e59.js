"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_account_accountSecurity_accountSecurityDetails_tsx"],{"./app/views/asyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var s=n("./app/components/asyncComponent.tsx"),i=n("./app/components/sentryDocumentTitle.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends s.Z{getTitle(){return""}render(){return(0,a.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}o.displayName="AsyncView"},"./app/views/settings/account/accountSecurity/accountSecurityDetails.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),o=n("./app/actionCreators/indicator.tsx"),r=n("./app/components/button.tsx"),c=n("./app/components/circleIndicator.tsx"),d=n("./app/components/dateTime.tsx"),l=n("./app/components/tooltip.tsx"),m=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),h=n("./app/views/asyncView.tsx"),u=n("./app/components/clipboard.tsx"),Z=n("./app/components/confirm.tsx"),g=n("./app/components/emptyMessage.tsx"),v=n("./app/components/panels/index.tsx"),y=n("./app/icons/index.tsx"),f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=e=>{let{className:t,isEnrolled:n,codes:s,onRegenerateBackupCodes:i}=e;if(!n||!s)return null;const a=s.join(" \n");return(0,f.BX)(b,{className:t,children:[(0,f.BX)(v.V9,{hasButtons:!0,children:[(0,m.t)("Unused Codes"),(0,f.BX)(B,{children:[(0,f.tZ)(u.Z,{hideUnsupported:!0,value:a,children:(0,f.tZ)(r.ZP,{size:"sm","aria-label":(0,m.t)("copy"),children:(0,f.tZ)(y.vU,{})})}),(0,f.tZ)(r.ZP,{size:"sm",onClick:()=>{const e=window.frames.printable;e.document.write(s.join("<br>")),e.print(),e.document.close()},"aria-label":(0,m.t)("print"),children:(0,f.tZ)(y.nS,{})}),(0,f.tZ)(r.ZP,{size:"sm",download:"sentry-recovery-codes.txt",href:`data:text/plain;charset=utf-8,${a}`,"aria-label":(0,m.t)("download"),children:(0,f.tZ)(y.Dj,{})}),(0,f.tZ)(Z.Z,{onConfirm:i,message:(0,m.t)("Are you sure you want to regenerate recovery codes? Your old codes will no longer work."),children:(0,f.tZ)(r.ZP,{priority:"danger",size:"sm",children:(0,m.t)("Regenerate Codes")})})]})]}),(0,f.BX)(v.N,{children:[(0,f.tZ)(v.aU,{type:"warning",children:(0,m.t)("Make sure to save a copy of your recovery codes and store them in a safe place.")}),(0,f.tZ)("div",{children:!!s.length&&s.map((e=>(0,f.tZ)(k,{children:e},e)))}),!s.length&&(0,f.tZ)(g.Z,{children:(0,m.t)("You have no more recovery codes to use")})]}),(0,f.tZ)("iframe",{"data-test-id":"frame",name:"printable",style:{display:"none"}})]})};x.displayName="RecoveryCodes";const w=x,b=(0,i.Z)(v.s_,{target:"e1nntg9l2"})("margin-top:",(0,p.Z)(4),";"),B=(0,i.Z)("div",{target:"e1nntg9l1"})("display:grid;grid-auto-flow:column;gap:",(0,p.Z)(1),";"),k=(0,i.Z)(v.Lv,{target:"e1nntg9l0"})("font-family:",(e=>e.theme.text.familyMono),";padding:",(0,p.Z)(2),";");var C=n("./app/views/settings/account/accountSecurity/components/removeConfirm.tsx"),D=n("./app/components/input.tsx"),R=n("./app/views/settings/account/accountSecurity/components/confirmHeader.tsx"),j=n("./app/views/settings/components/text/textBlock.tsx");const S=e=>{const{className:t,isEnrolled:n,devices:s,id:i,onRemoveU2fDevice:a,onRenameU2fDevice:o}=e;if("u2f"!==i||!n)return null;const c=s?.length,d=1===c;return(0,f.BX)(v.s_,{className:t,children:[(0,f.tZ)(v.V9,{children:(0,m.t)("Device name")}),(0,f.BX)(v.N,{children:[!c&&(0,f.tZ)(g.Z,{children:(0,m.t)("You have not added any U2F devices")}),c&&s?.map(((e,t)=>(0,f.tZ)(U,{device:e,isLastDevice:d,onRenameU2fDevice:o,onRemoveU2fDevice:a},t))),(0,f.tZ)(N,{children:(0,f.tZ)(r.ZP,{type:"button",to:"/settings/account/security/mfa/u2f/enroll/",size:"sm",children:(0,m.t)("Add Another Device")})})]})]})};S.displayName="U2fEnrolledDetails";const U=e=>{const{device:t,isLastDevice:n,onRenameU2fDevice:s,onRemoveU2fDevice:i}=e,[o,c]=(0,a.useState)(t.name),[d,p]=(0,a.useState)(!1);return d?(0,f.BX)(X,{children:[(0,f.BX)(_,{children:[(0,f.tZ)(E,{type:"text",value:o,onChange:e=>{c(e.target.value)}}),(0,f.tZ)(P,{date:t.timestamp})]}),(0,f.tZ)($,{children:(0,f.tZ)(r.ZP,{priority:"primary",size:"sm",onClick:()=>{s(t,o),p(!1)},children:"Rename Device"})}),(0,f.tZ)($,{children:(0,f.tZ)(r.ZP,{size:"sm",title:"Cancel rename",onClick:()=>{c(t.name),p(!1)},children:(0,f.tZ)(y.bM,{size:"xs"})})})]},t.name):(0,f.BX)(X,{children:[(0,f.BX)(_,{children:[(0,f.tZ)(z,{children:t.name}),(0,f.tZ)(P,{date:t.timestamp})]}),(0,f.tZ)($,{children:(0,f.tZ)(r.ZP,{size:"sm",onClick:()=>p(!0),children:(0,m.t)("Rename Device")})}),(0,f.tZ)($,{children:(0,f.tZ)(Z.Z,{onConfirm:()=>i(t),disabled:n,message:(0,f.BX)(a.Fragment,{children:[(0,f.tZ)(R.Z,{children:(0,m.t)("Do you want to remove U2F device?")}),(0,f.tZ)(j.Z,{children:(0,m.t)('Are you sure you want to remove the U2F device "%s"?',t.name)})]}),children:(0,f.tZ)(r.ZP,{size:"sm",priority:"danger",children:(0,f.tZ)(l.Z,{disabled:!n,title:(0,m.t)("Can not remove last U2F device"),children:(0,f.tZ)(y.Fz,{size:"xs"})})})})})]},t.name)};U.displayName="Device";const E=(0,i.Z)(D.Z,{target:"eisv0kh7"})("width:50%;margin-right:",(0,p.Z)(2),";"),X=(0,i.Z)(v.Lv,{target:"eisv0kh6"})({name:"1hcx8jb",styles:"padding:0"}),_=(0,i.Z)("div",{target:"eisv0kh5"})("display:flex;align-items:center;justify-content:space-between;flex:1 1;height:72px;padding:",(0,p.Z)(2),";padding-right:0;"),P=(0,i.Z)(d.Z,{target:"eisv0kh4"})("font-size:",(e=>e.theme.fontSizeRelativeSmall),";opacity:0.6;"),z=(0,i.Z)("div",{target:"eisv0kh3"})({name:"82a6rk",styles:"flex:1"}),$=(0,i.Z)("div",{target:"eisv0kh2"})("margin:",(0,p.Z)(2),";"),N=(0,i.Z)(v.Lv,{target:"eisv0kh1"})("justify-content:flex-end;padding:",(0,p.Z)(2),";"),F=(0,i.Z)(S,{target:"eisv0kh0"})("margin-top:",(0,p.Z)(4),";");var I=n("./app/views/settings/components/settingsPageHeader.tsx");const T="/users/me/authenticators/";function q(e){let{label:t,date:n}=e;return(0,f.BX)(a.Fragment,{children:[(0,f.tZ)(Y,{children:t}),(0,f.tZ)("div",{children:n?(0,f.tZ)(d.Z,{date:n}):(0,m.t)("never")})]})}q.displayName="AuthenticatorDate";class A extends h.Z{constructor(){super(...arguments),(0,s.Z)(this,"handleRemove",(async e=>{const{authenticator:t}=this.state;if(!t||!t.authId)return;const n=e?`${e.key_handle}/`:"",s=e?e.name:(0,m.t)("Authenticator");this.setState({loading:!0});try{await this.api.requestPromise(`${T}${t.authId}/${n}`,{method:"DELETE"}),this.props.router.push("/settings/account/security"),(0,o.S9)((0,m.t)("%s has been removed",s))}catch{this.setState({loading:!1}),(0,o.Iw)((0,m.t)("Error removing %s",s))}})),(0,s.Z)(this,"handleRename",(async(e,t)=>{const{authenticator:n}=this.state;if(!n?.authId)return;const s=e?`${e.key_handle}/`:"";this.setState({loading:!0});const i={name:t};try{await this.api.requestPromise(`${T}${n.authId}/${s}`,{method:"PUT",data:i}),this.props.router.push(`/settings/account/security/mfa/${n.authId}`),(0,o.S9)((0,m.t)("Device was renamed"))}catch{this.setState({loading:!1}),(0,o.Iw)((0,m.t)("Error renaming the device"))}}))}getTitle(){return(0,m.t)("Security")}getEndpoints(){const{params:e}=this.props,{authId:t}=e;return[["authenticator",`${T}${t}/`]]}renderBody(){const{authenticator:e}=this.state;if(!e)return null;const{deleteDisabled:t,onRegenerateBackupCodes:n}=this.props;return(0,f.BX)(a.Fragment,{children:[(0,f.tZ)(I.Z,{title:(0,f.BX)(a.Fragment,{children:[(0,f.tZ)("span",{children:e.name}),(0,f.tZ)(V,{"data-test-id":"auth-status-"+(e.isEnrolled?"enabled":"disabled"),enabled:e.isEnrolled})]}),action:(0,f.BX)(H,{children:[e.isEnrolled&&e.allowRotationInPlace&&(0,f.tZ)(r.ZP,{to:`/settings/account/security/mfa/${e.id}/enroll/`,children:(0,m.t)("Rotate Secret Key")}),e.isEnrolled&&e.removeButton&&(0,f.tZ)(l.Z,{title:(0,m.t)("Two-factor authentication is required for at least one organization you're a member of."),disabled:!t,children:(0,f.tZ)(C.Z,{onConfirm:this.handleRemove,disabled:t,children:(0,f.tZ)(r.ZP,{priority:"danger",children:e.removeButton})})})]})}),(0,f.tZ)(j.Z,{children:e.description}),(0,f.BX)(M,{children:[(0,f.tZ)(q,{label:(0,m.t)("Created at"),date:e.createdAt}),(0,f.tZ)(q,{label:(0,m.t)("Last used"),date:e.lastUsedAt})]}),(0,f.tZ)(F,{isEnrolled:e.isEnrolled,id:e.id,devices:e.devices,onRemoveU2fDevice:this.handleRemove,onRenameU2fDevice:this.handleRename}),e.isEnrolled&&e.phone&&(0,f.BX)(K,{children:[(0,m.t)("Confirmation codes are sent to the following phone number"),":",(0,f.tZ)(G,{children:e.phone})]}),(0,f.tZ)(w,{onRegenerateBackupCodes:n,isEnrolled:e.isEnrolled,codes:e.codes})]})}}const L=A,V=(0,i.Z)(c.Z,{target:"e19qrwsm5"})("margin-left:",(0,p.Z)(1),";"),H=(0,i.Z)("div",{target:"e19qrwsm4"})("display:flex;justify-content:center;align-items:center;>*{margin-left:",(0,p.Z)(1),";}"),M=(0,i.Z)("div",{target:"e19qrwsm3"})("display:grid;gap:",(0,p.Z)(2),";grid-template-columns:max-content auto;"),Y=(0,i.Z)("span",{target:"e19qrwsm2"})({name:"1efi8gv",styles:"font-weight:bold"}),K=(0,i.Z)("div",{target:"e19qrwsm1"})("margin-top:",(0,p.Z)(4),";"),G=(0,i.Z)("span",{target:"e19qrwsm0"})("font-weight:bold;margin-left:",(0,p.Z)(1),";")},"./app/views/settings/account/accountSecurity/components/confirmHeader.tsx":(e,t,n)=>{n.d(t,{Z:()=>s});const s=(0,n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1er9gj10"})({name:"73b5fw",styles:"font-size:1.2em;margin-bottom:10px"})},"./app/views/settings/account/accountSecurity/components/removeConfirm.tsx":(e,t,n)=>{n.d(t,{Z:()=>m});var s=n("../node_modules/react/index.js"),i=n("./app/components/confirm.tsx"),a=n("./app/locale.tsx"),o=n("./app/views/settings/account/accountSecurity/components/confirmHeader.tsx"),r=n("./app/views/settings/components/text/textBlock.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=(0,c.BX)(s.Fragment,{children:[(0,c.tZ)(o.Z,{children:(0,a.t)("Do you want to remove this method?")}),(0,c.tZ)(r.Z,{children:(0,a.t)("Removing the last authentication method will disable two-factor authentication completely.")})]}),l=e=>(0,c.tZ)(i.Z,{...e,message:d});l.displayName="RemoveConfirm";const m=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_accountSecurity_accountSecurityDetails_tsx.1aea3c3ab41701f96c5178f089caa17d.js.map