"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionEvents_index_tsx"],{"./app/utils/performance/histogram/constants.tsx":(e,t,n)=>{n.d(t,{d:()=>a});var r=n("./app/locale.tsx");const a=[{label:(0,r.t)("Exclude"),value:"exclude_outliers"},{label:(0,r.t)("Include"),value:"all"}]},"./app/utils/performance/histogram/index.tsx":(e,t,n)=>{n.d(t,{V:()=>p,Z:()=>c});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/react/index.js"),o=n("../node_modules/react-router/es/index.js"),s=n("./app/utils/queryString.tsx"),i=n("./app/utils/performance/histogram/constants.tsx");class l extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"handleResetView",(()=>{const{location:e,zoomKeys:t}=this.props;o.browserHistory.push({pathname:e.pathname,query:p(e,t)})})),(0,r.Z)(this,"handleFilterChange",(e=>{const{location:t,zoomKeys:n}=this.props;o.browserHistory.push({pathname:t.pathname,query:{...p(t,n),dataFilter:e}})}))}isZoomed(){const{location:e,zoomKeys:t}=this.props;return t.map((t=>e.query[t])).some((e=>void 0!==e))}getActiveFilter(){const{location:e}=this.props,t=e.query.dataFilter?(0,s.ro)(e.query.dataFilter):i.d[0].value;return i.d.find((e=>e.value===t))||i.d[0]}render(){const e={isZoomed:this.isZoomed(),handleResetView:this.handleResetView,activeFilter:this.getActiveFilter(),handleFilterChange:this.handleFilterChange,filterOptions:i.d};return this.props.children(e)}}function p(e,t){const n={...e.query,cursor:void 0};return delete n.dataFilter,t.forEach((e=>delete n[e])),n}l.displayName="Histogram";const c=l},"./app/views/performance/transactionSummary/transactionEvents/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/react-router/es/index.js"),a=n("./app/components/layouts/thirds.tsx"),o=n("./app/components/loadingIndicator.tsx"),s=n("./app/locale.tsx"),i=n("./app/utils/analytics.tsx"),l=n("./app/utils/discover/discoverQuery.tsx"),p=n("./app/utils/discover/eventView.tsx"),c=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/fields/index.ts"),d=n("./app/utils/performance/histogram/index.tsx"),m=n("./app/utils/queryString.tsx"),h=n("./app/utils/tokenizeSearch.tsx"),y=n("./app/utils/withOrganization.tsx"),v=n("./app/utils/withProjects.tsx"),g=n("./app/views/performance/transactionSummary/filter.tsx"),f=n("./app/views/performance/transactionSummary/pageLayout.tsx"),w=n("./app/views/performance/transactionSummary/tabs.tsx"),x=n("./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"),Z=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),b=n("../node_modules/lodash/omit.js"),q=n.n(b),F=n("./app/components/button.tsx"),E=n("./app/components/compactSelect.tsx"),_=n("./app/components/datePageFilter.tsx"),j=n("./app/components/environmentPageFilter.tsx"),S=n("./app/components/events/searchBar.tsx"),V=n("./app/components/organizations/pageFilterBar.tsx"),z=n("./app/components/organizations/pageFilters/parse.tsx"),k=n("./app/styles/space.tsx"),C=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),N=n("./app/utils/replays/projectSupportsReplay.tsx"),O=n("./app/utils/useRoutes.tsx"),D=n("./app/views/performance/transactionSummary/transactionEvents/eventsTable.tsx"),P=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),B=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const I=[(0,s.t)("event id"),(0,s.t)("user"),(0,s.t)("operation duration"),(0,s.t)("total duration"),(0,s.t)("trace id"),(0,s.t)("timestamp")];function T(e){const{location:t,organization:n,eventView:r,transactionName:o,spanOperationBreakdownFilter:i,webVital:l,setError:p,totalEventCount:c,projectId:u,projects:d}=e,m=(0,O.V)(),h=r.clone(),y=I.slice(),v=d.find((e=>e.id===u));l&&y.splice(3,0,l);const f=(0,g.Is)(i,t);f&&(h.query=`${h.query} ${f}`.trim(),y.splice(2,1,(0,s.t)("%s duration",i)));const w=n.features.includes("session-replay-ui")&&(0,N.Z)(v);return w&&y.push((0,s.t)("replay")),(0,B.BX)(a.or,{fullWidth:!0,children:[(0,B.tZ)(K,{...e}),(0,B.tZ)(D.Z,{totalEventCount:c,eventView:h,organization:n,routes:m,location:t,setError:p,columnTitles:y,transactionName:o,showReplayCol:w})]})}function K(e){const{eventView:t,location:n,organization:a,spanOperationBreakdownFilter:o,onChangeSpanOperationBreakdownFilter:i,eventsDisplayFilterName:l,onChangeEventsDisplayFilter:p,percentileValues:c}=e,u=(0,m.ro)(n.query.query,""),d=(0,P._S)(o,c);return(0,B.BX)(R,{children:[(0,B.tZ)(g.ZP,{organization:a,currentFilter:o,onChangeFilter:i}),(0,B.BX)(V.Z,{condensed:!0,children:[(0,B.tZ)(j.Z,{}),(0,B.tZ)(_.Z,{alignDropdown:"left"})]}),(0,B.tZ)(H,{organization:a,projectIds:t.project,query:u,fields:t.fields,onSearch:e=>{const t=(0,z.fK)({...n.query||{},query:e}),a=q()(t,"cursor");r.browserHistory.push({pathname:n.pathname,query:a})}}),(0,B.tZ)(E.Z,{triggerProps:{prefix:(0,s.t)("Percentile")},value:l,onChange:e=>p(e.value),options:Object.entries(d).map((e=>{let[t,n]=e;return{value:t,label:n.label}}))}),(0,B.tZ)(F.ZP,{to:t.getResultsViewUrlTarget(a.slug),onClick:()=>{(0,C.Z)("performance_views.all_events.open_in_discover",{organization:a})},children:(0,s.t)("Open in Discover")})]})}T.displayName="EventsContent",K.displayName="Search";const R=(0,Z.Z)("div",{target:"e1rf7xcw1"})("display:grid;gap:",(0,k.Z)(2),";margin-bottom:",(0,k.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(4, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr auto auto;}"),H=(0,Z.Z)(S.Z,{target:"e1rf7xcw0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/6;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),L=T;function A(e){const{location:t,organization:n,projects:r}=e;return(0,B.tZ)(f.ZP,{location:t,organization:n,projects:r,tab:w.Z.Events,getDocumentTitle:$,generateEventView:M,childComponent:W})}function W(e){const{location:t,organization:n,eventView:s,transactionName:p,setError:c,projectId:u,projects:m}=e,y=(0,P.tb)(t),v=(0,g.q0)(t),f=X(t),w=s.clone(),Z=(0,P.Lc)(s);w.sorts=[],w.fields=[{field:"count()",width:-1}];const b=e=>{(0,i.ec)({eventName:"Performance Views: Transaction Events Ops Breakdown Filter Dropdown",eventKey:"performance_views.transactionEvents.ops_filter_dropdown.selection",organization_id:parseInt(n.id,10),action:e});const a=(0,P._S)(v)[y].sort,o=s?.sorts?.[0];let l={};a?.kind===o?.kind&&a?.field===o?.field&&(l=(0,P.qg)(y,e));const p={...(0,d.V)(t,[x.Oo,x.mo]),...(0,g.bz)(e),...l};e===g.f1.None&&delete p.breakdown,r.browserHistory.push({pathname:t.pathname,query:p})},q=e=>{(0,i.ec)({eventName:"Performance Views: Transaction Events Display Filter Dropdown",eventKey:"performance_views.transactionEvents.display_filter_dropdown.selection",organization_id:parseInt(n.id,10),action:e});const a={...(0,d.V)(t,[x.Oo,x.mo]),...(0,P.qg)(e,v)};e===P.q3.p100&&delete a.showTransaction,r.browserHistory.push({pathname:t.pathname,query:a})};return(0,B.tZ)(l.Z,{eventView:w,orgSlug:n.slug,location:t,setError:e=>c(e?.message),referrer:"api.performance.transaction-summary",cursor:"0:0:0",children:e=>{let{isLoading:r,tableData:i}=e;const d=i?.data[0]?.["count()"]?.toLocaleString()||"";return(0,B.tZ)(l.Z,{eventView:Z,orgSlug:n.slug,location:t,referrer:"api.performance.transaction-events",children:e=>{let{isLoading:i,tableData:l}=e;if(r||i)return(0,B.tZ)(a.or,{fullWidth:!0,children:(0,B.tZ)(o.Z,{})});const g=l?.data?.[0],w=(0,P.Kc)(g),x=(e=>{const t=(0,P._S)(v,e)[y],n=s?.clone();if(n&&t?.query){const e=new h.MY(n.query);t.query.forEach((t=>e.setFilterValues(t[0],[t[1]]))),n.query=e.formatString()}return n})(w);return(0,B.tZ)(L,{totalEventCount:d,location:t,organization:n,eventView:x,transactionName:p,spanOperationBreakdownFilter:v,onChangeSpanOperationBreakdownFilter:b,eventsDisplayFilterName:y,onChangeEventsDisplayFilter:q,percentileValues:w,projectId:u,projects:m,webVital:f,setError:c})}})}})}function $(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,s.t)("Events")].join(" — "):[(0,s.t)("Summary"),(0,s.t)("Events")].join(" — ")}function X(e){const t=(0,m.ro)(e.query.webVital,"");if(Object.values(u.Zl).includes(t))return t}function M(e){let{location:t,organization:n,transactionName:r}=e;const a=(0,m.ro)(t.query.query,""),o=new h.MY(a);o.setFilterValues("event.type",["transaction"]),o.setFilterValues("transaction",[r]),Object.keys(o.filters).forEach((e=>{(0,c.h1)(e)&&o.removeFilter(e)}));const s=["id","user.display",c.zD,"transaction.duration","trace","timestamp"];n.features.includes("session-replay-ui")&&s.push("replayId");const i=(0,g.q0)(t);i!==g.f1.None?s.splice(2,1,`spans.${i}`):s.push(...c.$4);const l=X(t);return l&&s.splice(3,0,l),p.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:r,fields:s,query:o.formatString(),projects:[],orderby:(0,m.ro)(t.query.sort,"-timestamp")},t)}A.displayName="TransactionEvents",W.displayName="EventsContentWrapper";const Q=(0,v.Z)((0,y.Z)(A))}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionEvents_index_tsx.f6044f1b11899cc2aa5464d656a3f38f.js.map