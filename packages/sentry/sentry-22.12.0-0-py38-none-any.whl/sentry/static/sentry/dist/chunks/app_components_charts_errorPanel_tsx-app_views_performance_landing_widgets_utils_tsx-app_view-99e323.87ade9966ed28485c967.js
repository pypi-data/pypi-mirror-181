(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_errorPanel_tsx-app_views_performance_landing_widgets_utils_tsx-app_view-99e323"],{"./app/components/charts/chartZoom.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),r=s("../node_modules/moment/moment.js"),i=s.n(r),n=s("../node_modules/query-string/index.js"),l=s("./app/actionCreators/pageFilters.tsx"),d=s("./app/components/charts/components/dataZoomInside.tsx");s("../node_modules/echarts/lib/component/dataZoomSlider.js");const p={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function c(e){return e&&Array.isArray(e)?e:[{...p,...e}]}var m=s("./app/components/charts/components/toolBox.tsx"),u=s("./app/utils/callIfFunction.tsx"),h=s("./app/utils/dates.tsx");const _=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class f extends o.Component{constructor(e){var t;super(e),t=this,(0,a.Z)(this,"history",void 0),(0,a.Z)(this,"currentPeriod",void 0),(0,a.Z)(this,"zooming",null),(0,a.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:_(e.start),end:_(e.end)}})),(0,a.Z)(this,"setPeriod",(function(e){let{period:s,start:a,end:o}=e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:i,onZoom:d,usePageDate:p}=t.props,c=_(a),m=_(o);r&&t.history.push(t.currentPeriod),d?.({period:s,start:c,end:m}),t.zooming=()=>{if(p&&i){const e={...i.location.query,pageStart:a?(0,h.v5)(a):void 0,pageEnd:o?(0,h.v5)(o):void 0,pageStatsPeriod:s??void 0};n.stringify(e)!==n.stringify(i.location.query)&&i.push({pathname:i.location.pathname,query:e})}else(0,l.dR)({period:s,start:c?(0,h.hC)(c):c,end:m?(0,h.hC)(m):m},i);t.saveCurrentPeriod({period:s,start:a,end:o})}})),(0,a.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,a.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,a.Z)(this,"handleDataZoom",((e,t)=>{const s=t.getModel(),{startValue:a,endValue:o}=s._payload.batch[0];if(null===a&&null===o){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(a),t=i().utc(o);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,a.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const s=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));s&&!s._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,u.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:s,disabled:a,children:o,xAxisIndex:r,router:i,onZoom:n,onRestore:l,onChartReady:p,onDataZoom:u,onFinished:_,showSlider:f,chartZoomOptions:g,...y}=this.props,A=e??void 0,S=t?(0,h.hC)(t):void 0,T=s?(0,h.hC)(s):void 0;return o(a?{utc:A,start:S,end:T,...y}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:A,start:S,end:T,dataZoom:f?[...c({xAxisIndex:r,...g}),...(0,d.Z)({xAxisIndex:r,...g})]:(0,d.Z)({xAxisIndex:r,...g}),showTimeInTooltip:!0,toolBox:(0,m.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...y})}}f.displayName="ChartZoom";const g=f},"./app/components/charts/components/dataZoomInside.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o}),s("../node_modules/echarts/lib/component/dataZoomInside.js");const a={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function o(e){return e&&Array.isArray(e)?e:[{...a,...e}]}},"./app/components/charts/components/markArea.tsx":(e,t,s)=>{"use strict";function a(e){return{...e}}s.d(t,{Z:()=>a}),s("../node_modules/echarts/lib/component/markArea.js")},"./app/components/charts/components/toolBox.tsx":(e,t,s)=>{"use strict";function a(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function o(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:a(t),...e}}s.d(t,{Z:()=>o})},"./app/components/charts/errorPanel.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1six6h50"})("display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height||"200px"),";position:relative;border-color:transparent;margin-bottom:0;color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeExtraLarge),";")},"./app/components/charts/lineChart.tsx":(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var a=s("./app/components/charts/series/lineSeries.tsx"),o=s("./app/components/charts/baseChart.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,seriesOptions:s,...i}=e;return(0,r.tZ)(o.Z,{...i,series:t.map((e=>{let{seriesName:t,data:o,dataArray:r,...i}=e;return(0,a.Z)({...s,...i,name:t,data:r||o?.map((e=>{let{value:t,name:s}=e;return[s,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}i.displayName="LineChart"},"./app/components/events/searchBar.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>b}),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/core-js/modules/es.array.includes.js");var a=s("../node_modules/react/index.js"),o=s("../node_modules/@sentry/core/esm/exports.js"),r=s("../node_modules/lodash/assign.js"),i=s.n(r),n=s("../node_modules/lodash/flatten.js"),l=s.n(n),d=s("../node_modules/lodash/memoize.js"),p=s.n(d),c=s("../node_modules/lodash/omit.js"),m=s.n(c),u=s("./app/actionCreators/tags.tsx"),h=s("./app/components/smartSearchBar/index.tsx"),_=s("./app/constants/index.tsx"),f=s("./app/types/index.tsx"),g=s("./app/utils.tsx"),y=s("./app/utils/discover/fields.tsx"),A=s("./app/utils/fields/index.ts"),S=s("./app/utils/measurements/measurements.tsx"),T=s("./app/utils/useApi.tsx"),x=s("./app/utils/withTags.tsx"),R=s("./app/views/dashboardsV2/utils.tsx"),v=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const O=new RegExp(`^${_.c$}|\\${_.ir}`,"g"),w=new Set(Object.keys(y.wZ)),Z=Object.keys(y.wZ).reduce(((e,t)=>(e[t]={...y.wZ[t],kind:A.IV.FIELD},e)),{}),E=m()(Z,y.J8),P=y.$4.reduce(((e,t)=>(e[t]={name:t,kind:A.IV.METRICS},e)),{}),I=Object.keys(y.jg).reduce(((e,t)=>(e[t]={...y.jg[t],kind:A.IV.FIELD},e)),{});function C(e){const{maxSearchItems:t,organization:s,tags:r,omitTags:n,fields:d,projectIds:c,includeSessionTagsValues:_,maxMenuHeight:x,customMeasurements:C}=e,b=(0,T.Z)(),D=(0,a.useRef)(!1),L=(0,a.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(w.has(t.field)||(0,y.GO)(t.field)||(0,R.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:A.IV.FUNCTION}),e)),{}):[])(d)),[d]),j=(0,a.useMemo)((()=>Object.keys(r).reduce(((e,t)=>(e[t]={...r[t],kind:A.IV.TAG},e)),{})),[r]);(0,a.useEffect)((()=>{M.cache.clear?.()}),[c]);const M=p()(((e,t,a)=>{const o=c?.map(String);return(0,y.h1)(e.key)||(0,y.Xr)(e.key)?Promise.resolve([]):(0,u.Fo)({api:b,orgSlug:s.slug,tagKey:e.key,search:t,projectIds:o,endpointParams:a,includeTransactions:!0,includeSessions:_}).then((e=>l()(e.filter((e=>{let{name:t}=e;return(0,g.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:s}=e;return`${s}-${t}`})),$=e=>{let t;!D.current&&Object.keys(r).length>0&&(t=o.Yr({name:"SearchBar.getTagList"}),D.current=!0);const a=((e,t)=>{const s=Object.keys(e).reduce(((t,s)=>(t[s]={...e[s],kind:A.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,s)=>(e[s]={...t[s],kind:A.IV.MEASUREMENT},e)),s):s})(e,C),l=s.features.includes("performance-view")?Object.assign({},a,L,P,Z):Object.assign({},E);i()(l,j,Z,I),l.has={key:A.Sh.HAS,name:"Has property",values:Object.keys(l).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:A.IV.FIELD};const d=n&&n.length>0?m()(l,n):l;if(t){const e=Object.keys(d).length;t.setTag("tags.totalCount",e);const s=[1,5,10,20,50,100,200,300,400,500,600,700,800,900,1e3,1e4].find((t=>e<=t));t.setTag("tags.totalCount.grouped",`<=${s}`),t.finish()}return d};return(0,v.tZ)(S.Z,{children:s=>{let{measurements:a}=s;return(0,v.tZ)(h.Z,{hasRecentSearches:!0,savedSearchType:f.L4.EVENT,onGetTagValues:M,supportedTags:$(a),prepareQuery:e=>e.replace(O,""),maxSearchItems:t,excludedTags:["environment"],maxMenuHeight:x??300,customPerformanceMetrics:C,...e})}})}C.displayName="SearchBar";const b=(0,x.Z)(C)},"./app/components/gridEditable/sortLink.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react-router/es/index.js"),r=s("../node_modules/lodash/omit.js"),i=s.n(r),n=s("./app/components/links/link.tsx"),l=s("./app/icons/index.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{align:t,title:s,canSort:a,generateSortLink:r,onClick:i,direction:n,replace:l}=e;const p=r();if(!p||!a)return(0,d.tZ)(m,{align:t,children:s});const h=n?(0,d.tZ)(u,{size:"xs",direction:"desc"===n?"down":"up"}):null;return(0,d.BX)(c,{align:t,to:p,onClick:e=>{l&&(e.preventDefault(),o.browserHistory.replace(p)),i?.(e)},children:[s," ",h]})}p.displayName="SortLink";const c=(0,a.Z)((e=>{const t=i()(e,["align","css"]);return(0,d.tZ)(n.Z,{...t})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,a.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,a.Z)(l.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),h=p},"./app/utils/performance/anomalies/anomaliesQuery.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d}),s("../node_modules/core-js/modules/es.array.includes.js");var a=s("./app/utils/discover/genericDiscoverQuery.tsx"),o=s("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){return e.data.forEach((e=>e[0]=1e3*e[0])),e}function n(e){const t={...e};return e.y&&e.yhat_lower&&e.yhat_upper&&e.anomalies?(t.y=i(e.y),t.yhat_upper=i(e.yhat_upper),t.yhat_lower=i(e.yhat_lower),t.anomalies=((s=e.anomalies).forEach((e=>{e.start=1e3*e.start,e.end=1e3*e.end})),s),t):t;var s}function l(e){return e.organization.features.includes(o.uT)?(0,r.tZ)(a.ZP,{route:"transaction-anomaly-detection",...e,children:t=>{let{tableData:s,...a}=t;return e.children({data:s&&s.y?n(s):null,...a})}}):(0,r.tZ)("div",{children:e.children({data:null,isLoading:!1,error:null,pageLinks:null})})}l.displayName="AnomaliesSeriesQuery";const d=l},"./app/utils/withTags.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),r=s("./app/stores/tagStore.tsx"),i=s("./app/utils/getDisplayName.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends o.Component{constructor(){super(...arguments),(0,a.Z)(this,"state",{tags:r.Z.getState()}),(0,a.Z)(this,"unsubscribe",r.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...s}=this.props;return(0,n.tZ)(e,{tags:t??this.state.tags,...s})}}return t.displayName="WithTags",(0,a.Z)(t,"displayName",`withTags(${(0,i.Z)(e)})`),t}},"./app/views/performance/landing/widgets/types.tsx":(e,t,s)=>{"use strict";let a,o;s.d(t,{A:()=>o}),function(e){e.ERROR="error",e.LOADING="loading",e.EMPTY="empty",e.DATA="data"}(a||(a={})),function(e){e.histogram="histogram",e.area="area",e.vitals="vitals",e.line_list="line_list",e.trends="trends",e.stacked_bars="stacked_bars"}(o||(o={}))},"./app/views/performance/landing/widgets/utils.tsx":(e,t,s)=>{"use strict";s.d(t,{CJ:()=>n,I2:()=>c,gM:()=>d,hD:()=>y,rp:()=>_,zM:()=>f,zS:()=>p}),s("../node_modules/core-js/modules/es.array.includes.js");var a=s("./app/utils.tsx"),o=s("./app/utils/localStorage.tsx"),r=s("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),i=s("./app/views/performance/landing/widgets/widgetDefinitions.tsx");const n=["children","organization","yAxis","period","start","end","environment","project","referrer"],l={};function d(e){let t={};const s=l;return e.shouldQueryProvideMEPAutoParams&&(t={...t,...s,dataset:"metricsEnhanced"}),e.shouldQueryProvideMEPTransactionParams&&(t={...t,...s,dataset:"discover"}),e.shouldQueryProvideMEPMetricParams&&(t={...t,...s,dataset:"metrics"}),(0,a.z)(t)?void 0:t}const p=[i.s.MOST_RELATED_ERRORS,i.s.MOST_RELATED_ISSUES];function c(e,t){if(!p.includes(t))return d(e)}const m="landing-chart-container",u=(e,t,s)=>`landing-chart-container#${t}#${s}#${e}`;function h(){return JSON.parse(o.Z.getItem(m)||"{}")}const _=(e,t,s,a,o)=>{if(o)return a;const r=u(e,s,t),n=h()?.[r];return n&&Object.values(i.s).includes(n)?n:a},f=(e,t,s,a)=>{const r=u(e,s,t),i=h();i[r]=a,function(e){o.Z.setItem(m,JSON.stringify(e))}(i)},g=[i.s.DURATION_HISTOGRAM,i.s.FCP_HISTOGRAM,i.s.LCP_HISTOGRAM,i.s.FID_HISTOGRAM];function y(e,t,s){return!(0,r.gp)(e)||e.features.includes("performance-mep-reintroduce-histograms")||s.metricSettingState===r.oR.transactionsOnly?t:t.filter((e=>!g.includes(e)))}},"./app/views/performance/landing/widgets/widgetDefinitions.tsx":(e,t,s)=>{"use strict";s.d(t,{W:()=>p,s:()=>l});var a=s("./app/constants/chartPalette.tsx"),o=s("./app/locale.tsx"),r=s("./app/utils/discover/fields.tsx"),i=s("./app/views/performance/data.tsx"),n=s("./app/views/performance/landing/widgets/types.tsx");let l;!function(e){e.DURATION_HISTOGRAM="duration_histogram",e.LCP_HISTOGRAM="lcp_histogram",e.FCP_HISTOGRAM="fcp_histogram",e.FID_HISTOGRAM="fid_histogram",e.APDEX_AREA="apdex_area",e.P50_DURATION_AREA="p50_duration_area",e.P75_DURATION_AREA="p75_duration_area",e.P95_DURATION_AREA="p95_duration_area",e.P99_DURATION_AREA="p99_duration_area",e.P75_LCP_AREA="p75_lcp_area",e.TPM_AREA="tpm_area",e.FAILURE_RATE_AREA="failure_rate_area",e.USER_MISERY_AREA="user_misery_area",e.WORST_LCP_VITALS="worst_lcp_vitals",e.WORST_FCP_VITALS="worst_fcp_vitals",e.WORST_CLS_VITALS="worst_cls_vitals",e.WORST_FID_VITALS="worst_fid_vitals",e.MOST_IMPROVED="most_improved",e.MOST_REGRESSED="most_regressed",e.MOST_RELATED_ERRORS="most_related_errors",e.MOST_RELATED_ISSUES="most_related_issues",e.SLOW_HTTP_OPS="slow_http_ops",e.SLOW_DB_OPS="slow_db_ops",e.SLOW_RESOURCE_OPS="slow_resource_ops",e.SLOW_BROWSER_OPS="slow_browser_ops",e.COLD_STARTUP_AREA="cold_startup_area",e.WARM_STARTUP_AREA="warm_startup_area",e.SLOW_FRAMES_AREA="slow_frames_area",e.FROZEN_FRAMES_AREA="frozen_frames_area",e.MOST_SLOW_FRAMES="most_slow_frames",e.MOST_FROZEN_FRAMES="most_frozen_frames",e.SPAN_OPERATIONS="span_operations"}(l||(l={}));const d=a.Z[5],p=e=>{let{organization:t}=e;return{[l.DURATION_HISTOGRAM]:{title:(0,o.t)("Duration Distribution"),titleTooltip:(0,i.$r)(t,i.V$.DURATION_DISTRIBUTION),fields:["transaction.duration"],dataType:n.A.histogram,chartColor:d[5]},[l.LCP_HISTOGRAM]:{title:(0,o.t)("LCP Distribution"),titleTooltip:(0,i.$r)(t,i.V$.DURATION_DISTRIBUTION),fields:["measurements.lcp"],dataType:n.A.histogram,chartColor:d[5]},[l.FCP_HISTOGRAM]:{title:(0,o.t)("FCP Distribution"),titleTooltip:(0,i.$r)(t,i.V$.DURATION_DISTRIBUTION),fields:["measurements.fcp"],dataType:n.A.histogram,chartColor:d[5]},[l.FID_HISTOGRAM]:{title:(0,o.t)("FID Distribution"),titleTooltip:(0,i.$r)(t,i.V$.DURATION_DISTRIBUTION),fields:["measurements.fid"],dataType:n.A.histogram,chartColor:d[5]},[l.WORST_LCP_VITALS]:{title:(0,o.t)("Worst LCP Web Vitals"),titleTooltip:(0,i.$r)(t,i.V$.LCP),fields:["measurements.lcp"],vitalStops:{poor:4e3,meh:2500},dataType:n.A.vitals},[l.WORST_FCP_VITALS]:{title:(0,o.t)("Worst FCP Web Vitals"),titleTooltip:(0,i.$r)(t,i.V$.FCP),fields:["measurements.fcp"],vitalStops:{poor:3e3,meh:1e3},dataType:n.A.vitals},[l.WORST_FID_VITALS]:{title:(0,o.t)("Worst FID Web Vitals"),titleTooltip:(0,i.$r)(t,i.V$.FID),fields:["measurements.fid"],vitalStops:{poor:300,meh:100},dataType:n.A.vitals},[l.WORST_CLS_VITALS]:{title:(0,o.t)("Worst CLS Web Vitals"),titleTooltip:(0,i.$r)(t,i.V$.CLS),fields:["measurements.cls"],vitalStops:{poor:.25,meh:.1},dataType:n.A.vitals},[l.TPM_AREA]:{title:(0,o.t)("Transactions Per Minute"),titleTooltip:(0,i.$r)(t,i.V$.TPM),fields:["tpm()"],dataType:n.A.area,chartColor:d[1],allowsOpenInDiscover:!0},[l.APDEX_AREA]:{title:(0,o.t)("Apdex"),titleTooltip:(0,i.$r)(t,i.V$.APDEX),fields:["apdex()"],dataType:n.A.area,chartColor:d[4],allowsOpenInDiscover:!0},[l.P50_DURATION_AREA]:{title:(0,o.t)("p50 Duration"),titleTooltip:(0,i.$r)(t,i.V$.P50),fields:["p50(transaction.duration)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.P75_DURATION_AREA]:{title:(0,o.t)("p75 Duration"),titleTooltip:(0,i.$r)(t,i.V$.P75),fields:["p75(transaction.duration)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.P95_DURATION_AREA]:{title:(0,o.t)("p95 Duration"),titleTooltip:(0,i.$r)(t,i.V$.P95),fields:["p95(transaction.duration)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.P99_DURATION_AREA]:{title:(0,o.t)("p99 Duration"),titleTooltip:(0,i.$r)(t,i.V$.P99),fields:["p99(transaction.duration)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.P75_LCP_AREA]:{title:(0,o.t)("p75 LCP"),titleTooltip:(0,i.$r)(t,i.V$.P75),fields:["p75(measurements.lcp)"],dataType:n.A.area,chartColor:d[1],allowsOpenInDiscover:!0},[l.FAILURE_RATE_AREA]:{title:(0,o.t)("Failure Rate"),titleTooltip:(0,i.$r)(t,i.V$.FAILURE_RATE),fields:["failure_rate()"],dataType:n.A.area,chartColor:d[2],allowsOpenInDiscover:!0},[l.USER_MISERY_AREA]:{title:(0,o.t)("User Misery"),titleTooltip:(0,i.$r)(t,i.V$.USER_MISERY),fields:["user_misery()"],dataType:n.A.area,chartColor:d[0],allowsOpenInDiscover:!0},[l.COLD_STARTUP_AREA]:{title:(0,o.t)("Cold Startup Time"),titleTooltip:(0,i.$r)(t,i.V$.APP_START_COLD),fields:["p75(measurements.app_start_cold)"],dataType:n.A.area,chartColor:d[4],allowsOpenInDiscover:!0},[l.WARM_STARTUP_AREA]:{title:(0,o.t)("Warm Startup Time"),titleTooltip:(0,i.$r)(t,i.V$.APP_START_WARM),fields:["p75(measurements.app_start_warm)"],dataType:n.A.area,chartColor:d[3],allowsOpenInDiscover:!0},[l.SLOW_FRAMES_AREA]:{title:(0,o.t)("Slow Frames"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_FRAMES),fields:["p75(measurements.frames_slow_rate)"],dataType:n.A.area,chartColor:d[0],allowsOpenInDiscover:!0},[l.FROZEN_FRAMES_AREA]:{title:(0,o.t)("Frozen Frames"),titleTooltip:(0,i.$r)(t,i.V$.FROZEN_FRAMES),fields:["p75(measurements.frames_frozen_rate)"],dataType:n.A.area,chartColor:d[5],allowsOpenInDiscover:!0},[l.MOST_RELATED_ERRORS]:{title:(0,o.t)("Most Related Errors"),titleTooltip:(0,i.$r)(t,i.V$.MOST_ERRORS),fields:["failure_count()"],dataType:n.A.line_list,chartColor:d[0]},[l.MOST_RELATED_ISSUES]:{title:(0,o.t)("Most Related Issues"),titleTooltip:(0,i.$r)(t,i.V$.MOST_ISSUES),fields:["count()"],dataType:n.A.line_list,chartColor:d[0]},[l.SLOW_HTTP_OPS]:{title:(0,o.t)("Slow HTTP Ops"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.http)"],dataType:n.A.line_list,chartColor:d[0]},[l.SLOW_BROWSER_OPS]:{title:(0,o.t)("Slow Browser Ops"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.browser)"],dataType:n.A.line_list,chartColor:d[0]},[l.SLOW_RESOURCE_OPS]:{title:(0,o.t)("Slow Resource Ops"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.resource)"],dataType:n.A.line_list,chartColor:d[0]},[l.SLOW_DB_OPS]:{title:(0,o.t)("Slow DB Ops"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.db)"],dataType:n.A.line_list,chartColor:d[0]},[l.MOST_SLOW_FRAMES]:{title:(0,o.t)("Most Slow Frames"),titleTooltip:(0,i.$r)(t,i.V$.SLOW_FRAMES),fields:["avg(measurements.frames_slow)"],dataType:n.A.line_list,chartColor:d[0]},[l.MOST_FROZEN_FRAMES]:{title:(0,o.t)("Most Frozen Frames"),titleTooltip:(0,i.$r)(t,i.V$.FROZEN_FRAMES),fields:["avg(measurements.frames_frozen)"],dataType:n.A.line_list,chartColor:d[0]},[l.MOST_IMPROVED]:{title:(0,o.t)("Most Improved"),titleTooltip:(0,o.t)("This compares the baseline (%s) of the past with the present.","improved"),fields:[],dataType:n.A.trends},[l.MOST_REGRESSED]:{title:(0,o.t)("Most Regressed"),titleTooltip:(0,o.t)("This compares the baseline (%s) of the past with the present.","regressed"),fields:[],dataType:n.A.trends},[l.SPAN_OPERATIONS]:{title:(0,o.t)("Span Operations"),titleTooltip:"",fields:r.$4.map((e=>`p75(${e})`)),dataType:n.A.stacked_bars}}}},"./app/views/performance/transactionSummary/transactionAnomalies/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>pe});var a=s("./app/locale.tsx"),o=s("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),r=s("./app/utils/withOrganization.tsx"),i=s("./app/utils/withProjects.tsx"),n=s("./app/views/performance/transactionSummary/pageLayout.tsx"),l=s("./app/views/performance/transactionSummary/tabs.tsx"),d=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=s("../node_modules/react/index.js"),c=s("../node_modules/react-router/es/index.js"),m=s("../node_modules/lodash/omit.js"),u=s.n(m),h=s("./app/components/charts/components/markArea.tsx"),_=s("./app/components/charts/components/markLine.tsx"),f=s("./app/components/datePageFilter.tsx"),g=s("./app/components/environmentPageFilter.tsx"),y=s("./app/components/events/searchBar.tsx"),A=s("./app/components/layouts/thirds.tsx"),S=s("./app/components/organizations/pageFilterBar.tsx"),T=s("./app/components/organizations/pageFilters/parse.tsx"),x=s("./app/styles/space.tsx"),R=s("./app/utils.tsx"),v=s("./app/utils/performance/anomalies/anomaliesQuery.tsx"),O=s("./app/utils/queryString.tsx"),w=s("./app/utils/theme.tsx"),Z=s("./app/views/performance/landing/widgets/components/performanceWidget.tsx"),E=s("./app/views/performance/landing/widgets/components/selectableList.tsx"),P=s("./app/views/performance/landing/widgets/widgetDefinitions.tsx"),I=s("./app/components/count.tsx"),C=s("./app/components/gridEditable/index.tsx"),b=s("./app/components/gridEditable/sortLink.tsx"),D=s("./app/icons/index.tsx"),L=s("./app/utils/discover/fieldRenderers.tsx"),j=s("./app/utils/discover/fields.tsx"),M=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const $=e=>({anomaly:`#${e.id}`,confidence:e.confidence,timestamp:new Date(e.start),timeInterval:e.end-e.start,expected:e.expected,received:e.received});function k(e){const{location:t,organization:s,isLoading:a,anomalies:o}=e,r=o?.map($)||[];return(0,M.tZ)(C.ZP,{isLoading:a,data:r,columnOrder:Object.values(H),columnSortBy:[],grid:{renderHeadCell:F,renderBodyCell:N(t,s)},location:t})}function F(e,t){const s=(0,j.qG)(e.key,B[e.key]);return(0,M.tZ)(b.Z,{title:e.name,align:s,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function N(e,t){return(s,o)=>{const r=(0,L.Js)(s.key,B);return"confidence"===s.key?(0,M.tZ)(U,{children:"low"===o.confidence?(0,M.tZ)(z,{children:(0,a.t)("Low Confidence")}):(0,M.tZ)(W,{children:(0,a.t)("High Confidence")})}):"expected"===s.key?(0,M.tZ)(V,{children:(0,M.tZ)(I.Z,{value:o.expected})}):"received"===s.key?(0,M.BX)(V,{children:[(0,M.tZ)(I.Z,{value:o.received}),(0,M.tZ)(D.CC,{size:"sm",direction:o.received>o.expected?"up":"down"})]}):r(o,{location:e,organization:t})}}k.displayName="AnomaliesTable",F.displayName="renderHeadCell";const V=(0,d.Z)("div",{target:"e1uhfujm3"})("display:flex;justify-content:flex-end;align-items:center;gap:",(0,x.Z)(.5),";"),z=(0,d.Z)("div",{target:"e1uhfujm2"})("color:",(e=>e.theme.yellow400),";"),W=(0,d.Z)("div",{target:"e1uhfujm1"})("color:",(e=>e.theme.red400),";"),U=(0,d.Z)("div",{target:"e1uhfujm0"})({name:"1qetfgc",styles:"text-align:left;justify-self:flex-end;flex-grow:1"}),H={anomaly:{key:"anomaly",name:(0,a.t)("Anomaly"),width:C.z7},confidence:{key:"confidence",name:(0,a.t)("Confidence"),width:C.z7},timeInterval:{key:"timeInterval",name:(0,a.t)("Time Interval"),width:C.z7},timestamp:{key:"timestamp",name:(0,a.t)("Timestamp"),width:C.z7},expected:{key:"expected",name:(0,a.t)("Expected"),width:C.z7},received:{key:"received",name:(0,a.t)("Received"),width:C.z7}},B={anomaly:"string",confidence:"string",timeInterval:"duration",timestamp:"date",expected:"number",received:"number"};var G=s("./app/components/charts/chartZoom.tsx"),q=s("./app/components/charts/lineChart.tsx"),X=s("./app/utils/dates.tsx"),Q=s("./app/utils/discover/charts.tsx"),J=s("./app/utils/useLocation.tsx"),Y=s("./app/utils/useRouter.tsx");function K(e){const t=(0,Y.Z)(),s=(0,J.T)(),{data:o,statsPeriod:r,height:i,start:n,end:l}=e,d=n?(0,X.hC)(n):null,p=l?(0,X.hC)(l):null,{utc:c}=(0,T.fK)(s.query),m={legend:{right:10,top:5,data:[(0,a.t)("High Confidence"),(0,a.t)("Low Confidence")]},seriesOptions:{showSymbol:!1},height:i,tooltip:{trigger:"axis",valueFormatter:(e,t)=>(0,Q.CX)(e,(0,j.Px)(t))},xAxis:void 0,yAxis:{axisLabel:{formatter:e=>(0,Q.gu)(e,"number")}}};return(0,M.tZ)(G.Z,{router:t,period:r,start:d,end:p,utc:"true"===c,children:e=>(0,M.tZ)(q.w,{...e,series:o,...m})})}K.displayName="AnomalyChart";const ee=e=>`#${e.id}`,te=e=>[{name:ee(e),xAxis:e.start},{xAxis:e.end}],se=(e,t)=>{const s=[],a=t.data;if(!a)return{isLoading:t.isLoading,isErrored:!!t.error,data:void 0,hasData:!1,loading:t.isLoading};s.push({seriesName:"tpm()",data:a.y.data.map((e=>{let[t,[{count:s}]]=e;return{name:t,value:s}}))}),s.push({seriesName:"tpm() lower bound",data:a.yhat_lower.data.map((e=>{let[t,[{count:s}]]=e;return{name:t,value:s}}))}),s.push({seriesName:"tpm() upper bound",data:a.yhat_upper.data.map((e=>{let[t,[{count:s}]]=e;return{name:t,value:s}}))});const o=t.data.anomalies,r=o.filter((e=>"high"===e.confidence)).map(te),i=o.filter((e=>"high"===e.confidence)).map((e=>({xAxis:e.start,name:ee(e)}))),n=o.filter((e=>"low"===e.confidence)).map(te),l=o.filter((e=>"low"===e.confidence)).map((e=>({xAxis:e.start,name:ee(e)})));return s.push({seriesName:"High Confidence",color:w.ZP.red300,data:[],silent:!0,markLine:(0,_.Z)({animation:!1,lineStyle:{color:w.ZP.red300,type:"solid",width:1,opacity:1},data:i,label:{show:!0,rotate:90,color:w.ZP.red300,position:"insideEndBottom",fontSize:"10",offset:[5,5],formatter:e=>`${e.data.name}`}}),markArea:(0,h.Z)({itemStyle:{color:w.ZP.red300,opacity:.2},label:{show:!1},data:r})}),s.push({seriesName:"Low Confidence",color:w.ZP.yellow200,data:[],markLine:(0,_.Z)({animation:!1,lineStyle:{color:w.ZP.yellow200,type:"solid",width:1,opacity:1},data:l,label:{show:!0,rotate:90,color:w.ZP.yellow300,position:"insideEndBottom",fontSize:"10",offset:[5,5],formatter:e=>`${e.data.name}`}}),markArea:(0,h.Z)({itemStyle:{color:w.ZP.yellow200,opacity:.2},label:{show:!1},data:n})}),{isLoading:t.isLoading,isErrored:!!t.error,data:s,hasData:!0,loading:t.isLoading}};function ae(e){const t=w.ZP.charts.colors[0],s=(0,p.useMemo)((()=>({fields:"",component:t=>(0,M.tZ)(p.Fragment,{children:t.children(e.queryData)}),transform:se})),[e.queryData]);return(0,M.tZ)(Z.I,{...e,title:(0,a.t)("Transaction Count"),titleTooltip:(0,a.t)("Represents transaction count across time, with added visualizations to highlight anomalies in your data."),fields:[""],chartSetting:P.s.TPM_AREA,chartDefinition:P.W[P.s.TPM_AREA],Subtitle:()=>(0,M.tZ)("div",{}),HeaderActions:()=>(0,M.tZ)("div",{}),EmptyComponent:E.xq,Queries:{chart:s},Visualizations:[{component:e=>{const s=e.widgetData.chart.data?.map((e=>("tpm()"!==e.seriesName&&(e.lineStyle={type:"dashed",color:t,width:1.5}),"score"===e.seriesName&&(e.lineStyle={color:w.ZP.red400}),e)))??[];return(0,M.tZ)(K,{...e,data:s,height:250,statsPeriod:void 0,start:null,end:null})},height:250}]})}function oe(e){const{location:t,organization:s,eventView:a}=e,o=(0,O.ro)(t.query.query,"");return(0,M.BX)(A.or,{fullWidth:!0,children:[(0,M.BX)(re,{children:[(0,M.BX)(S.Z,{condensed:!0,children:[(0,M.tZ)(g.Z,{}),(0,M.tZ)(f.Z,{alignDropdown:"left"})]}),(0,M.tZ)(y.Z,{organization:s,projectIds:a.project,query:o,fields:a.fields,onSearch:(r="query",function(e){const s=(0,T.fK)({...t.query||{},[r]:e}),a=["cursor"];(0,R.ri)(e)||a.push(r);const o=u()(s,a);c.browserHistory.push({...t,query:o})})})]}),(0,M.tZ)(v.Z,{organization:s,location:t,eventView:a,children:t=>(0,M.BX)(p.Fragment,{children:[(0,M.tZ)(ae,{...e,queryData:t}),(0,M.tZ)(k,{anomalies:t.data?.anomalies,...e,isLoading:t.isLoading})]})})]});var r}ae.displayName="Anomalies",oe.displayName="AnomaliesContent";const re=(0,d.Z)("div",{target:"eoagdn90"})("display:grid;gap:",(0,x.Z)(2),";margin-bottom:",(0,x.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:auto 1fr;}"),ie=oe;var ne=s("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx");function le(e){const{location:t,organization:s,projects:a}=e;return(0,M.tZ)(o.kP,{children:(0,M.tZ)(n.ZP,{location:t,organization:s,projects:a,tab:l.Z.Anomalies,generateEventView:ne.h2,getDocumentTitle:de,childComponent:ie})})}function de(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,a.t)("Performance")].join(" - "):[(0,a.t)("Summary"),(0,a.t)("Performance")].join(" - ")}le.displayName="TransactionAnomalies";const pe=(0,i.Z)((0,r.Z)(le))},"../node_modules/lodash/assign.js":(e,t,s)=>{var a=s("../node_modules/lodash/_assignValue.js"),o=s("../node_modules/lodash/_copyObject.js"),r=s("../node_modules/lodash/_createAssigner.js"),i=s("../node_modules/lodash/isArrayLike.js"),n=s("../node_modules/lodash/_isPrototype.js"),l=s("../node_modules/lodash/keys.js"),d=Object.prototype.hasOwnProperty,p=r((function(e,t){if(n(t)||i(t))o(t,l(t),e);else for(var s in t)d.call(t,s)&&a(e,s,t[s])}));e.exports=p}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_errorPanel_tsx-app_views_performance_landing_widgets_utils_tsx-app_view-99e323.a80c022b5802df5a61961e211d48fc1c.js.map