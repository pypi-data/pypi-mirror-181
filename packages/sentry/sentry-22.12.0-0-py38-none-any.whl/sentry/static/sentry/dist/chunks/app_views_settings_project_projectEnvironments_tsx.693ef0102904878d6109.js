"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectEnvironments_tsx"],{"./app/components/acl/access.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),o=s("./app/components/alert.tsx"),r=s("./app/locale.tsx"),a=s("./app/utils/isRenderFunc.tsx"),d=s("./app/utils/withConfig.tsx"),c=s("./app/utils/withOrganization.tsx");const p=(0,s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(o.Z,{type:"error",showIcon:!0,children:(0,r.t)("You do not have sufficient permissions to access this.")});class l extends i.Component{render(){const{organization:e,config:t,access:s,requireAll:n,isSuperuser:i,renderNoAccessMessage:o,children:r}=this.props,{access:d}=e||{access:[]},c=!s||s[n?"every":"some"]((e=>d.includes(e))),l=!(!t.user||!t.user.isSuperuser),m={hasAccess:c,hasSuperuser:l},h=c&&(!i||l);return h||"function"!=typeof o?!h&&o?p:(0,a.l)(r)?r(m):h?r:null:o(m)}}l.displayName="Access",(0,n.Z)(l,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const m=(0,c.Z)((0,d.Z)(l))},"./app/components/links/listLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react-router/es/index.js"),o=s("../node_modules/classnames/index.js"),r=s.n(o),a=s("../node_modules/query-string/index.js"),d=s("./app/utils/useRouter.tsx"),c=s("./app/utils/withDomainRequired.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{children:t,className:s,isActive:n,query:o,to:l,activeClassName:m="active",index:u=!1,disabled:v=!1,...x}=e;const Z=(0,d.Z)(),g=o?a.parse(o):void 0,y="string"==typeof l?{pathname:l,query:g}:l,j=(0,c.D)(y),b=n?.(j,u)??Z.isActive(j,u);return(0,p.tZ)(h,{className:r()({[m]:b},s),disabled:v,children:(0,p.tZ)(i.Link,{...x,onlyActiveOnIndex:u,to:v?"":j,children:t})})}l.displayName="ListLink";const m=l,h=(0,n.Z)("li",{shouldForwardProp:e=>"disabled"!==e,target:"er8tqc10"})((e=>e.disabled&&`\n   a {\n    color:${e.theme.disabled} !important;\n    pointer-events: none;\n    :hover {\n      color: ${e.theme.disabled}  !important;\n    }\n   }\n`),";")},"./app/utils/environment.tsx":(e,t,s)=>{function n(e){return e.name?encodeURIComponent(e.name):e.displayName?encodeURIComponent(e.displayName):"none"}function i(e){return e.name||e.displayName||"(No Environment)"}s.d(t,{G:()=>i,z:()=>n})},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var n=s("./app/components/acl/access.tsx"),i=s("./app/components/alert.tsx"),o=s("./app/locale.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=e=>{let{access:t=["project:write"],...s}=e;return(0,r.tZ)(n.Z,{access:t,children:e=>{let{hasAccess:t}=e;return!t&&(0,r.tZ)(i.Z,{"data-test-id":"project-permission-alert",type:"warning",...s,children:(0,o.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")})}})};a.displayName="PermissionAlert";const d=a},"./app/views/settings/project/projectEnvironments.tsx":(e,t,s)=>{s.r(t),s.d(t,{ProjectEnvironments:()=>A,default:()=>I});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),r=s("./app/actionCreators/indicator.tsx"),a=s("./app/components/acl/access.tsx"),d=s("./app/components/button.tsx"),c=s("./app/components/emptyMessage.tsx"),p=s("./app/components/links/listLink.tsx"),l=s("./app/components/loadingIndicator.tsx"),m=s("./app/components/navTabs.tsx"),h=s("./app/components/panels/index.tsx"),u=s("./app/components/sentryDocumentTitle.tsx"),v=s("./app/constants/index.tsx"),x=s("./app/locale.tsx"),Z=s("./app/styles/space.tsx"),g=s("./app/utils/environment.tsx"),y=s("./app/utils/recreateRoute.tsx"),j=s("./app/utils/withApi.tsx"),b=s("./app/views/settings/components/settingsPageHeader.tsx"),w=s("./app/views/settings/project/permissionAlert.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class A extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{project:null,environments:null,isLoading:!0}),(0,n.Z)(this,"toggleEnv",((e,t)=>{const{orgId:s,projectId:n}=this.props.params;this.props.api.request(`/projects/${s}/${n}/environments/${(0,g.z)(e)}/`,{method:"PUT",data:{name:e.name,isHidden:t},success:()=>{(0,r.S9)((0,x._N)("Updated [environment]",{environment:(0,g.G)(e)}))},error:()=>{(0,r.Iw)((0,x._N)("Unable to update [environment]",{environment:(0,g.G)(e)}))},complete:this.fetchData.bind(this)})}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.location.pathname.endsWith("hidden/")!==e.location.pathname.endsWith("hidden/")&&this.fetchData()}fetchData(){const e=this.props.location.pathname.endsWith("hidden/");this.state.isLoading||this.setState({isLoading:!0});const{orgId:t,projectId:s}=this.props.params;this.props.api.request(`/projects/${t}/${s}/environments/`,{query:{visibility:e?"hidden":"visible"},success:e=>{this.setState({environments:e,isLoading:!1})}})}fetchProjectDetails(){const{orgId:e,projectId:t}=this.props.params;this.props.api.request(`/projects/${e}/${t}/`,{success:e=>{this.setState({project:e})}})}renderEmpty(){const e=this.props.location.pathname.endsWith("hidden/")?(0,x.t)("You don't have any hidden environments."):(0,x.t)("You don't have any environments yet.");return(0,f.tZ)(c.Z,{children:e})}renderAllEnvironmentsSystemRow(){return this.props.location.pathname.endsWith("hidden/")?null:(0,f.tZ)(_,{name:v.UZ,environment:{id:v.UZ,name:v.UZ,displayName:v.UZ},isSystemRow:!0})}renderEnvironmentList(e){const t=this.props.location.pathname.endsWith("hidden/"),s=t?(0,x.t)("Show"):(0,x.t)("Hide");return(0,f.BX)(o.Fragment,{children:[this.renderAllEnvironmentsSystemRow(),e.map((e=>(0,f.tZ)(_,{name:e.name,environment:e,isHidden:t,onHide:this.toggleEnv,actionText:s,shouldShowAction:!0},e.id)))]})}renderBody(){const{environments:e,isLoading:t}=this.state;return t?(0,f.tZ)(l.Z,{}):(0,f.tZ)(h.N,{children:e?.length?this.renderEnvironmentList(e):this.renderEmpty()})}render(){const{routes:e,params:t,location:s}=this.props,n=s.pathname.endsWith("hidden/"),i=(0,y.Z)("",{routes:e,params:t,stepBack:-1});return(0,f.BX)("div",{children:[(0,f.tZ)(u.Z,{title:(0,x.t)("Environments"),projectSlug:t.projectId}),(0,f.tZ)(b.Z,{title:(0,x.t)("Manage Environments"),tabs:(0,f.BX)(m.Z,{underlined:!0,children:[(0,f.tZ)(p.Z,{to:i,index:!0,isActive:()=>!n,children:(0,x.t)("Environments")}),(0,f.tZ)(p.Z,{to:`${i}hidden/`,index:!0,isActive:()=>n,children:(0,x.t)("Hidden")})]})}),(0,f.tZ)(w.Z,{}),(0,f.BX)(h.s_,{children:[(0,f.tZ)(h.V9,{children:n?(0,x.t)("Hidden"):(0,x.t)("Active Environments")}),this.renderBody()]})]})}}function _(e){let{environment:t,name:s,onHide:n,shouldShowAction:i=!1,isSystemRow:r=!1,isHidden:d=!1,actionText:c=""}=e;return(0,f.BX)(E,{children:[(0,f.tZ)(N,{children:r?(0,x.t)("All Environments"):s}),(0,f.tZ)(a.Z,{access:["project:write"],children:e=>{let{hasAccess:s}=e;return(0,f.tZ)(o.Fragment,{children:i&&n&&(0,f.tZ)(S,{size:"xs",disabled:!s,onClick:()=>n(t,!d),children:c})})}})]})}A.displayName="ProjectEnvironments",_.displayName="EnvironmentRow";const E=(0,i.Z)(h.Lv,{target:"e1heia562"})({name:"1tz8p38",styles:"align-items:center;justify-content:space-between"}),N=(0,i.Z)("div",{target:"e1heia561"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),S=(0,i.Z)(d.ZP,{target:"e1heia560"})("margin-left:",(0,Z.Z)(.5),";"),I=(0,j.Z)(A)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectEnvironments_tsx.5eeea1c6c0cf5f88ce8341af523afa7c.js.map