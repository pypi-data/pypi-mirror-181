"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_featureFeedback_index_tsx"],{"./app/components/featureFeedback/index.tsx":(e,t,a)=>{a.d(t,{z:()=>X});var s=a("../node_modules/react/index.js"),o=a("./app/actionCreators/modal.tsx"),n=a("./app/components/button.tsx"),i=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=a("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),d=a("../node_modules/@sentry/browser/esm/client.js"),l=a("../node_modules/@sentry/browser/esm/transports/fetch.js"),c=a("../node_modules/@sentry/browser/esm/stack-parsers.js"),u=a("../node_modules/@sentry/browser/esm/sdk.js"),p=a("../node_modules/lodash/cloneDeep.js"),m=a.n(p),b=a("./app/actionCreators/indicator.tsx"),f=a("./app/components/alert.tsx"),h=a("./app/components/buttonBar.tsx"),y=a("./app/components/forms/controls/textarea.tsx"),k=a("./app/components/forms/field/index.tsx"),x=a("./app/components/forms/fields/selectField.tsx"),Z=a("./app/components/links/externalLink.tsx"),g=a("./app/locale.tsx"),j=a("./app/stores/configStore.tsx"),v=a("./app/stores/organizationStore.tsx"),C=a("./app/stores/useLegacyStore.tsx"),S=a("./app/styles/space.tsx"),w=a("./app/utils.tsx"),F=a("./app/utils/useLocation.tsx"),_=a("./app/utils/useMedia.tsx"),P=a("./app/utils/useProjects.tsx"),B=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const I=new d.R({dsn:"https://3c5ef4e344a04a0694d187a1272e96de@o1.ingest.sentry.io/6356259",transport:l.f,stackParser:c.Dt,integrations:u.SS}),N=[(0,g.t)("I don't like this feature"),(0,g.t)("I like this feature"),(0,g.t)("Other reason")];function $(e){let{Header:t,Body:a,Footer:o,closeModal:i,...d}=e;const{organization:l}=(0,C.X)(v.Z),{projects:c,initiallyLoaded:u}=(0,P.Z)(),p=(0,F.T)(),S=(0,r.u)(),$=j.Z.get("user"),q=j.Z.get("isSelfHosted"),[M,X]=(0,s.useState)(void 0===d.children?{subject:void 0,additionalInfo:void 0}:d.initialData),A=(0,_.Z)(`(max-width: ${S.breakpoints.small})`),D=(0,s.useMemo)((()=>{if(u&&p.query.project)return c.find((e=>e.id===p.query.project))}),[u,c,p.query.project]),H=(0,s.useCallback)((e=>{const t=`${d.featureName} feedback by ${$.email}`,a={message:t,request:{url:p.pathname},extra:{orgFeatures:l?.features??[],orgAccess:l?.access??[],projectFeatures:D?.features??[]},tags:{featureName:d.featureName},user:$,level:"info"};if(void 0===d.children){const e=d.feedbackTypes??N;I.captureEvent({...a,contexts:{feedback:{additionalInfo:M.additionalInfo?.trim()?M.additionalInfo:null}},message:M.additionalInfo?.trim()?`${t} - ${e[M.subject]} - ${M.additionalInfo}`:`${t} - ${e[M.subject]}`})}else I.captureEvent({...a,...e??{}});(0,b.S9)((0,g.t)("Thanks for taking the time to provide us feedback!")),i()}),[p.pathname,i,l?.features,l?.access,D?.features,$,d,M]),L=(0,s.useCallback)((e=>{let{children:a}=e;return(0,B.tZ)(t,{closeButton:!0,children:(0,B.tZ)("h3",{children:a})})}),[t]),E=(0,s.useCallback)((e=>{let{onBack:t,onNext:a,submitEventData:s,primaryDisabledReason:r,secondaryAction:l}=e;return(0,B.BX)(o,{children:[l&&(0,B.tZ)(z,{children:l}),t&&(0,B.tZ)(T,{children:(0,B.tZ)(n.ZP,{onClick:t,children:(0,g.t)("Back")})}),(0,B.BX)(h.ZP,{gap:1,children:[(0,B.tZ)(n.ZP,{onClick:i,children:(0,g.t)("Cancel")}),(0,B.tZ)(n.ZP,{priority:"primary",title:void 0===d.children?(0,w.ri)(M.subject)?void 0:(0,g.t)("Required fields must be filled out"):r,onClick:a??(()=>H(s)),disabled:void 0===d.children?!(0,w.ri)(M.subject):(0,w.ri)(r),children:a?(0,g.t)("Next"):A?(0,g.t)("Submit"):(0,g.t)("Submit Feedback")})]})]})}),[o,A,i,H,M,d.children]),R=(0,s.useCallback)((e=>{let{children:t,showSelfHostedMessage:s=!0}=e;return(0,B.BX)(a,{children:[t,q&&s&&(0,B.tZ)(f.Z,{type:"info",children:(0,g._N)("You agree that any feedback you submit is subject to Sentry's [privacyPolicy:Privacy Policy] and Sentry may use such feedback without restriction or obligation.",{privacyPolicy:(0,B.tZ)(Z.Z,{href:"https://sentry.io/privacy/"})})})]})}),[a,q]);if(void 0===d.children){const e=d.feedbackTypes??N;return(0,B.BX)(s.Fragment,{children:[(0,B.tZ)(L,{children:(0,g.t)("Submit Feedback")}),(0,B.BX)(R,{children:[(0,B.tZ)(x.Z,{label:(0,g.t)("Type of feedback"),name:"subject",inline:!1,options:e.map(((e,t)=>({value:t,label:e}))),placeholder:(0,g.t)("Select type of feedback"),value:M.subject,onChange:e=>X({...M,subject:e}),flexibleControlStateSize:!0,stacked:!0,required:!0}),(0,B.tZ)(k.Z,{label:(0,g.t)("Additional feedback"),inline:!1,required:!1,flexibleControlStateSize:!0,stacked:!0,children:(0,B.tZ)(y.Z,{name:"additional-feedback",value:M.additionalInfo,rows:5,autosize:!0,placeholder:(0,g.t)("What did you expect?"),onChange:e=>X({...M,additionalInfo:e.target.value})})})]}),(0,B.tZ)(E,{secondaryAction:d?.secondaryAction})]})}return(0,B.tZ)(s.Fragment,{children:d.children({Header:L,Body:R,Footer:E,onFieldChange:function(e,t){const a=m()(M);a[e]=t,X(a)},state:M})})}$.displayName="FeedbackModal";const q={name:"16o92yp",styles:"width:100%;max-width:680px"},T=(0,i.Z)("div",{target:"e44837j1"})("margin-right:",(0,S.Z)(1),";width:100%;"),z=(0,i.Z)("div",{target:"e44837j0"})({name:"s7lnbf",styles:"flex:1;align-self:center"});var M=a("./app/icons/index.tsx");function X(e){let{buttonProps:t={},...a}=e;return(0,B.tZ)(n.ZP,{...t,icon:(0,B.tZ)(M.I8,{}),onClick:function(e){(0,o.openModal)((e=>(0,B.tZ)($,{...e,...a})),{modalCss:q}),t.onClick?.(e)},children:(0,g.t)("Give Feedback")})}X.displayName="FeatureFeedback"}}]);
//# sourceMappingURL=../sourcemaps/app_components_featureFeedback_index_tsx.cc822c8bc941abd14fb3d19ce155faca.js.map