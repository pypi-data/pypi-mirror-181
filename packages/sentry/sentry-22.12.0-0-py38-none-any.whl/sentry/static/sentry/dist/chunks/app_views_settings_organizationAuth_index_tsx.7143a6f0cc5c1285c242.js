"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationAuth_index_tsx"],{"./app/components/acl/access.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),n=s("./app/components/alert.tsx"),o=s("./app/locale.tsx"),a=s("./app/utils/isRenderFunc.tsx"),d=s("./app/utils/withConfig.tsx"),l=s("./app/utils/withOrganization.tsx");const p=(0,s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(n.Z,{type:"error",showIcon:!0,children:(0,o.t)("You do not have sufficient permissions to access this.")});class c extends i.Component{render(){const{organization:e,config:t,access:s,requireAll:r,isSuperuser:i,renderNoAccessMessage:n,children:o}=this.props,{access:d}=e||{access:[]},l=!s||s[r?"every":"some"]((e=>d.includes(e))),c=!(!t.user||!t.user.isSuperuser),u={hasAccess:l,hasSuperuser:c},h=l&&(!i||c);return h||"function"!=typeof n?!h&&n?p:(0,a.l)(o)?o(u):h?o:null:n(u)}}c.displayName="Access",(0,r.Z)(c,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const u=(0,l.Z)((0,d.Z)(c))},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;const i=`${e} - ${t}`,n=r?`${i} - ${r}`:i;return s?`${n} - Sentry`:n}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var r=s("./app/components/asyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends r.Z{getTitle(){return""}render(){return(0,n.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}o.displayName="AsyncView"},"./app/views/settings/organization/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var r=s("./app/components/acl/access.tsx"),i=s("./app/components/alert.tsx"),n=s("./app/locale.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{access:t=["org:write"],message:s=(0,n.t)("These settings can only be edited by users with the organization owner or manager role."),organization:a,...d}=e;return(0,o.tZ)(r.Z,{access:t,organization:a,children:e=>{let{hasAccess:t}=e;return!t&&(0,o.tZ)(i.Z,{"data-test-id":"org-permission-alert",type:"warning",showIcon:!0,...d,children:s})}})}a.displayName="PermissionAlert";const d=a},"./app/views/settings/organizationAuth/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/es.array.includes.js"),s("./app/actionCreators/indicator.tsx")),n=s("./app/locale.tsx"),o=s("./app/utils/routeTitle.tsx"),a=s("./app/utils/withOrganization.tsx"),d=s("./app/views/asyncView.tsx"),l=s("./app/components/emptyMessage.tsx"),p=s("./app/components/links/externalLink.tsx"),c=s("./app/components/panels/index.tsx"),u=s("./app/utils.tsx"),h=s("./app/utils/getCsrfToken.tsx"),m=s("./app/views/settings/components/settingsPageHeader.tsx"),g=s("./app/views/settings/organization/permissionAlert.tsx"),v=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),y=s("./app/components/acl/access.tsx"),Z=s("./app/components/acl/feature.tsx"),x=s("./app/components/acl/featureDisabled.tsx"),b=s("./app/components/button.tsx"),f=s("./app/components/hovercard.tsx"),w=s("./app/components/tag.tsx"),z=s("./app/icons/index.tsx"),S=s("./app/styles/space.tsx"),k=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const A=e=>{let{provider:t,active:s,onConfigure:r}=e;const i=e=>{r?.(t.key,e)},o=e=>(0,k.tZ)($,{provider:e.provider,features:e.features}),a=e=>{let{hasFeature:s}=e;return(0,k.tZ)(y.Z,{access:["org:write"],children:e=>{let{hasAccess:r}=e;return(0,k.tZ)(b.ZP,{type:"submit",name:"provider",size:"sm",value:t.key,disabled:!s||!r,onClick:i,children:(0,n.t)("Configure")})}})},d=t.requiredFeature,l=d?`feature-disabled:${(0,u.E7)(d)}`:null,p=l?{hookName:l}:{};return(0,k.tZ)(Z.Z,{...p,features:[d].filter((e=>e)),renderDisabled:e=>{let{children:t,...s}=e;return"function"==typeof t&&t({...s,renderDisabled:o})},children:e=>{let{hasFeature:r,features:i,renderDisabled:o,renderInstallButton:d}=e;return(0,k.BX)(c.Lv,{center:!0,children:[(0,k.BX)(_,{children:[(0,k.tZ)(N,{className:`provider-logo ${t.name.replace(/\s/g,"-").toLowerCase()}`}),(0,k.BX)("div",{children:[(0,k.tZ)(T,{children:t.name}),(0,k.tZ)(C,{children:(0,n.t)("Enable your organization to sign in with %s.",(l=t.name,"SAML2"===l?(0,n.t)("your preferred SAML2 compliant provider like Ping Identity, Google SAML, Keycloak, or VMware Identity Manager"):"Google"===l?(0,n.t)("Google (OAuth)"):l))})]})]}),(0,k.tZ)(P,{children:!r&&o({provider:t,features:i})}),(0,k.tZ)("div",{children:s?(0,k.tZ)(I,{}):(d??a)({provider:t,hasFeature:r})})]});var l}})};A.displayName="ProviderItem";const j=A,_=(0,v.Z)("div",{target:"ehb8hzc6"})("flex:1;display:grid;grid-template-columns:max-content 1fr;gap:",(0,S.Z)(2),";"),N=(0,v.Z)("div",{target:"ehb8hzc5"})({name:"182h23h",styles:"height:36px;width:36px;border-radius:3px;margin-right:0;top:auto"}),T=(0,v.Z)("div",{target:"ehb8hzc4"})({name:"1efi8gv",styles:"font-weight:bold"}),C=(0,v.Z)("div",{target:"ehb8hzc3"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.subText),";"),P=(0,v.Z)("div",{target:"ehb8hzc2"})({name:"82a6rk",styles:"flex:1"}),I=(0,v.Z)("div",{target:"ehb8hzc1"})("background:",(e=>e.theme.green300),";color:",(e=>e.theme.white),";padding:",(0,S.Z)(1)," ",(0,S.Z)(1.5),";border-radius:2px;font-size:0.8em;");I.defaultProps={children:(0,n.t)("Active")};const L=(0,v.Z)(f.uI,{target:"ehb8hzc0"})({name:"lee4ct",styles:"width:350px"}),$=e=>{let{provider:t,features:s,className:r}=e;return(0,k.tZ)(L,{containerClassName:r,body:(0,k.tZ)(x.Z,{features:s,hideHelpToggle:!0,message:(0,n.t)("%s SSO is disabled.",t.name),featureName:(0,n.t)("SSO Auth")}),children:(0,k.tZ)(w.Z,{role:"status",icon:(0,k.tZ)(z._V,{isSolid:!0}),children:(0,n.t)("disabled")})})};$.displayName="LockedFeature";const F={google:0,github:1,okta:2,"active-directory":3,saml2:4,onelogin:5,rippling:6,auth0:7,jumpcloud:8},q=e=>{let{organization:t,providerList:s,activeProvider:r}=e;const i=t.features,o=(s??[]).sort(((e,t)=>e.key in F?t.key in F?F[e.key]===F[t.key]?0:F[e.key]>F[t.key]?1:-1:1:-1)).sort(((e,t)=>{const s=i.includes((0,u.E7)(e.requiredFeature));return s===i.includes((0,u.E7)(t.requiredFeature))?0:s?-1:1})),a=t.require2FA&&o.some((e=>{let{requiredFeature:t}=e;return i.includes((0,u.E7)(t))}));return(0,k.BX)("div",{className:"sso",children:[(0,k.tZ)(m.Z,{title:"Authentication"}),(0,k.tZ)(g.Z,{}),(0,k.BX)(c.s_,{children:[(0,k.tZ)(c.V9,{children:(0,n.t)("Choose a provider")}),(0,k.BX)(c.N,{children:[!r&&(0,k.tZ)(c.aU,{type:"info",children:(0,n._N)("Get started with Single Sign-on for your organization by selecting a provider. Read more in our [link:SSO documentation].",{link:(0,k.tZ)(p.Z,{href:"https://docs.sentry.io/product/accounts/sso/"})})}),a&&(0,k.tZ)(c.aU,{type:"warning",children:(0,n.t)("Require 2FA will be disabled if you enable SSO.")}),(0,k.BX)("form",{action:`/organizations/${t.slug}/auth/configure/`,method:"POST",children:[(0,k.tZ)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:(0,h.Z)()}),(0,k.tZ)("input",{type:"hidden",name:"init",value:"1"}),o.map((e=>(0,k.tZ)(j,{provider:e,active:!!r&&e.key===r.key},e.key))),0===o.length&&(0,k.tZ)(l.Z,{children:(0,n.t)("No authentication providers are available.")})]})]})]})]})};q.displayName="OrganizationAuthList";const B=(0,a.Z)(q);class O extends d.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleSendReminders",(e=>{this.setState({sendRemindersBusy:!0}),this.api.request(`/organizations/${this.props.params.orgId}/auth-provider/send-reminders/`,{method:"POST",data:{},success:()=>(0,i.S9)((0,n.t)("Sent reminders to members")),error:()=>(0,i.Iw)((0,n.t)("Failed to send reminders")),complete:()=>this.setState({sendRemindersBusy:!1})})})),(0,r.Z)(this,"handleConfigure",(e=>{this.setState({busy:!0}),this.api.request(`/organizations/${this.props.params.orgId}/auth-provider/`,{method:"POST",data:{provider:e,init:!0},success:e=>{e&&e.auth_url&&(window.location.href=e.auth_url)},error:()=>{this.setState({busy:!1})}})})),(0,r.Z)(this,"handleDisableProvider",(e=>{this.setState({busy:!0}),this.api.request(`/organizations/${this.props.params.orgId}/auth-provider/`,{method:"DELETE",data:{provider:e},success:()=>{this.setState({provider:null,busy:!1})},error:()=>{this.setState({busy:!1})}})}))}componentDidUpdate(){const e=this.props.organization.access;if(this.state.provider&&e.includes("org:write")){const e=`/organizations/${this.props.params.orgId}/auth/configure/`;this.props.router.replace(e),window.location.assign(e)}}getEndpoints(){return[["providerList",`/organizations/${this.props.params.orgId}/auth-providers/`],["provider",`/organizations/${this.props.params.orgId}/auth-provider/`]]}getTitle(){return(0,o.Z)((0,n.t)("Auth Settings"),this.props.organization.slug,!1)}renderBody(){const{providerList:e,provider:t}=this.state;if(null===e)return null;if(this.props.organization.access.includes("org:write")&&t)return this.renderLoading();const s=e?.find((e=>e.key===t?.key));return(0,k.tZ)(B,{activeProvider:s,providerList:e})}}const E=(0,a.Z)(O)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationAuth_index_tsx.365f8ed2793b1a8daa133d8885e2b333.js.map