"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_sessions_tsx"],{"./app/utils/sessions.tsx":(e,t,r)=>{r.d(t,{$K:()=>v,BN:()=>A,FS:()=>R,Lv:()=>C,Pn:()=>f,SU:()=>E,U5:()=>O,VH:()=>m,Xz:()=>D,Y5:()=>y,hD:()=>w,iy:()=>N,mo:()=>H,sA:()=>g,wt:()=>S}),r("../node_modules/core-js/modules/es.array.includes.js");var s=r("../node_modules/lodash/compact.js"),n=r.n(s),o=r("../node_modules/lodash/mean.js"),a=r.n(o),i=r("../node_modules/moment/moment.js"),l=r.n(i),d=r("./app/components/charts/utils.tsx"),u=r("./app/types/index.tsx"),c=r("./app/utils.tsx"),h=r("./app/views/releases/utils/index.tsx"),p=r("./app/views/releases/utils/sessionTerm.tsx");const m=10;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce(((e,r)=>e+r.totals[t]),0)}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return e.reduce(((e,s)=>e+s.series[t][r]),0)}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const r=A(e,t,u.$y.CRASHED);return(0,c.ri)(r)?(0,h.Mf)(100-r):null}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const r=g(e,t),s=e.filter((e=>!!e.totals[t])).length;return(0,c.ri)(r)&&null!==s&&0!==r?r/s:null}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=Array(r.length).fill(0),n=e.map((e=>e.series[t]));return n.forEach((e=>{e.forEach(((e,t)=>s[t]+=e))})),s}function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;const s=g(e,t),n=g(e.filter((e=>{let{by:t}=e;return t["session.status"]===r})),t);return(0,c.ri)(s)&&0!==s?(0,c.aQ)(n??0,s??0):null}function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return n()(t.map(((t,s)=>{const n=e.reduce(((e,t)=>e+(t.series[r]?.[s]??0)),0),o=e.find((e=>e.by["session.status"]===u.$y.CRASHED))?.series[r]?.[s]??0,a=(0,c.aQ)(o,n);return 0===n?null:{name:t,value:(0,h.Mf)(100-a)}})))}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return n()(t.map(((t,n)=>{const o=e.reduce(((e,t)=>e+t.series[r][n]),0),a=e.find((e=>e.by["session.status"]===s))?.series[r][n]??0,i=(0,c.aQ)(a,o);return 0===o?null:{name:t,value:(0,h.r)(i)}})))}function H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return n()(t.map(((t,n)=>{const o=a()(e.map((e=>e.series[r][n])).filter((e=>!!e)));return o?{name:t,value:"function"==typeof s?s(o):o}:null})))}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;return r.map(((r,n)=>{const o=e.reduce(((e,t)=>e+(t.series[s]?.[n]??0)),0),a=t.reduce(((e,t)=>e+(t.series[s]?.[n]??0)),0),i=(0,c.aQ)(o,a);return{name:r,value:Math.round(i)}}))}function N(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return r.map(((r,s)=>({name:r,value:t?.series[e][s]??0})))}function C(e){const t=e.charts.getColorPalette(14);return{[u.$y.HEALTHY]:{seriesName:p.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},[u.$y.ERRORED]:{seriesName:p.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},[u.$y.ABNORMAL]:{seriesName:p.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},[u.$y.CRASHED]:{seriesName:p.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function D(e){let{highFidelity:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(0,d.Nm)(e);return l()(e.start).isSameOrBefore(l()().subtract(30,"days"))&&(t=!1),r>=d.Zn?"1d":r>=d.B8?"4h":r>=d.aC?"1h":t?r<=m?"10s":r<=30?"1m":"5m":"1h"}function O(e,t,r){if(!t||!r)return e;const s=[],n=e.intervals.filter(((e,n)=>{const o=l().utc(e).isBetween(l().utc(t),l().utc(r),void 0,"[]");return o&&s.push(n),o})),o=e.groups.map((e=>{const t={},r={};return Object.keys(e.series).forEach((n=>{r[n]=0,t[n]=e.series[n].filter(((e,t)=>{const o=s.includes(t);return o&&(r[n]=(r[n]??0)+e),o})),n.startsWith("p50")&&(r[n]=a()(t[n])),n.startsWith("count_unique")&&(r[n]=e.totals[n])})),{...e,series:t,totals:r}}));return{start:n[0],end:n[n.length-1],query:e.query,intervals:n,groups:o}}},"./app/views/releases/utils/index.tsx":(e,t,r)=>{r.d(t,{C8:()=>T,EB:()=>_,G$:()=>w,G5:()=>A,Jl:()=>L,Mf:()=>R,O7:()=>x,PS:()=>N,TB:()=>D,eY:()=>C,hf:()=>S,me:()=>j,r:()=>H,rF:()=>O,zB:()=>y}),r("../node_modules/core-js/modules/es.array.includes.js");var s=r("../node_modules/lodash/pick.js"),n=r.n(s),o=r("../node_modules/lodash/round.js"),a=r.n(o),i=r("../node_modules/moment/moment.js"),l=r.n(i),d=r("./app/components/links/externalLink.tsx"),u=r("./app/components/organizations/pageFilters/parse.tsx"),c=r("./app/constants/pageFilters.tsx"),h=r("./app/data/platformCategories.tsx"),p=r("./app/locale.tsx"),m=r("./app/types/index.tsx"),g=r("./app/utils.tsx"),E=r("./app/utils/tokenizeSearch.tsx"),f=r("./app/views/issueList/utils.tsx"),v=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const S=95,A=e=>a()(e,e>60?0:3),R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const s=a()(e,e>t?r:0);return 100===s&&e<100?Math.floor(e*Math.pow(10,r))/Math.pow(10,r):s},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(isNaN(e))return"â€•";if(e<1&&e>0)return"<1%";const s=R(e,t,r).toLocaleString();return`${s}%`},H=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a()(t?Math.abs(e):e,3)},w=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return`${H(e,t).toLocaleString()}%`},N=(e,t,r)=>({pathname:`/organizations/${e}/issues/`,query:{project:t,statsPeriod:void 0,start:void 0,end:void 0,query:new E.MY([`firstRelease:${r}`]).formatString(),sort:f.qh.FREQ}}),C=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{pathname:`/organizations/${e}/issues/`,query:{...s,project:t,query:new E.MY([`release:${r}`,"error.unhandled:true"]).formatString(),sort:f.qh.FREQ}}},D=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{pathname:`/organizations/${e}/issues/`,query:{...s,project:t,query:new E.MY([`release:${r}`,"error.handled:true"]).formatString(),sort:f.qh.FREQ}}},O=e=>e.status===m.dE.Archived;function T(e){const t=l()().subtract(90,"days"),{lastEvent:r,currentProjectMeta:s,dateCreated:n}=e||{},{sessionsUpperBound:o}=s||{};let a="normal",i=l()(n).startOf("minute"),d=l()((l()(o).isAfter(r)?o:r)??void 0).endOf("minute");return l()(i).isSame(d,"minute")&&(d=l()(d).add(1,"minutes")),i.isBefore(t)&&(i=t,a="clamped",(d.isBefore(i)||!(0,g.ri)(o)&&!(0,g.ri)(r))&&(d=l()(),a="ancient")),{type:a,releaseStart:i.utc().format(),releaseEnd:d.utc().format()}}function x(e){let{location:t,releaseBounds:r}=e;const s=(0,u.fK)(n()(t.query,[...Object.values(c.nF),...Object.values(c.V),"cursor"]),{allowAbsolutePageDatetime:!0,allowEmptyPeriod:!0});return Object.keys(s).some((e=>[c.nF.START,c.nF.END,c.nF.UTC,c.nF.PERIOD].includes(e)))||(s[c.nF.START]=r.releaseStart,s[c.nF.END]=r.releaseEnd),s}const b=(0,v.tZ)(d.Z,{href:"https://docs.sentry.io/product/releases/health/#adoption-stages"}),_={low_adoption:{name:(0,p.t)("Low Adoption"),tooltipTitle:(0,p._N)("This release has a low percentage of sessions compared to other releases in this project. [link:Learn more]",{link:b}),type:"warning"},adopted:{name:(0,p.t)("Adopted"),tooltipTitle:(0,p._N)("This release has a high percentage of sessions compared to other releases in this project. [link:Learn more]",{link:b}),type:"success"},replaced:{name:(0,p.t)("Replaced"),tooltipTitle:(0,p._N)("This release was previously Adopted, but now has a lower level of sessions compared to other releases in this project. [link:Learn more]",{link:b}),type:"default"}},L=e=>[...h.ai,...h.gv].includes(e);function j(e){return`release:"${e.replace(/"/g,'\\"')}"`}},"./app/views/releases/utils/sessionTerm.tsx":(e,t,r)=>{r.d(t,{RE:()=>d,U1:()=>o,_k:()=>n,w0:()=>a});var s=r("./app/locale.tsx");let n;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption"}(n||(n={}));const o={[n.CRASHES]:(0,s.t)("Crashes"),[n.CRASHED]:(0,s.t)("Crashed"),[n.ABNORMAL]:(0,s.t)("Abnormal"),[n.CRASH_FREE_USERS]:(0,s.t)("Crash Free Users"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Crash Free Sessions"),[n.HEALTHY]:(0,s.t)("Healthy"),[n.ERRORED]:(0,s.t)("Errored"),[n.UNHANDLED]:(0,s.t)("Unhandled"),[n.ADOPTION]:(0,s.t)("Adoption"),duration:(0,s.t)("Session Duration"),otherCrashed:(0,s.t)("Other Crashed"),otherAbnormal:(0,s.t)("Other Abnormal"),otherErrored:(0,s.t)("Other Errored"),otherHealthy:(0,s.t)("Other Healthy"),otherCrashFreeUsers:(0,s.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,s.t)("Other Crash Free Sessions"),otherReleases:(0,s.t)("Other Releases")},a={[n.CRASHES]:(0,s.t)("Number of sessions with a crashed state"),[n.CRASH_FREE]:(0,s.t)("Percentage of sessions/users who did not experience a crash."),[n.CRASH_FREE_USERS]:(0,s.t)("Percentage of unique users with non-crashed sessions"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Percentage of non-crashed sessions"),[n.STABILITY]:(0,s.t)("The percentage of crash free sessions."),[n.ADOPTION]:(0,s.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},i={[n.CRASHED]:(0,s.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Percentage of non-crashed sessions"),[n.ABNORMAL]:(0,s.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[n.HEALTHY]:(0,s.t)("A session without errors"),[n.ERRORED]:(0,s.t)("A session with errors"),[n.UNHANDLED]:(0,s.t)("Not handled by user code")},l={crashed:(0,s.t)("The application crashed with a hard crash (eg. segfault)"),[n.ABNORMAL]:(0,s.t)("The application did not properly end the session, for example, due to force-quit"),[n.HEALTHY]:(0,s.t)("The application exited normally and did not observe any errors"),[n.ERRORED]:(0,s.t)("The application exited normally but observed error events while running"),[n.UNHANDLED]:(0,s.t)("The application crashed with a hard crash")};function d(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:e?.split("-")[0]){case"dotnet":case"java":return{...a,...i};case"java-spring":case"dotnet-aspnetcore":return{...a,...i,[n.CRASHES]:(0,s.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...a,...i,[n.CRASHED]:(0,s.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...a,...i,[n.CRASHED]:(0,s.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...a,[n.CRASHED]:(0,s.t)("During the session an unhandled global error/promise rejection occurred."),[n.ABNORMAL]:(0,s.t)("Non applicable for Javascript."),[n.HEALTHY]:(0,s.t)("No errors were captured during session life-time."),[n.ERRORED]:(0,s.t)("During the session at least one handled error occurred."),[n.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...a,...l};case"rust":return{...a,...l,[n.CRASHED]:(0,s.t)("The application had an unrecoverable error (a panic)")};default:return{...a,[n.CRASHED]:(0,s.t)("Number of users who experienced an unhandled error"),[n.ABNORMAL]:(0,s.t)("An unknown session exit"),[n.HEALTHY]:i.healthy,[n.ERRORED]:i.errored,[n.UNHANDLED]:i.unhandled}}}(t)[e]}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_sessions_tsx.b57d038674640641824325f2c9fb94ac.js.map