"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_traceDetails_traceView_tsx"],{"./app/utils/discover/discoverQuery.tsx":(e,t,n)=>{n.d(t,{Z:()=>c,_:()=>o});var r=n("./app/utils/discover/genericDiscoverQuery.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function i(e){return(0,s.tZ)(r.ZP,{route:"events",shouldRefetchData:a,afterFetch:(e,t)=>{const{fields:n,...r}=e.meta??{};return{...e,meta:{...n,...r}}},...e})}function o(e){return(0,r.JC)({route:"events",shouldRefetchData:a,afterFetch:(e,t)=>{const{fields:n,...r}=e.meta??{};return{...e,meta:{...n,...r}}},...e})}i.displayName="DiscoverQuery";const c=i},"./app/views/performance/traceDetails/styles.tsx":(e,t,n)=>{n.d(t,{$G:()=>T,CB:()=>m.wh,Iq:()=>f,LA:()=>b,RB:()=>y,W3:()=>v,X2:()=>m.X2,Z9:()=>x,cC:()=>Z,pH:()=>g,qD:()=>m.iF,uI:()=>w});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/components/events/eventTags/eventTagsPill.tsx"),a=n("./app/components/events/interfaces/spans/header.tsx"),i=n("./app/components/panels/index.tsx"),o=n("./app/components/pills.tsx"),c=n("./app/components/searchBar.tsx"),l=n("./app/styles/space.tsx"),d=n("./app/utils.tsx"),p=n("./app/utils/queryString.tsx"),h=n("./app/views/performance/transactionSummary/utils.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),m=n("./app/components/events/interfaces/spans/spanDetail.tsx");const g=(0,r.Z)("div",{target:"euzgho58"})({name:"7whenc",styles:"display:flex;width:100%"}),f=(0,r.Z)(c.Z,{target:"euzgho57"})({name:"1ff36h2",styles:"flex-grow:1"}),Z=(0,r.Z)(a.il,{target:"euzgho56"})("border-top:none;border-bottom:1px solid ",(e=>e.theme.border),";position:sticky;top:0;z-index:1;"),x=(0,r.Z)("div",{target:"euzgho55"})("display:grid;grid-template-columns:1fr;gap:",(0,l.Z)(3),";margin-bottom:",(0,l.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:max-content max-content;grid-row-gap:0;}"),v=(0,r.Z)("div",{target:"euzgho54"})({name:"13udsys",styles:"height:100%"}),w=(0,r.Z)("div",{target:"euzgho53"})({name:"1wr20zt",styles:"overflow-x:hidden;border-bottom-left-radius:3px;border-bottom-right-radius:3px"}),b=(0,r.Z)(i.s_,{target:"euzgho52"})({name:"1vsyufa",styles:"height:100%;overflow:auto"}),y=(0,r.Z)("span",{target:"euzgho51"})("margin-right:",(0,l.Z)(.75),";display:flex;flex-direction:column;justify-content:center;"),D=(0,r.Z)(o.Z,{target:"euzgho50"})("padding-top:",(0,l.Z)(1.5),";");function T(e){let{location:t,organization:n,transaction:r}=e;const{tags:a}=r;if(!a||a.length<=0)return null;const i=n.slug;return(0,u.BX)("tr",{children:[(0,u.tZ)("td",{className:"key",children:"Tags"}),(0,u.tZ)("td",{className:"value",children:(0,u.tZ)(D,{children:a.map(((e,a)=>{const{pathname:o,query:c}=(0,h.e1)({orgSlug:i,transaction:r.transaction,projectID:String(r.project_id),query:{...t.query,query:(0,p.os)(t.query.query,e.key,e.value)}});return(0,u.tZ)(s.Z,{tag:e,projectId:r.project_slug,organization:n,query:c,streamPath:o},(0,d.ri)(e.key)?e.key:`tag-pill-${a}`)}))})})]})}T.displayName="Tags"},"./app/views/performance/traceDetails/traceNotFound.tsx":(e,t,n)=>{n.d(t,{Z:()=>f});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/react/index.js"),a=n("./app/components/alert.tsx"),i=n("./app/components/links/link.tsx"),o=n("./app/components/loadingError.tsx"),c=n("./app/components/loadingIndicator.tsx"),l=n("./app/components/performance/waterfall/rowDetails.tsx"),d=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),h=n("./app/utils/discover/discoverQuery.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{meta:t,traceEventView:n,traceSlug:r,organization:p,location:m}=e;if(0===(t?.transactions??0)&&(t?.errors??0)>0){const e=n.withColumns([{kind:"field",field:"project"},{kind:"field",field:"title"},{kind:"field",field:"issue.id"},{kind:"field",field:"level"}]);return e.query=`trace:${r} !event.type:transaction `,(0,u.tZ)(h.Z,{eventView:e,orgSlug:p.slug,location:m,referrer:"api.trace-view.errors-view",children:e=>{let{isLoading:t,tableData:n,error:r}=e;return t?(0,u.tZ)(c.Z,{}):r?(0,u.tZ)(a.Z,{type:"error",showIcon:!0,children:(0,u.tZ)(g,{children:(0,d._N)("The trace cannot be shown when all events are errors. An error occurred when attempting to fetch these error events: [error]",{error:r.message})})}):(0,u.BX)(a.Z,{type:"error",showIcon:!0,children:[(0,u.tZ)(g,{children:(0,d.t)("The trace cannot be shown when all events are errors.")}),(0,u.tZ)(l.TV,{"data-test-id":"trace-view-errors",children:n?.data.map((e=>(0,u.BX)(s.Fragment,{children:[(0,u.tZ)(l._U,{level:e.level}),(0,u.tZ)(l.wE,{children:e.level}),(0,u.tZ)(l.St,{children:(0,u.tZ)(i.Z,{to:`/organizations/${p.slug}/issues/${e["issue.id"]}/events/${e.id}?referrer=performance-trace-not-found`,children:e.title})})]},e.id)))})]})}})}return(0,u.tZ)(o.Z,{message:(0,d.t)("The trace you are looking for was not found.")})}m.displayName="TraceNotFound";const g=(0,r.Z)("div",{target:"etqb06g0"})("margin-bottom:",(0,p.Z)(1),";"),f=m},"./app/views/performance/traceDetails/traceView.tsx":(e,t,n)=>{n.d(t,{Z:()=>pe});var r=n("../node_modules/react/index.js"),s=n("../node_modules/@sentry/core/esm/hub.js"),a=n("./app/components/events/interfaces/spans/anchorLinkManager.tsx"),i=n("./app/components/events/interfaces/spans/dividerHandlerManager.tsx"),o=n("./app/components/events/interfaces/spans/scrollbarManager.tsx"),c=n("./app/components/performance/waterfall/messageRow.tsx"),l=n("./app/components/performance/waterfall/miniHeader.tsx"),d=n("./app/components/performance/waterfall/utils.tsx"),p=n("./app/locale.tsx"),h=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),u=n("./app/views/performance/traceDetails/styles.tsx"),m=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=n("./app/components/assistant/guideAnchor.tsx"),f=n("./app/components/count.tsx"),Z=n("./app/components/idBadge/projectBadge.tsx"),x=n("./app/components/performance/waterfall/constants.tsx"),v=n("./app/components/performance/waterfall/row.tsx"),w=n("./app/components/performance/waterfall/rowBar.tsx"),b=n("./app/components/performance/waterfall/rowDivider.tsx"),y=n("./app/components/performance/waterfall/rowTitle.tsx"),D=n("./app/components/performance/waterfall/treeConnector.tsx"),T=n("./app/components/tooltip.tsx"),_=n("./app/utils/performance/quickTrace/utils.tsx"),C=n("./app/utils/projects.tsx"),B=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),j=n("../node_modules/react-router/es/index.js"),S=n("../node_modules/lodash/omit.js"),I=n.n(S),O=n("./app/components/alert.tsx"),z=n("./app/components/button.tsx"),k=n("./app/components/clipboard.tsx"),X=n("./app/components/dateTime.tsx"),E=n("./app/components/events/interfaces/spans/utils.tsx"),$=n("./app/components/links/link.tsx"),V=n("./app/components/performance/waterfall/rowDetails.tsx"),A=n("./app/components/quickTrace/utils.tsx"),H=n("./app/constants/pageFilters.tsx"),M=n("./app/icons/index.tsx"),N=n("./app/styles/space.tsx"),R=n("./app/utils/discover/urls.tsx"),G=n("./app/utils/getDynamicText.tsx"),L=n("./app/utils/performance/urls.ts"),q=n("./app/utils/performance/vitals/constants.tsx"),F=n("./app/utils/performanceForSentry.tsx"),P=n("./app/views/performance/transactionSummary/utils.tsx"),U=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Q extends r.Component{constructor(){super(...arguments),(0,m.Z)(this,"scrollBarIntoView",(e=>t=>{t.preventDefault();const n=`#txn-${e}`;this.props.scrollToHash(n),j.browserHistory.push({...this.props.location,hash:n})}))}componentDidMount(){const{organization:e,transaction:t}=this.props;(0,h.Z)("performance_views.trace_view.open_transaction_details",{organization:e,operation:t["transaction.op"],transaction:t.transaction})}renderTransactionErrors(){const{organization:e,transaction:t}=this.props,{errors:n}=t;return 0===n.length?null:(0,U.tZ)(O.Z,{system:!0,type:"error",expand:n.map((t=>(0,U.BX)(V.TV,{children:[(0,U.tZ)(V._U,{level:t.level}),(0,U.tZ)(V.wE,{children:t.level}),(0,U.tZ)(V.St,{children:(0,U.tZ)($.Z,{to:(0,A.F7)(t,e),children:t.title})})]},t.event_id))),children:(0,U.tZ)(V.CM,{children:(0,p.tn)("%s error event occurred in this transaction.","%s error events occurred in this transaction.",n.length)})})}renderGoToTransactionButton(){const{location:e,organization:t,transaction:n}=this.props,r=(0,R.JE)({id:n.event_id,project:n.project_slug}),s=(0,L.D)(t.slug,r,n.transaction,I()(e.query,Object.values(H.V)));return(0,U.tZ)(Y,{size:"xs",to:s,children:(0,p.t)("View Event")})}renderGoToSummaryButton(){const{location:e,organization:t,transaction:n}=this.props,r=(0,P.e1)({orgSlug:t.slug,transaction:n.transaction,query:I()(e.query,Object.values(H.V)),projectID:String(n.project_id)});return(0,U.tZ)(Y,{size:"xs",to:r,children:(0,p.t)("View Summary")})}renderMeasurements(){const{transaction:e}=this.props,{measurements:t={}}=e,n=Object.keys(t).filter((e=>Boolean(q.r9[`measurements.${e}`]))).sort();return n.length<=0?null:(0,U.tZ)(r.Fragment,{children:n.map((e=>(0,U.tZ)(u.X2,{title:q.r9[`measurements.${e}`]?.name,children:`${Number(t[e].value.toFixed(3)).toLocaleString()}ms`},e)))})}renderTransactionDetail(){const{location:e,organization:t,transaction:n}=this.props,s=Math.min(n.start_timestamp,n.timestamp),a=Math.max(n.start_timestamp,n.timestamp),{start:i,end:o}=(0,E.Zv)(s,a),c=`${Number((1e3*(a-s)).toFixed(3)).toLocaleString()}ms`;return(0,U.tZ)(u.qD,{children:(0,U.tZ)("table",{className:"table key-value",children:(0,U.BX)("tbody",{children:[(0,U.tZ)(u.X2,{title:(0,U.BX)(J,{onClick:this.scrollBarIntoView(n.event_id),children:[(0,p.t)("Event ID"),(0,U.tZ)(k.Z,{value:`${window.location.href.replace(window.location.hash,"")}#txn-${n.event_id}`,children:(0,U.tZ)(W,{})})]}),extra:this.renderGoToTransactionButton(),children:n.event_id}),(0,U.tZ)(u.X2,{title:"Transaction",extra:this.renderGoToSummaryButton(),children:n.transaction}),(0,U.tZ)(u.X2,{title:"Transaction Status",children:n["transaction.status"]}),(0,U.tZ)(u.X2,{title:"Span ID",children:n.span_id}),(0,U.tZ)(u.X2,{title:"Project",children:n.project_slug}),(0,U.tZ)(u.X2,{title:"Start Date",children:(0,G.Z)({fixed:"Mar 19, 2021 11:06:27 AM UTC",value:(0,U.BX)(r.Fragment,{children:[(0,U.tZ)(X.Z,{date:1e3*s}),` (${i})`]})})}),(0,U.tZ)(u.X2,{title:"End Date",children:(0,G.Z)({fixed:"Mar 19, 2021 11:06:28 AM UTC",value:(0,U.BX)(r.Fragment,{children:[(0,U.tZ)(X.Z,{date:1e3*a}),` (${o})`]})})}),(0,U.tZ)(u.X2,{title:"Duration",children:c}),(0,U.tZ)(u.X2,{title:"Operation",children:n["transaction.op"]||""}),this.renderMeasurements(),(0,U.tZ)(u.$G,{location:e,organization:t,transaction:n})]})})})}render(){return(0,U.tZ)(F.BZ,{id:"TransactionDetail",children:(0,U.BX)(u.CB,{onClick:e=>{e.stopPropagation()},children:[this.renderTransactionErrors(),this.renderTransactionDetail()]})})}}Q.displayName="TransactionDetail";const J=(0,B.Z)("a",{target:"eykqe522"})("display:flex;color:",(e=>e.theme.textColor),";:hover{color:",(e=>e.theme.textColor),";}"),W=(0,B.Z)(M.JH,{target:"eykqe521"})("display:block;color:",(e=>e.theme.gray300),";margin-left:",(0,N.Z)(1),";"),Y=(0,B.Z)(z.ZP,{target:"eykqe520"})("position:absolute;top:",(0,N.Z)(.75),";right:",(0,N.Z)(.5),";"),K=Q;class ee extends r.Component{constructor(){super(...arguments),(0,m.Z)(this,"state",{showDetail:!1}),(0,m.Z)(this,"transactionRowDOMRef",(0,r.createRef)()),(0,m.Z)(this,"toggleDisplayDetail",(()=>{const{transaction:e}=this.props;(0,_.Ci)(e)&&this.setState((e=>({showDetail:!e.showDetail})))})),(0,m.Z)(this,"scrollIntoView",(()=>{const e=this.transactionRowDOMRef.current;if(!e)return;const t=e.getBoundingClientRect().top+window.scrollY;this.setState({showDetail:!0},(()=>window.scrollTo(0,t)))}))}getCurrentOffset(){const{transaction:e}=this.props,{generation:t}=e;return te(t)}renderConnector(e){const{continuingDepths:t,isExpanded:n,isOrphan:r,isLast:s,transaction:a}=this.props,{generation:i}=a,o=(0,_.Ci)(a)?a.event_id:a.traceSlug;if(0===i)return e?(0,U.tZ)(D.UV,{style:{right:"15px",height:"10px",bottom:"-5px",top:"auto"},orphanBranch:!1}):null;const c=t.map((e=>{let{depth:t,isOrphanDepth:n}=e;if(i-t<=1)return null;const r=-1*te(i-t-1)-2;return(0,U.tZ)(D.UV,{style:{left:r},orphanBranch:n},`${o}-${t}`)}));return e&&n&&c.push((0,U.tZ)(D.UV,{style:{right:"15px",height:"10px",bottom:s?`-${x.dN/2+1}px`:"0",top:"auto"},orphanBranch:!1},`${o}-last`)),(0,U.tZ)(D.DN,{isLast:s,hasToggler:e,orphanBranch:r,children:c})}renderToggle(e){const{isExpanded:t,transaction:n,toggleExpandedState:r}=this.props,{children:s,generation:a}=n,i=this.getCurrentOffset();if(s.length<=0)return(0,U.tZ)(D.rw,{style:{left:`${i}px`},children:this.renderConnector(!1)});const o=0===a;return(0,U.BX)(D.rw,{style:{left:`${i}px`},hasToggler:!0,children:[this.renderConnector(!0),(0,U.BX)(D.U1,{disabled:o,isExpanded:t,errored:e,onClick:e=>{e.stopPropagation(),o||r()},children:[(0,U.tZ)(f.Z,{value:s.length}),!o&&(0,U.tZ)("div",{children:(0,U.tZ)(D.jd,{direction:t?"up":"down"})})]})]})}renderTitle(e){const{generateContentSpanBarRef:t}=e,{organization:n,transaction:s}=this.props,a=this.getCurrentOffset(),i=!!(0,_.Ci)(s)&&s.errors.length>0,o=(0,_.Ci)(s)?(0,U.BX)(r.Fragment,{children:[(0,U.tZ)(C.Z,{orgId:n.slug,slugs:[s.project_slug],children:e=>{let{projects:t}=e;const n=t.find((e=>e.slug===s.project_slug));return(0,U.tZ)(u.RB,{children:(0,U.tZ)(T.Z,{title:s.project_slug,children:(0,U.tZ)(Z.Z,{project:n||{slug:s.project_slug},avatarSize:16,hideName:!0})})})}}),(0,U.BX)(y.rv,{errored:i,children:[(0,U.BX)("strong",{children:[s["transaction.op"]," — "]}),s.transaction]})]}):(0,U.BX)(y.rv,{errored:!1,children:[(0,U.tZ)("strong",{children:"Trace — "}),s.traceSlug]});return(0,U.BX)(y.mw,{ref:t(),children:[this.renderToggle(i),(0,U.tZ)(y.Wh,{style:{left:`${a}px`,width:"100%"},children:o})]})}renderDivider(e){if(this.state.showDetail)return(0,U.tZ)(b.xN,{showDetail:!0,style:{position:"absolute"}});const{addDividerLineRef:t}=e;return(0,U.tZ)(b.xN,{ref:t(),style:{position:"absolute"},onMouseEnter:()=>{e.setHover(!0)},onMouseLeave:()=>{e.setHover(!1)},onMouseOver:()=>{e.setHover(!0)},onMouseDown:e.onDragStart,onClick:e=>{e.stopPropagation()}})}renderGhostDivider(e){const{dividerPosition:t,addGhostDividerLineRef:n}=e;return(0,U.tZ)(b.Hr,{style:{width:`calc(${(0,d.yI)(t)} + 0.5px)`,display:"none"},children:(0,U.tZ)(b.xN,{ref:n(),style:{right:0},className:"hovering",onClick:e=>{e.stopPropagation()}})})}renderErrorBadge(){const{transaction:e}=this.props;return(0,_.Ci)(e)&&e.errors.length?(0,U.tZ)(b.cS,{}):null}renderRectangle(){const{transaction:e,traceInfo:t,barColor:n}=this.props,{showDetail:r}=this.state,s=Math.abs(t.endTimestamp-t.startTimestamp)||1,a=Math.abs(e.start_timestamp-t.startTimestamp)/s,i=Math.abs(e.timestamp-e.start_timestamp),o=i/s;return(0,U.tZ)(w.e,{style:{backgroundColor:n,left:`min(${(0,d.yI)(a||0)}, calc(100% - 1px))`,width:(0,d.yI)(o||0)},children:(0,U.tZ)(w.R,{durationDisplay:(0,d.ud)({left:a,width:o}),showDetail:r,children:(0,d.bQ)(i)})})}renderHeader(e){let{dividerHandlerChildrenProps:t,scrollbarManagerChildrenProps:n}=e;const{hasGuideAnchor:r,index:s}=this.props,{showDetail:a}=this.state,{dividerPosition:i}=t;return(0,U.BX)(v.Qc,{showDetail:a,children:[(0,U.tZ)(v.E5,{"data-test-id":"transaction-row-title","data-type":"span-row-cell",style:{width:`calc(${(0,d.yI)(i)} - 0.5px)`,paddingTop:0},showDetail:a,onClick:this.toggleDisplayDetail,children:(0,U.tZ)(g.Z,{target:"trace_view_guide_row",disabled:!r,children:this.renderTitle(n)})}),(0,U.BX)(b.kP,{children:[this.renderDivider(t),this.renderErrorBadge()]}),(0,U.tZ)(v.E5,{"data-test-id":"transaction-row-duration","data-type":"span-row-cell",showStriping:s%2!=0,style:{width:`calc(${(0,d.yI)(1-i)} - 0.5px)`,paddingTop:0},showDetail:a,onClick:this.toggleDisplayDetail,children:(0,U.tZ)(g.Z,{target:"trace_view_guide_row_details",disabled:!r,children:this.renderRectangle()})}),!a&&this.renderGhostDivider(t)]})}renderDetail(){const{location:e,organization:t,isVisible:n,transaction:r}=this.props,{showDetail:s}=this.state;return(0,U.tZ)(a.$,{children:a=>{let{registerScrollFn:i,scrollToHash:o}=a;return(0,_.Ci)(r)?(i(`#txn-${r.event_id}`,this.scrollIntoView,!1),n&&s?(0,U.tZ)(K,{location:e,organization:t,transaction:r,scrollToHash:o}):null):null}})}render(){const{isVisible:e,transaction:t}=this.props,{showDetail:n}=this.state;return(0,U.BX)(v.X2,{ref:this.transactionRowDOMRef,visible:e,showBorder:n,cursor:(0,_.Ci)(t)?"pointer":"default",children:[(0,U.tZ)(o.$6,{children:e=>(0,U.tZ)(i.$,{children:t=>this.renderHeader({dividerHandlerChildrenProps:t,scrollbarManagerChildrenProps:e})})}),this.renderDetail()]})}}function te(e){return e*(D.Ll/2)+0}ee.displayName="TransactionBar";const ne=ee;class re extends r.Component{constructor(){super(...arguments),(0,m.Z)(this,"state",{isExpanded:!0}),(0,m.Z)(this,"toggleExpandedState",(()=>{this.setState((e=>{let{isExpanded:t}=e;return{isExpanded:!t}}))}))}componentDidUpdate(e,t){t.isExpanded!==this.state.isExpanded&&this.props.updateScrollState()}render(){const{location:e,organization:t,transaction:n,traceInfo:s,continuingDepths:a,isOrphan:i,isLast:o,index:c,isVisible:l,hasGuideAnchor:d,renderedChildren:p,barColor:h}=this.props,{isExpanded:u}=this.state;return(0,U.BX)(r.Fragment,{children:[(0,U.tZ)(ne,{location:e,organization:t,index:c,transaction:n,traceInfo:s,continuingDepths:a,isOrphan:i,isLast:o,isExpanded:u,toggleExpandedState:this.toggleExpandedState,isVisible:l,hasGuideAnchor:d,barColor:h}),u&&p]})}}re.displayName="TransactionGroup";const se=(0,o.Iw)(re);var ae=n("./app/views/performance/traceDetails/utils.tsx"),ie=n("./app/components/discover/discoverFeature.tsx");function oe(e){let{traceInfo:t,traceEventView:n,organization:r,meta:s}=e;const a=t.transactions.size,i=s?.transactions??a;if(null===i||a>=i)return null;const o=n.getResultsViewUrlTarget(r.slug);return(0,U.tZ)(c.V,{children:(0,p._N)("Limited to a view of [count] transactions. To view the full list, [discover].",{count:a,discover:(0,U.tZ)(ie.Z,{children:e=>{let{hasFeature:t}=e;return(0,U.tZ)($.Z,{disabled:!t,to:o,children:(0,p.t)("Open in Discover")})}})})})}oe.displayName="LimitExceededMessage";const ce=oe;var le=n("./app/views/performance/traceDetails/traceNotFound.tsx");function de(e){let{isVisible:t,numberOfHiddenTransactionsAbove:n}=e;return!t||n<1?null:(0,U.tZ)(c.V,{children:(0,U.tZ)("span",{children:1===n?(0,p._N)("[numOfTransaction] hidden transaction",{numOfTransaction:(0,U.tZ)("strong",{children:n})}):(0,p._N)("[numOfTransaction] hidden transactions",{numOfTransaction:(0,U.tZ)("strong",{children:n})})},"trace-info-message")})}function pe(e){let{location:t,meta:n,organization:c,traces:p,traceSlug:m,traceEventView:g,filteredTransactionIds:f,...Z}=e;const x=s.Gd().getScope()?.getTransaction(),v=x?.startChild({op:"trace.render",description:"trace-view-content"});function w(e,n){let{continuingDepths:s,isOrphan:a,isLast:i,index:o,numberOfHiddenTransactionsAbove:l,traceInfo:p,hasGuideAnchor:h}=n;const{children:u,event_id:m}=e,g=e.generation+1,Z=function(e,t){return!t||t.has(e.event_id)}(e,f),x=u.reduce(((e,t,n)=>{const r=n===u.length-1,i=t.children.length>0,o=w(t,{continuingDepths:!r&&i?[...s,{depth:g,isOrphanDepth:a}]:s,isOrphan:a,isLast:r,index:e.lastIndex+1,numberOfHiddenTransactionsAbove:e.numberOfHiddenTransactionsAbove,traceInfo:p,hasGuideAnchor:!1});return e.lastIndex=o.lastIndex,e.numberOfHiddenTransactionsAbove=o.numberOfHiddenTransactionsAbove,e.renderedChildren.push(o.transactionGroup),e}),{renderedChildren:[],lastIndex:o,numberOfHiddenTransactionsAbove:Z?0:l+1});return{transactionGroup:(0,U.BX)(r.Fragment,{children:[(0,U.tZ)(de,{isVisible:Z,numberOfHiddenTransactionsAbove:l}),(0,U.tZ)(se,{location:t,organization:c,traceInfo:p,transaction:{...e,generation:g},continuingDepths:s,isOrphan:a,isLast:i,index:o,isVisible:Z,hasGuideAnchor:h,renderedChildren:x.renderedChildren,barColor:(0,d.hd)(e["transaction.op"])})]},m),lastIndex:x.lastIndex,numberOfHiddenTransactionsAbove:x.numberOfHiddenTransactionsAbove}}(0,r.useEffect)((()=>{(0,h.Z)("performance_views.trace_view.view",{organization:c})}),[c]);const b=(0,r.createRef)(),y=(0,r.createRef)();if(null===p||p.length<=0)return(0,U.tZ)(le.Z,{meta:n,traceEventView:g,traceSlug:m,location:t,organization:c});const D=Z.traceInfo||(0,ae.Rg)(p),T={index:1,numberOfHiddenTransactionsAbove:0,traceInfo:D,transactionGroups:[]},{transactionGroups:_,numberOfHiddenTransactionsAbove:C}=p.reduce(((e,t,n)=>{const r=n===p.length-1,s=t.children.length>0,a=!r&&null!==p[n+1].parent_span_id,i=w(t,{...e,isOrphan:!(0,ae.uM)(t),isLast:r,continuingDepths:!r&&s?[{depth:0,isOrphanDepth:a}]:[],hasGuideAnchor:0===n});return e.index=i.lastIndex+1,e.numberOfHiddenTransactionsAbove=i.numberOfHiddenTransactionsAbove,e.transactionGroups.push(i.transactionGroup),e}),T),B=(0,U.tZ)(u.W3,{children:(0,U.tZ)(i.z,{interactiveLayerRef:b,children:(0,U.tZ)(i.$,{children:e=>{let{dividerPosition:r}=e;return(0,U.tZ)(o.zt,{dividerPosition:r,interactiveLayerRef:y,children:(0,U.BX)(u.LA,{children:[(0,U.BX)(u.cC,{children:[(0,U.tZ)(o.$6,{children:e=>{let{virtualScrollbarRef:t,scrollBarAreaRef:n,onDragStart:s,onScroll:a}=e;return(0,U.BX)(l.cs,{ref:y,style:{width:`calc(${(0,d.yI)(r)} - 0.5px)`},onScroll:a,children:[(0,U.tZ)("div",{style:{width:0,height:"1px"},ref:n}),(0,U.tZ)(l.Qk,{"data-type":"virtual-scrollbar",ref:t,onMouseDown:s,children:(0,U.tZ)(l.v6,{})})]})}}),(0,U.tZ)(l._i,{})]}),(0,U.BX)(u.uI,{ref:b,children:[(0,U.tZ)(a.z,{children:(0,U.tZ)(se,{location:t,organization:c,traceInfo:D,transaction:{traceSlug:m,generation:0,"transaction.duration":D.endTimestamp-D.startTimestamp,children:p,start_timestamp:D.startTimestamp,timestamp:D.endTimestamp},continuingDepths:[],isOrphan:!1,isLast:!1,index:0,isVisible:!0,hasGuideAnchor:!1,renderedChildren:_,barColor:(0,d.hd)("")})}),(0,U.tZ)(de,{isVisible:!0,numberOfHiddenTransactionsAbove:C}),(0,U.tZ)(ce,{traceInfo:D,organization:c,traceEventView:g,meta:n})]})]})})}})})});return v?.finish(),B}de.displayName="TraceHiddenMessage"}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_traceDetails_traceView_tsx.a29d2d3edffebd4be6584a664828f5a6.js.map