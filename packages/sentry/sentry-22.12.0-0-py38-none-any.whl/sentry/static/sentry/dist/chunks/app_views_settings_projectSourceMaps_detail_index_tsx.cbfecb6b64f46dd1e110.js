"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectSourceMaps_detail_index_tsx"],{"./app/components/acl/access.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),a=s("./app/components/alert.tsx"),n=s("./app/locale.tsx"),o=s("./app/utils/isRenderFunc.tsx"),l=s("./app/utils/withConfig.tsx"),c=s("./app/utils/withOrganization.tsx");const d=(0,s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(a.Z,{type:"error",showIcon:!0,children:(0,n.t)("You do not have sufficient permissions to access this.")});class p extends i.Component{render(){const{organization:e,config:t,access:s,requireAll:r,isSuperuser:i,renderNoAccessMessage:a,children:n}=this.props,{access:l}=e||{access:[]},c=!s||s[r?"every":"some"]((e=>l.includes(e))),p=!(!t.user||!t.user.isSuperuser),m={hasAccess:c,hasSuperuser:p},u=c&&(!i||p);return u||"function"!=typeof a?!u&&a?d:(0,o.l)(n)?n(m):u?n:null:a(m)}}p.displayName="Access",(0,r.Z)(p,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const m=(0,c.Z)((0,l.Z)(p))},"./app/components/acl/role.tsx":(e,t,s)=>{s.d(t,{u:()=>o}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("../node_modules/react/index.js"),i=s("./app/stores/configStore.tsx"),a=s("./app/utils/isActiveSuperuser.tsx"),n=s("./app/utils/isRenderFunc.tsx");const o=(0,s("./app/utils/withOrganization.tsx").Z)((function(e){let{role:t,organization:s,children:o}=e;const l=i.Z.get("user"),c=(0,r.useMemo)((()=>function(e,t,s){if(!e)return!1;if((0,a.M)())return!0;if(!Array.isArray(t.orgRoleList))return!1;const r=t.orgRoleList.map((e=>e.id));if(!r.includes(s)||!r.includes(t.role??""))return!1;const i=r.indexOf(s);return r.indexOf(t.role??"")>=i}(l,s,t)),[s,t,l]);return(0,n.l)(o)?o({hasRole:c}):c?o:null}))},"./app/components/searchBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>x,p:()=>g});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),a=s("./app/components/button.tsx"),n=s("./app/components/inputGroup.tsx"),o=s("./app/icons/index.tsx"),l=s("./app/icons/iconClose.tsx"),c=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{query:t,defaultQuery:s="",onChange:r,onSearch:a,width:d,size:m,className:x,trailing:Z,...f}=e;const y=(0,i.useRef)(null),[b,v]=(0,i.useState)(t??s);(0,i.useEffect)((()=>{"string"==typeof t&&v(t)}),[t]);const w=(0,i.useCallback)((e=>{const{value:t}=e.target;v(t),r?.(t)}),[r]),j=(0,i.useCallback)((e=>{e.preventDefault(),y.current?.blur(),a?.(b)}),[a,b]),A=(0,i.useCallback)((()=>{v(""),r?.(""),a?.("")}),[r,a]);return(0,p.tZ)(u,{onSubmit:j,className:x,children:(0,p.BX)(n.BZ,{children:[(0,p.tZ)(n.t_,{disablePointerEvents:!0,children:(0,p.tZ)(o.jV,{color:"subText",size:"xs"===m?"xs":"sm"})}),(0,p.tZ)(h,{...f,ref:y,type:"text",name:"query",autoComplete:"off",value:b,onChange:w,width:d,size:m}),(0,p.BX)(n.Oj,{children:[Z,!!b&&(0,p.tZ)(g,{type:"button",size:"zero",borderless:!0,onClick:A,icon:(0,p.tZ)(l.b,{size:"xs"}),"aria-label":(0,c.t)("Clear")})]})]})})}m.displayName="SearchBar";const u=(0,r.Z)("form",{target:"e4xnwji2"})({name:"4bgdod",styles:"display:block;position:relative"}),h=(0,r.Z)(n.II,{target:"e4xnwji1"})((e=>e.width&&`width: ${e.width};`),";"),g=(0,r.Z)(a.ZP,{target:"e4xnwji0"})("color:",(e=>e.theme.subText),";padding:",(0,d.Z)(.5),";"),x=m},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;const i=`${e} - ${t}`,a=r?`${i} - ${r}`:i;return s?`${a} - Sentry`:a}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("./app/components/asyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class n extends r.Z{getTitle(){return""}render(){return(0,a.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}n.displayName="AsyncView"},"./app/views/settings/projectSourceMaps/detail/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("../node_modules/react/index.js"),n=s("./app/actionCreators/indicator.tsx"),o=s("./app/components/acl/access.tsx"),l=s("./app/components/button.tsx"),c=s("./app/components/buttonBar.tsx"),d=s("./app/components/confirm.tsx"),p=s("./app/components/pagination.tsx"),m=s("./app/components/panels/index.tsx"),u=s("./app/components/searchBar.tsx"),h=s("./app/components/textOverflow.tsx"),g=s("./app/components/tooltip.tsx"),x=s("./app/components/version.tsx"),Z=s("./app/icons/index.tsx"),f=s("./app/locale.tsx"),y=s("./app/styles/space.tsx"),b=s("./app/utils/formatters.tsx"),v=s("./app/utils/queryString.tsx"),w=s("./app/utils/routeTitle.tsx"),j=s("./app/views/asyncView.tsx"),A=s("./app/views/settings/components/settingsPageHeader.tsx"),z=s("./app/components/acl/role.tsx"),S=s("./app/components/fileSize.tsx"),q=s("./app/components/links/link.tsx"),R=s("./app/components/tag.tsx"),k=s("./app/components/timeSince.tsx"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const C=e=>{let{artifact:t,onDelete:s,downloadUrl:r,downloadRole:i,orgSlug:n}=e;const{name:p,size:m,dateCreated:u,id:h,dist:x}=t,y=()=>{s(h)};return(0,_.BX)(a.Fragment,{children:[(0,_.BX)($,{children:[(0,_.tZ)(P,{children:p||`(${(0,f.t)("empty")})`}),(0,_.BX)(T,{children:[(0,_.BX)(E,{children:[(0,_.tZ)(Z.jo,{size:"sm"}),(0,_.tZ)(k.Z,{date:u})]}),(0,_.tZ)(I,{type:x?"info":void 0,tooltipText:x?void 0:(0,f.t)("No distribution set"),children:x??(0,f.t)("none")})]})]}),(0,_.tZ)(B,{children:(0,_.tZ)(S.Z,{bytes:m})}),(0,_.tZ)(D,{children:(0,_.BX)(c.ZP,{gap:.5,children:[(0,_.tZ)(z.u,{role:i,children:e=>{let{hasRole:t}=e;return(0,_.tZ)(g.Z,{title:(0,f._N)("Artifacts can only be downloaded by users with organization [downloadRole] role[orHigher]. This can be changed in [settingsLink:Debug Files Access] settings.",{downloadRole:i,orHigher:"owner"!==i?` ${(0,f.t)("or higher")}`:"",settingsLink:(0,_.tZ)(q.Z,{to:`/settings/${n}/#debugFilesRole`})}),disabled:t,isHoverable:!0,children:(0,_.tZ)(l.ZP,{size:"sm",icon:(0,_.tZ)(Z.Dj,{size:"sm"}),disabled:!t,href:r,title:t?(0,f.t)("Download Artifact"):void 0,"aria-label":(0,f.t)("Download Artifact")})})}}),(0,_.tZ)(o.Z,{access:["project:releases"],children:e=>{let{hasAccess:t}=e;return(0,_.tZ)(g.Z,{disabled:t,title:(0,f.t)("You do not have permission to delete artifacts."),children:(0,_.tZ)(d.Z,{message:(0,f.t)("Are you sure you want to remove this artifact?"),onConfirm:y,disabled:!t,children:(0,_.tZ)(l.ZP,{size:"sm",icon:(0,_.tZ)(Z.Fz,{size:"sm"}),title:t?(0,f.t)("Remove Artifact"):void 0,"aria-label":(0,f.t)("Remove Artifact"),disabled:!t})})})}})]})})]})};C.displayName="SourceMapsArtifactRow";const $=(0,i.Z)("div",{target:"e2h2xmi6"})({name:"1ij1o5n",styles:"display:flex;flex-direction:column;align-items:flex-start;justify-content:center"}),B=(0,i.Z)("div",{target:"e2h2xmi5"})({name:"ivtwc8",styles:"display:flex;justify-content:flex-end;text-align:right;align-items:center"}),D=(0,i.Z)(B,{target:"e2h2xmi4"})(""),P=(0,i.Z)("div",{target:"e2h2xmi3"})("padding-right:",(0,y.Z)(4),";overflow-wrap:break-word;word-break:break-all;"),T=(0,i.Z)("div",{target:"e2h2xmi2"})("width:100%;display:flex;margin-top:",(0,y.Z)(1),";align-items:center;"),E=(0,i.Z)("div",{target:"e2h2xmi1"})("display:grid;gap:",(0,y.Z)(.5),";grid-template-columns:min-content 1fr;font-size:",(e=>e.theme.fontSizeMedium),";align-items:center;color:",(e=>e.theme.subText),";"),I=(0,i.Z)(R.Z,{target:"e2h2xmi0"})("margin-left:",(0,y.Z)(1),";"),F=C;class M extends j.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleSearch",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,query:e}})})),(0,r.Z)(this,"handleArtifactDelete",(async e=>{(0,n.E3)((0,f.t)("Removing artifact…"));try{await this.api.requestPromise(`${this.getArtifactsUrl()}${e}/`,{method:"DELETE"}),this.fetchData(),(0,n.S9)((0,f.t)("Artifact removed."))}catch{(0,n.Iw)((0,f.t)("Unable to remove artifact. Please try again."))}})),(0,r.Z)(this,"handleArchiveDelete",(async()=>{const{orgId:e,projectId:t,name:s}=this.props.params;(0,n.E3)((0,f.t)("Removing artifacts…"));try{await this.api.requestPromise(`/projects/${e}/${t}/files/source-maps/`,{method:"DELETE",query:{name:s}}),this.fetchData(),(0,n.S9)((0,f.t)("Artifacts removed."))}catch{(0,n.Iw)((0,f.t)("Unable to remove artifacts. Please try again."))}}))}getTitle(){const{projectId:e,name:t}=this.props.params;return(0,w.Z)((0,f.t)("Archive %s",(0,b.ko)(t)),e,!1)}getDefaultState(){return{...super.getDefaultState(),artifacts:[]}}getEndpoints(){return[["artifacts",this.getArtifactsUrl(),{query:{query:this.getQuery()}}]]}getArtifactsUrl(){const{orgId:e,projectId:t,name:s}=this.props.params;return`/projects/${e}/${t}/releases/${encodeURIComponent(s)}/files/`}getQuery(){const{query:e}=this.props.location.query;return(0,v.ro)(e)}getEmptyMessage(){return this.getQuery()?(0,f.t)("There are no artifacts that match your search."):(0,f.t)("There are no artifacts in this archive.")}renderLoading(){return this.renderBody()}renderArtifacts(){const{organization:e}=this.props,{artifacts:t}=this.state,s=this.api.baseUrl+this.getArtifactsUrl();return t.length?t.map((t=>(0,_.tZ)(F,{artifact:t,onDelete:this.handleArtifactDelete,downloadUrl:`${s}${t.id}/?download=1`,downloadRole:e.debugFilesRole,orgSlug:e.slug},t.id))):null}renderBody(){const{loading:e,artifacts:t,artifactsPageLinks:s}=this.state,{name:r,orgId:i}=this.props.params,{project:n}=this.props;return(0,_.BX)(a.Fragment,{children:[(0,_.tZ)(U,{title:(0,_.BX)(L,{children:[(0,f.t)("Archive")," ",(0,_.tZ)(h.Z,{children:(0,_.tZ)(x.Z,{version:r,tooltipRawVersion:!0,anchor:!1,truncate:!0})})]}),action:(0,_.BX)(N,{gap:1,children:[(0,_.tZ)(O,{to:`/organizations/${i}/releases/${encodeURIComponent(r)}/?project=${n.id}`,children:(0,f.t)("Go to Release")}),(0,_.tZ)(o.Z,{access:["project:releases"],children:e=>{let{hasAccess:t}=e;return(0,_.tZ)(g.Z,{disabled:t,title:(0,f.t)("You do not have permission to delete artifacts."),children:(0,_.tZ)(d.Z,{message:(0,f.t)("Are you sure you want to remove all artifacts in this archive?"),onConfirm:this.handleArchiveDelete,disabled:!t,children:(0,_.tZ)(l.ZP,{icon:(0,_.tZ)(Z.Fz,{size:"sm"}),title:(0,f.t)("Remove All Artifacts"),"aria-label":(0,f.t)("Remove All Artifacts"),disabled:!t})})})}}),(0,_.tZ)(u.Z,{placeholder:(0,f.t)("Filter artifacts"),onSearch:this.handleSearch,query:this.getQuery()})]})}),(0,_.tZ)(X,{headers:[(0,f.t)("Artifact"),(0,_.tZ)(Q,{children:(0,f.t)("File Size")},"size"),""],emptyMessage:this.getEmptyMessage(),isEmpty:0===t.length,isLoading:e,children:this.renderArtifacts()}),(0,_.tZ)(p.Z,{pageLinks:s})]})}}const U=(0,i.Z)(A.Z,{target:"e1qrdj7c5"})(">div{@media (max-width: ",(e=>e.theme.breakpoints.large),"){display:block;}>div{min-width:0;@media (max-width: ",(e=>e.theme.breakpoints.large),"){margin-bottom:",(0,y.Z)(2),";}}}"),L=(0,i.Z)("div",{target:"e1qrdj7c4"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),N=(0,i.Z)(c.ZP,{target:"e1qrdj7c3"})({name:"11g6mpt",styles:"justify-content:flex-start"}),X=(0,i.Z)(m.KB,{target:"e1qrdj7c2"})({name:"qc2mzu",styles:"grid-template-columns:minmax(220px, 1fr) max-content 120px"}),O=(0,i.Z)(l.ZP,{target:"e1qrdj7c1"})({name:"1bmnxg7",styles:"white-space:nowrap"}),Q=(0,i.Z)("div",{target:"e1qrdj7c0"})({name:"2qga7i",styles:"text-align:right"}),V=M}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectSourceMaps_detail_index_tsx.87ddc37cfb7ab0017433cc0e109d2800.js.map