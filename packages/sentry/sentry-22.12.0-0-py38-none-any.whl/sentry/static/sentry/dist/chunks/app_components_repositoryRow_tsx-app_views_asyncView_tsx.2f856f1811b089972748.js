"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_repositoryRow_tsx-app_views_asyncView_tsx"],{"./app/actionCreators/integrations.tsx":(e,t,s)=>{s.d(t,{Ag:()=>c,cQ:()=>i,eg:()=>p,qU:()=>a});var n=s("./app/actionCreators/indicator.tsx"),o=s("./app/api.tsx"),r=s("./app/locale.tsx");function i(e,t,s){(0,n.E3)();const o=e.requestPromise(`/organizations/${t}/repos/${s}/`,{method:"DELETE"});return o.then((()=>(0,n.B8)()),(()=>(0,n.Iw)((0,r.t)("Unable to delete repository.")))),o}function a(e,t,s){(0,n.E3)();const o=e.requestPromise(`/organizations/${t}/repos/${s}/`,{method:"PUT",data:{status:"visible"}});return o.then((()=>(0,n.B8)()),(()=>(0,n.Iw)((0,r.t)("Unable to cancel deletion.")))),o}function l(e){return e.then((e=>{const t=(0,r._N)("[repo] has been successfully added.",{repo:e.name});(0,n.S9)(t)}),(e=>{const t=e.responseJSON.errors?e.responseJSON.errors.__all__:(0,r.t)("Unable to add repository.");(0,n.Iw)(t)})),e}function c(e,t,s,o){const r={integrationId:o.id};return(0,n.E3)(),l(e.requestPromise(`/organizations/${t}/repos/${s}/`,{data:r,method:"PUT"}))}function p(e,t,s,o){const r={installation:o.id,identifier:s,provider:`integrations:${o.provider.key}`};return(0,n.E3)(),l(e.requestPromise(`/organizations/${t}/repos/`,{method:"POST",data:r}))}new o.KU},"./app/components/acl/access.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),r=s("./app/components/alert.tsx"),i=s("./app/locale.tsx"),a=s("./app/utils/isRenderFunc.tsx"),l=s("./app/utils/withConfig.tsx"),c=s("./app/utils/withOrganization.tsx");const p=(0,s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(r.Z,{type:"error",showIcon:!0,children:(0,i.t)("You do not have sufficient permissions to access this.")});class d extends o.Component{render(){const{organization:e,config:t,access:s,requireAll:n,isSuperuser:o,renderNoAccessMessage:r,children:i}=this.props,{access:l}=e||{access:[]},c=!s||s[n?"every":"some"]((e=>l.includes(e))),d=!(!t.user||!t.user.isSuperuser),u={hasAccess:c,hasSuperuser:d},m=c&&(!o||d);return m||"function"!=typeof r?!m&&r?p:(0,a.l)(i)?i(u):m?i:null:r(u)}}d.displayName="Access",(0,n.Z)(d,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const u=(0,c.Z)((0,l.Z)(d))},"./app/components/repositoryRow.tsx":(e,t,s)=>{s.d(t,{Z:()=>k});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),r=s("./app/actionCreators/integrations.tsx"),i=s("./app/actionCreators/modal.tsx"),a=s("./app/components/acl/access.tsx"),l=s("./app/components/button.tsx"),c=s("./app/components/confirm.tsx"),p=s("./app/components/links/externalLink.tsx"),d=s("./app/components/panels/index.tsx"),u=s("./app/components/forms/index.tsx"),m=s("./app/components/forms/form.tsx"),h=s("./app/locale.tsx"),g=s("./app/components/alert.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const y=[{name:"name",type:"string",required:!0,label:(0,h.t)("Name of your repository.")},{name:"url",type:"string",required:!1,label:(0,h.t)("Full URL to your repository."),placeholder:(0,h.t)("https://github.com/my-org/my-repo/")}];function Z(e){let{repository:t,onCancel:s,orgSlug:n,onSubmitSuccess:o,closeModal:r}=e;const i={name:t.name,url:t.url||""};return(0,x.BX)(m.Z,{initialData:i,onSubmitSuccess:e=>{o(e),r()},apiEndpoint:`/organizations/${n}/repos/${t.id}/`,apiMethod:"PUT",onCancel:s,children:[(0,x.tZ)(g.Z,{type:"warning",showIcon:!0,children:(0,h._N)("Changing the [name:repo name] may have consequences if it no longer matches the repo name used when [link:sending commits with releases].",{link:(0,x.tZ)(p.Z,{href:"https://docs.sentry.io/product/cli/releases/#sentry-cli-commit-integration"}),name:(0,x.tZ)("strong",{children:"repo name"})})}),y.map((e=>(0,x.tZ)(u.Ff,{field:e,inline:!1,stacked:!0,flexibleControlStateSize:!0},e.name)))]})}Z.displayName="RepositoryEditForm";const f=Z;var b=s("./app/components/tooltip.tsx"),w=s("./app/icons/index.tsx"),_=s("./app/styles/space.tsx"),v=s("./app/types/index.tsx"),E=s("./app/utils/withOrganization.tsx");function S(e){switch(e.status){case v.Fr.PENDING_DELETION:return"Deletion Queued";case v.Fr.DELETION_IN_PROGRESS:return"Deletion in Progress";case v.Fr.DISABLED:case v.Fr.HIDDEN:return"Disabled";default:return null}}function C(e){let{api:t,repository:s,onRepositoryChange:n,organization:l,orgId:d,showProvider:u=!1}=e;const m=l.features.includes("integrations-custom-scm")&&"integrations:custom_scm"===s.provider.id,g=s.status===v.Fr.ACTIVE,y=()=>(0,r.qU)(t,d,s.id).then((e=>{n&&n(e)}),(()=>{})),Z=()=>(0,r.cQ)(t,d,s.id).then((e=>{n&&n(e)}),(()=>{})),_=e=>{n?.(e)},E=e=>(0,x.tZ)(b.Z,{title:(0,h.t)("You must be an organization owner, manager or admin to remove a repository."),disabled:e,children:(0,x.tZ)(c.Z,{disabled:!e||!g&&s.status!==v.Fr.DISABLED,onConfirm:Z,message:(0,h.t)("Are you sure you want to remove this repository? All associated commit data will be removed in addition to the repository."),children:(0,x.tZ)(N,{size:"xs",icon:(0,x.tZ)(w.Fz,{size:"xs"}),"aria-label":(0,h.t)("delete"),disabled:!e})})}),C=()=>(0,i.openModal)((e=>{let{Body:t,Header:n,closeModal:r}=e;return(0,x.BX)(o.Fragment,{children:[(0,x.tZ)(n,{closeButton:!0,children:(0,h.t)("Edit Repository")}),(0,x.tZ)(t,{children:(0,x.tZ)(f,{orgSlug:d,repository:s,onSubmitSuccess:_,closeModal:r,onCancel:r})})]})}));return(0,x.tZ)(a.Z,{access:["org:integrations"],children:e=>{let{hasAccess:t}=e;return(0,x.BX)(D,{status:s.status,children:[(0,x.BX)(j,{children:[(0,x.BX)(z,{children:[(0,x.tZ)("strong",{children:s.name}),!g&&(0,x.BX)("small",{children:[" — ",S(s)]}),s.status===v.Fr.PENDING_DELETION&&(0,x.tZ)(N,{size:"xs",onClick:y,disabled:!t,"data-test-id":"repo-cancel",children:(0,h.t)("Cancel")})]}),(0,x.BX)("div",{children:[u&&(0,x.tZ)("small",{children:s.provider.name}),u&&s.url&&(0,x.tZ)("span",{children:" — "}),s.url&&(0,x.tZ)("small",{children:(0,x.tZ)(p.Z,{href:s.url,children:s.url.replace("https://","")})})]})]}),m?(0,x.BX)(I,{children:[(0,x.tZ)(N,{size:"xs",icon:(0,x.tZ)(w.yl,{size:"xs"}),"aria-label":(0,h.t)("edit"),disabled:!t||!g&&s.status!==v.Fr.DISABLED,onClick:C}),E(t)]}):E(t)]})}})}C.displayName="RepositoryRow";const D=(0,n.Z)(d.Lv,{target:"e1nskpen4"})("padding:",(0,_.Z)(1)," ",(0,_.Z)(2)," ",(0,_.Z)(2),";justify-content:space-between;align-items:center;flex:1;",(e=>e.status===v.Fr.DISABLED&&"\n    filter: grayscale(1);\n    opacity: 0.4;\n  "),";&:last-child{border-bottom:none;}"),N=(0,n.Z)(l.ZP,{target:"e1nskpen3"})("margin-left:",(0,_.Z)(1),";"),j=(0,n.Z)("div",{target:"e1nskpen2"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),I=(0,n.Z)("div",{target:"e1nskpen1"})("display:flex;margin-left:",(0,_.Z)(1),";"),z=(0,n.Z)("div",{target:"e1nskpen0"})({name:"3gzcvg",styles:"line-height:26px"}),k=(0,E.Z)(C)},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var n=s("./app/components/asyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends n.Z{getTitle(){return""}render(){return(0,r.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"}}]);
//# sourceMappingURL=../sourcemaps/app_components_repositoryRow_tsx-app_views_asyncView_tsx.a5bd8d72af4338f3ebaf18fe8f358abf.js.map