"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_monitors_details_tsx"],{"./app/components/acl/access.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),o=s("./app/components/alert.tsx"),i=s("./app/locale.tsx"),a=s("./app/utils/isRenderFunc.tsx"),d=s("./app/utils/withConfig.tsx"),l=s("./app/utils/withOrganization.tsx");const c=(0,s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(o.Z,{type:"error",showIcon:!0,children:(0,i.t)("You do not have sufficient permissions to access this.")});class p extends n.Component{render(){const{organization:e,config:t,access:s,requireAll:r,isSuperuser:n,renderNoAccessMessage:o,children:i}=this.props,{access:d}=e||{access:[]},l=!s||s[r?"every":"some"]((e=>d.includes(e))),p=!(!t.user||!t.user.isSuperuser),u={hasAccess:l,hasSuperuser:p},m=l&&(!n||p);return m||"function"!=typeof o?!m&&o?c:(0,a.l)(i)?i(u):m?i:null:o(u)}}p.displayName="Access",(0,r.Z)(p,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const u=(0,l.Z)((0,d.Z)(p))},"./app/components/issues/groupList.tsx":(e,t,s)=>{s.d(t,{Z:()=>R});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),o=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/lodash/isEqual.js"),a=s.n(i),d=s("../node_modules/lodash/omit.js"),l=s.n(d),c=s("../node_modules/query-string/index.js"),p=s("./app/actionCreators/members.tsx"),u=s("./app/components/emptyStateWarning.tsx"),m=s("./app/components/loadingError.tsx"),h=s("./app/components/loadingIndicator.tsx"),g=s("./app/components/pagination.tsx"),x=s("./app/components/panels/index.tsx"),Z=s("./app/components/replays/issuesReplayCountProvider.tsx"),y=s("./app/components/searchSyntax/parser.tsx"),b=s("./app/components/searchSyntax/utils.tsx"),f=s("./app/components/stream/group.tsx"),w=s("./app/locale.tsx"),v=s("./app/stores/groupStore.tsx"),k=s("./app/utils/withApi.tsx"),j=s("./app/utils/withSentryRouter.tsx"),S=s("./app/views/alerts/rules/metric/details/relatedIssuesNotAvailable.tsx"),q=s("./app/components/issues/groupListHeader.tsx"),C=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class P extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{loading:!0,error:!1,errorData:null,groups:[],pageLinks:null}),(0,r.Z)(this,"listener",v.Z.listen((()=>this.onGroupChange()),void 0)),(0,r.Z)(this,"fetchData",(async()=>{v.Z.loadInitialData([]);const{api:e,orgId:t,queryParams:s}=this.props;e.clear(),this.setState({loading:!0,error:!1,errorData:null}),(0,p.MA)(e,t).then((e=>{this.setState({memberList:(0,p.M4)(e)})}));const r=this.getGroupListEndpoint(),n=(0,y.UG)((s??this.getQueryParams()).query);if(n&&(0,b.ly)({tree:n,noResultValue:!1,visitorTest:e=>{let{token:t,returnResult:s}=e;return t.type===y.WU.LogicBoolean?s(!0):null}}))this.setState({error:!0,errorData:{detail:S.H},loading:!1});else try{const[t,,s]=await e.requestPromise(r,{includeAllArgs:!0});v.Z.add(t),this.setState({error:!1,errorData:null,loading:!1,pageLinks:s?.getResponseHeader("Link")??null},(()=>{this.props.onFetchSuccess?.(this.state,this.handleCursorChange)}))}catch(e){this.setState({error:!0,errorData:e.responseJSON,loading:!1})}}))}componentDidMount(){this.fetchData()}shouldComponentUpdate(e,t){return!a()(this.state,t)||e.endpointPath!==this.props.endpointPath||e.query!==this.props.query||!a()(e.queryParams,this.props.queryParams)}componentDidUpdate(e){const t=["end"];e.orgId===this.props.orgId&&e.endpointPath===this.props.endpointPath&&e.query===this.props.query&&a()(l()(e.queryParams,t),l()(this.props.queryParams,t))||this.fetchData()}componentWillUnmount(){v.Z.reset(),this.listener?.()}getGroupListEndpoint(){const{orgId:e,endpointPath:t,queryParams:s}=this.props,r=t??`/organizations/${e}/issues/`,n=s??this.getQueryParams();return`${r}?${c.stringify(n)}`}getQueryParams(){const{location:e,query:t}=this.props,s=e.query;return s.limit=50,s.sort="new",s.query=t,s}handleCursorChange(e,t,s,r){const n=parseInt(s.page,10);let i=isNaN(n)?r:n+r;i<=0&&(e=void 0,i=void 0),o.browserHistory.push({pathname:t,query:{...s,cursor:e,page:i}})}onGroupChange(){const e=v.Z.getAllItems();a()(e,this.state.groups)||this.setState({groups:e})}render(){const{canSelectGroups:e,withChart:t,renderEmptyMessage:s,renderErrorMessage:r,withPagination:n,useFilteredStats:o,useTintRow:i,customStatsPeriod:a,queryParams:d,queryFilterDescription:l,narrowGroups:c,source:p}=this.props,{loading:y,error:b,errorData:v,groups:k,memberList:j,pageLinks:S}=this.state;if(y)return(0,C.tZ)(h.Z,{});if(b)return"function"==typeof r&&v?r(v,this.fetchData):(0,C.tZ)(m.Z,{onRetry:this.fetchData});if(0===k.length)return"function"==typeof s?s():(0,C.tZ)(x.s_,{children:(0,C.tZ)(x.N,{children:(0,C.tZ)(u.Z,{children:(0,C.tZ)("p",{children:(0,w.t)("There don't seem to be any events fitting the query.")})})})});const P="auto"===d?.groupStatsPeriod?d?.groupStatsPeriod:f.g;return(0,C.BX)(Z.Z,{groupIds:k.map((e=>{let{id:t}=e;return t})),children:[(0,C.BX)(x.s_,{children:[(0,C.tZ)(q.Z,{withChart:!!t,narrowGroups:c}),(0,C.tZ)(x.N,{children:k.map((s=>{let{id:r,project:n}=s;const d=j?.hasOwnProperty(n.slug)?j[n.slug]:void 0;return(0,C.tZ)(f.Z,{id:r,canSelect:e,withChart:t,memberList:d,useFilteredStats:o,useTintRow:i,customStatsPeriod:a,statsPeriod:P,queryFilterDescription:l,narrowGroups:c,source:p},r)}))})]}),n&&(0,C.tZ)(g.Z,{pageLinks:S,onCursor:this.handleCursorChange})]})}}P.displayName="GroupList",(0,r.Z)(P,"defaultProps",{canSelectGroups:!0,withChart:!0,withPagination:!0,useFilteredStats:!0,useTintRow:!0,narrowGroups:!1});const R=(0,k.Z)((0,j.Z)(P))},"./app/components/issues/groupListHeader.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("./app/components/panels/index.tsx"),o=s("./app/locale.tsx"),i=s("./app/styles/space.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=e=>{let{withChart:t=!0,narrowGroups:s=!1,showLastTriggered:r=!1}=e;return(0,a.BX)(n.V9,{disablePadding:!0,children:[(0,a.tZ)(p,{children:(0,o.t)("Issue")}),t&&(0,a.tZ)(m,{narrowGroups:s,children:(0,o.t)("Graph")}),(0,a.tZ)(u,{children:(0,o.t)("events")}),(0,a.tZ)(u,{children:(0,o.t)("users")}),(0,a.tZ)(h,{narrowGroups:s,children:(0,o.t)("Assignee")}),r&&(0,a.tZ)(u,{children:(0,o.t)("Last Triggered")})]})};d.displayName="GroupListHeader";const l=d,c=(0,r.Z)("div",{target:"emaz6xo4"})("display:flex;align-self:center;margin:0 ",(0,i.Z)(2),";color:",(e=>e.theme.subText),";"),p=(0,r.Z)(c,{target:"emaz6xo3"})("flex:1;width:66.66%;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){width:50%;}"),u=(0,r.Z)(c,{target:"emaz6xo2"})("justify-content:flex-end;width:60px;@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){width:80px;}"),m=(0,r.Z)(c,{target:"emaz6xo1"})("justify-content:space-between;width:160px;@media (max-width: ",(e=>e.narrowGroups?e.theme.breakpoints.xlarge:e.theme.breakpoints.large),"){display:none;}"),h=(0,r.Z)(c,{target:"emaz6xo0"})("justify-content:flex-end;width:80px;@media (max-width: ",(e=>e.narrowGroups?e.theme.breakpoints.large:e.theme.breakpoints.medium),"){display:none;}")},"./app/utils/discover/charts.tsx":(e,t,s)=>{s.d(t,{CX:()=>i,Xp:()=>p,gu:()=>d,x1:()=>l});var r=s("./app/locale.tsx"),n=s("./app/utils.tsx"),o=s("./app/utils/formatters.tsx");function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,n.ri)(e)?a(e,t):"—"}function a(e,t){if(!(0,n.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,o.rl)(e,2);case"duration":return(0,o.g9)(e/1e3,2,!0);case"size":return(0,n.F)(e);default:return e.toString()}}function d(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return l(e,t,s,r)}function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return s?(0,o.Du)(e):e.toLocaleString();case"percentage":return(0,o.rl)(e,0);case"duration":return c(e,r);case"size":return(0,n.F)(e,0);default:return e.toString()}}function c(e,t){if(t??=u(e),0===e)return"0";switch(t){case o.ps:{const t=(e/o.ps).toFixed(0);return(0,r.t)("%swk",t)}case o.x4:{const t=(e/o.x4).toFixed(0);return(0,r.t)("%sd",t)}case o.kr:{const t=(e/o.kr).toFixed(0);return(0,r.t)("%shr",t)}case o.EB:{const t=(e/o.EB).toFixed(0);return(0,r.t)("%smin",t)}case o.sh:{const t=(e/o.sh).toFixed(0);return(0,r.t)("%ss",t)}default:const t=e.toFixed(0);return(0,r.t)("%sms",t)}}function p(e,t){let s=0;const r=function(e,t){let s;if(e[0]?.data){let r,n=e[0];e.forEach(((s,o)=>{let{seriesName:i,data:a}=s;!1!==t?.selected?.[i]&&a.length&&(n=e[o],r??=e[o])})),r?.data&&(s={max:Math.max(...r.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...n.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return s}(e,t);if(r){const e=(r.max+r.min)/2;s=u((r.max-r.min)/5),(e/s).toFixed(0).length>6&&(s=u(e))}return s}function u(e){return e>=o.ps?o.ps:e>=o.x4?o.x4:e>=o.kr?o.kr:e>=o.EB?o.EB:e>=o.sh?o.sh:1}},"./app/utils/useApiRequests.tsx":(e,t,s)=>{s.d(t,{Z:()=>b}),s("../node_modules/core-js/modules/es.error.cause.js");var r=s("../node_modules/react/index.js"),n=s("../node_modules/@sentry/core/esm/exports.js"),o=s("./app/components/loadingError.tsx"),i=s("./app/components/loadingIndicator.tsx"),a=s("./app/locale.tsx"),d=s("./app/utils/analytics.tsx"),l=s("./app/utils/getRouteStringFromRoutes.tsx"),c=s("./app/utils/useApi.tsx"),p=s("./app/utils/useLocation.tsx"),u=s("./app/utils/useParams.tsx"),m=s("./app/utils/useRoutes.tsx"),h=s("./app/views/permissionDenied.tsx"),g=s("./app/views/routeError.tsx"),x=s("./app/utils/useEffectAfterFirstRender.ts"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function y(){return(0,Z.tZ)(i.Z,{})}y.displayName="renderLoading";const b=function(e){let{endpoints:t,reloadOnVisible:s=!1,shouldReload:i=!1,shouldRenderBadRequests:b=!1,disableErrorReport:f=!0,onLoadAllEndpointsSuccess:w=(()=>{}),onRequestSuccess:v=(e=>{}),onRequestError:k=((e,t)=>{})}=e;const j=(0,c.Z)(),S=(0,p.T)(),q=(0,u.U)(),C=(0,r.useMemo)((()=>({data:{},isLoading:!0,hasError:!1,isReloading:!1,errors:{},remainingRequests:t.length})),[t.length]),[P,R]=(0,r.useState)(C),E=function(){const e=(0,m.V)(),t=(0,r.useRef)({hasMeasured:!1,finished:!1,error:!1});return(0,r.useEffect)((()=>{t.current={hasMeasured:!1,finished:!1,error:!1},e&&e.length&&d.oF.mark({name:`async-component-${(0,l.Z)(e)}`})}),[e]),(0,r.useCallback)((s=>{let{finished:r,error:n}=s;if(e&&(r&&(t.current.finished=!0),n&&(t.current.error=!0),!t.current.hasMeasured&&t.current.finished)){const s=(0,l.Z)(e);d.oF.measure({name:"app.component.async-component",start:`async-component-${s}`,data:{route:s,error:t.current.error}}),t.current.hasMeasured=!0}}),[e])}(),N=(0,r.useCallback)(((e,t)=>{let{stateKey:s,data:r,resp:n}=e;R((e=>{const o={...e,data:{...e.data,[s]:r,[`${s}PageLinks`]:n?.getResponseHeader("Link")}};return t&&(o.remainingRequests=e.remainingRequests-1,o.isLoading=e.remainingRequests>1,o.isReloading=e.isReloading&&o.isLoading,E({finished:0===o.remainingRequests})),o})),v({stateKey:s,data:r,resp:n})}),[v,E]),I=(0,r.useCallback)(((e,t)=>{const[s]=t;e&&e.responseText&&n.n_({message:e.responseText,category:"xhr",level:"error"}),R((t=>{const r=t.remainingRequests>1,n={errors:{...t.errors,[s]:e},data:{...t.data,[s]:null},hasError:t.hasError||!!e,remainingRequests:t.remainingRequests-1,isLoading:r,isReloading:t.isReloading&&r};return E({finished:0===n.remainingRequests,error:!0}),n})),k(e,t)}),[E,k]),L=(0,r.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.length?(j.clear(),R((s=>({...s,isLoading:!0,hasError:!1,remainingRequests:t.length,...e}))),await Promise.all(t.map((async e=>{let[t,s,r,n]=e;n=n??{};const o=S&&S.query||{};let i=r&&r.query||{};!n.paginate&&!o.cursor||n.disableEntireQuery||(i={...o,...i});try{const e=await j.requestPromise(s,{method:"GET",...r,query:i,includeAllArgs:!0}),[n,o,a]=e;N({stateKey:t,data:n,resp:a},!0)}catch(e){I(e,[t,s,r,n])}})))):R((e=>({...e,data:{},isLoading:!1,hasError:!1})))}),[j,t,I,N,S]),_=(0,r.useCallback)((()=>L({isReloading:!0})),[L]),z=(0,r.useCallback)((async()=>{try{await L()}catch(e){throw R((e=>({...e,hasError:!0}))),e}}),[L]);(0,r.useEffect)((()=>{z()}),[]);const T=(0,r.useCallback)((()=>i?_():(R({...C}),L())),[C,_,L,i]);(0,x.K)((()=>{T()}),[S?.search,S?.state,q]);const A=(0,r.useCallback)((()=>!P.isLoading&&!document.hidden&&_()),[P.isLoading,_]);(0,r.useEffect)((()=>(s&&document.addEventListener("visibilitychange",A),()=>document.removeEventListener("visibilitychange",A))),[s,A]),(0,r.useEffect)((()=>{t.length&&0===P.remainingRequests&&!P.hasError&&w()}),[P.remainingRequests,P.hasError,t.length]);const D=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=P.errors,r=Object.values(s).some((e=>401===e?.status)),n=Object.values(s).some((e=>403===e?.status)),i=!!Object.values(s).some((e=>0!==e?.status))||t;if(r)return(0,Z.tZ)(o.Z,{message:(0,a.t)("You are not authorized to access this resource.")});if(n)return(0,Z.tZ)(h.Z,{});if(b){const e=Object.values(s).filter((e=>400===e?.status&&e?.responseJSON?.detail)).map((e=>e.responseJSON.detail));if(e.length)return(0,Z.tZ)(o.Z,{message:[...new Set(e)].join("\n")})}return(0,Z.tZ)(g.Z,{error:e,disableLogSentry:!i,disableReport:f})}),[P.errors,f,b]),B=P.isLoading&&(!i||!P.isReloading),$=(0,r.useCallback)((e=>B?y():P.hasError?D(new Error("Unable to load all required endpoints")):e),[B,P.hasError,D]);return{...P,renderComponent:$}}},"./app/utils/useEffectAfterFirstRender.ts":(e,t,s)=>{s.d(t,{K:()=>n});var r=s("../node_modules/react/index.js");const n=(e,t)=>{const s=(0,r.useRef)(!0);(0,r.useEffect)((()=>{s.current?s.current=!1:e()}),t)}},"./app/views/alerts/rules/metric/details/relatedIssuesNotAvailable.tsx":(e,t,s)=>{s.d(t,{H:()=>l,z:()=>c});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("./app/components/acl/feature.tsx"),o=s("./app/components/alert.tsx"),i=s("./app/components/button.tsx"),a=s("./app/components/panels/index.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l='Error parsing search query: Boolean statements containing "OR" or "AND" are not supported in this search',c=e=>{let{buttonTo:t,buttonText:s}=e;return(0,d.tZ)(p,{type:"info",showIcon:!0,trailingItems:(0,d.tZ)(n.Z,{features:["discover-basic"],children:(0,d.tZ)(i.ZP,{type:"button",priority:"default",size:"xs",to:t,children:s})}),children:(0,d.tZ)("div",{"data-test-id":"loading-error-message",children:"Related Issues unavailable for this alert."})})};c.displayName="RelatedIssuesNotAvailable";const p=(0,r.Z)(o.Z,{target:"e14eefiq0"})(a.s_," &{border-radius:0;border-width:1px 0;}")},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){return(0,o.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/monitors/details.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ee});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),i=s("./app/components/datePageFilter.tsx"),a=s("./app/components/layouts/thirds.tsx"),d=s("./app/components/organizations/pageFilterBar.tsx"),l=s("./app/components/panels/index.tsx"),c=s("./app/locale.tsx"),p=s("./app/styles/space.tsx"),u=s("./app/utils/withOrganization.tsx"),m=s("./app/views/asyncView.tsx"),h=s("./app/components/duration.tsx"),g=s("./app/components/timeSince.tsx"),x=s("./app/components/tooltip.tsx"),Z=s("./app/utils.tsx"),y=s("./app/utils/useApiRequests.tsx");const b=(0,n.Z)("div",{target:"ehlf75x0"})("display:inline-block;position:relative;border-radius:50%;height:",(e=>e.size),"px;width:",(e=>e.size),"px;",(e=>e.color?`background: ${e.color};`:`background: ${"error"===e.status?e.theme.error:"ok"===e.status?e.theme.success:"missed"===e.status?e.theme.warning:e.theme.disabled};`),";");var f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const w=e=>{let{monitor:t}=e;const{data:s,hasError:r,renderComponent:n}=(0,y.Z)({endpoints:[["checkInList",`/monitors/${t.id}/checkins/`,{query:{per_page:"10"}}]]}),o=n((0,f.tZ)(l.N,{children:s.checkInList?.map((e=>(0,f.BX)(l.Lv,{children:[(0,f.tZ)(k,{children:(0,f.tZ)(x.Z,{title:(0,c._N)("Check In Status: [status]",{status:e.status}),children:(0,f.tZ)(b,{status:e.status,size:16})})}),(0,f.tZ)(j,{children:(0,f.tZ)(g.Z,{date:e.dateCreated})}),(0,f.tZ)(S,{children:(0,Z.ri)(e.duration)&&(0,f.tZ)(h.Z,{seconds:e.duration/1e3})})]},e.id)))}));return r?(0,f.tZ)(q,{children:o}):o},v=(0,n.Z)("div",{target:"e19bvxt54"})("margin-right:",(0,p.Z)(2),";"),k=(0,n.Z)(v,{target:"e19bvxt53"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),j=(0,n.Z)(v,{target:"e19bvxt52"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),S=(0,n.Z)("div",{target:"e19bvxt51"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),q=(0,n.Z)("div",{target:"e19bvxt50"})("margin:",(0,p.Z)(3)," ",(0,p.Z)(3)," 0;");var C=s("./app/components/breadcrumbs.tsx"),P=s("./app/components/charts/styles.tsx"),R=s("./app/components/idBadge/index.tsx"),E=s("../node_modules/react-router/es/index.js"),N=s("./app/actionCreators/indicator.tsx"),I=s("./app/components/acl/access.tsx"),L=s("./app/components/button.tsx"),_=s("./app/components/buttonBar.tsx"),z=s("./app/components/confirm.tsx"),T=s("./app/icons/index.tsx"),A=s("../node_modules/@sentry/core/esm/exports.js"),D=s("./app/utils/useApi.tsx");const B=(0,c.t)("These settings can only be edited by users with the organization owner, manager, or admin role."),$=e=>{let{monitor:t,orgId:s,onUpdate:r}=e;const n=(0,D.Z)(),o=()=>{const e=`/organizations/${s}/monitors/`;(0,N.E3)((0,c.t)("Deleting Monitor...")),n.requestPromise(`/monitors/${t.id}/`,{method:"DELETE"}).then((()=>{E.browserHistory.push(e)})).catch((()=>{(0,N.Iw)((0,c.t)("Unable to remove monitor."))}))},i=()=>{return e={status:"disabled"===t.status?"active":"disabled"},(0,N.E3)(),void n.requestPromise(`/monitors/${t.id}/`,{method:"PUT",data:e}).then((e=>{(0,N.B8)(),r?.(e)})).catch((e=>{var t;t=e,A.$e((e=>{A.Tb(t)})),window.console&&console.error&&console.error(t),(0,N.Iw)((0,c.t)("Unable to update monitor."))}));var e};return(0,f.tZ)(I.Z,{access:["project:write"],children:e=>{let{hasAccess:r}=e;return(0,f.tZ)(F,{children:(0,f.BX)(_.ZP,{gap:1,children:[(0,f.tZ)(L.ZP,{size:"sm",icon:(0,f.tZ)(T.yl,{size:"xs"}),to:`/organizations/${s}/monitors/${t.id}/edit/`,children:r?(0,c.t)("Edit"):(0,c.t)("View Config")}),(0,f.tZ)(L.ZP,{size:"sm",onClick:i,disabled:!r,title:B,tooltipProps:{disabled:r},children:"disabled"!==t.status?(0,c.t)("Pause"):(0,c.t)("Enable")}),(0,f.tZ)(z.Z,{onConfirm:o,message:(0,c.t)("Are you sure you want to permanently delete this cron monitor?"),disabled:!r,children:(0,f.tZ)(L.ZP,{size:"sm",icon:(0,f.tZ)(T.Fz,{size:"xs"}),title:B,tooltipProps:{disabled:r},children:(0,c.t)("Delete")})})]})})}})};$.displayName="MonitorHeaderActions";const F=(0,n.Z)("div",{target:"e11hcv560"})("margin-bottom:",(0,p.Z)(3),";display:flex;flex-shrink:1;align-self:flex-end;"),M=$;var X=s("./app/views/monitors/monitorIcon.tsx");const G={ok:(0,c.t)("Ok"),error:(0,c.t)("Failed"),disabled:(0,c.t)("Disabled"),active:(0,c.t)("Active"),missed_checkin:(0,c.t)("Missed")},U=e=>{let{monitor:t,orgId:s,onUpdate:r}=e;const n=[{label:(0,c.t)("Crons"),to:`/organizations/${s}/monitors`},{label:(0,c.t)("Cron Monitor Details")}];return(0,f.BX)(a.h4,{children:[(0,f.BX)(a.oB,{children:[(0,f.tZ)(C.Z,{crumbs:n}),(0,f.tZ)(a.Dx,{children:(0,f.BX)(O,{children:[(0,f.tZ)(R.Z,{project:t.project,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:t.project.slug}}),t.name]})}),(0,f.tZ)(H,{children:t.id})]}),(0,f.BX)(a.kP,{children:[(0,f.tZ)(M,{orgId:s,monitor:t,onUpdate:r}),(0,f.BX)(V,{children:[(0,f.tZ)(K,{children:(0,c.t)("Last Check-in")}),(0,f.tZ)(K,{children:(0,c.t)("Next Check-in")}),(0,f.tZ)(K,{children:(0,c.t)("Status")}),(0,f.tZ)("div",{children:t.lastCheckIn&&(0,f.tZ)(g.Z,{date:t.lastCheckIn})}),(0,f.tZ)("div",{children:t.nextCheckIn&&(0,f.tZ)(g.Z,{date:t.nextCheckIn})}),(0,f.BX)(W,{children:[(0,f.tZ)(X.Z,{status:t.status,size:16}),(0,f.tZ)(Q,{children:G[t.status]})]})]})]})]})};U.displayName="MonitorHeader";const O=(0,n.Z)("div",{target:"e1aws5ql5"})("display:grid;grid-template-columns:max-content 1fr;grid-column-gap:",(0,p.Z)(1),";align-items:center;"),H=(0,n.Z)("div",{target:"e1aws5ql4"})("margin-top:",(0,p.Z)(1),";color:",(e=>e.theme.subText),";"),V=(0,n.Z)("div",{target:"e1aws5ql3"})("display:grid;align-self:flex-end;grid-template-columns:repeat(3, max-content);grid-column-gap:",(0,p.Z)(4),";grid-row-gap:",(0,p.Z)(.5),";margin-bottom:",(0,p.Z)(2),";"),K=(0,n.Z)(P.OT,{target:"e1aws5ql2"})("text-transform:uppercase;font-size:",(e=>e.theme.fontSizeSmall),";text-align:center;"),W=(0,n.Z)("div",{target:"e1aws5ql1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Q=(0,n.Z)("div",{target:"e1aws5ql0"})("margin-left:",(0,p.Z)(1),";"),J=U;var Y=s("./app/components/emptyStateWarning.tsx"),ee=s("./app/components/issues/groupList.tsx"),te=s("./app/utils/dates.tsx"),se=s("./app/utils/usePageFilters.tsx");const re=()=>(0,f.tZ)(l.s_,{children:(0,f.tZ)(l.N,{children:(0,f.tZ)(Y.Z,{children:(0,f.tZ)("p",{children:(0,c.t)("No issues relating to this cron monitor have been found.")})})})});re.displayName="MonitorIssuesEmptyMessage";const ne=e=>{let{orgId:t,monitor:s}=e;const{selection:r}=(0,se.Z)(),{start:n,end:o,period:i}=r.datetime,a=n&&o?{start:(0,te.v5)(n),end:(0,te.v5)(o)}:{statsPeriod:i};return(0,f.tZ)(ee.Z,{orgId:t,endpointPath:`/organizations/${t}/issues/`,queryParams:{query:`monitor.id:"${s.id}"`,project:s.project.id,limit:5,...a},query:"",renderEmptyMessage:re,canSelectGroups:!1,withPagination:!1,withChart:!1,useTintRow:!1,source:"monitors"})};ne.displayName="MonitorIssues";const oe=ne;var ie=s("./app/components/charts/barChart.tsx"),ae=s("./app/components/charts/miniBarChart.tsx"),de=s("./app/components/charts/series/lineSeries.tsx"),le=s("./app/components/emptyMessage.tsx"),ce=s("./app/utils/discover/charts.tsx"),pe=s("./app/utils/theme.tsx");const ue=e=>{let{monitor:t}=e;const{selection:s}=(0,se.Z)(),{start:r,end:n,period:o}=s.datetime;let i,a;r&&n?(a=new Date(n).getTime()/1e3,i=new Date(r).getTime()/1e3):(a=Math.floor((new Date).getTime()/1e3),i=a-(0,te.NI)(o??"30d")/1e3);const{data:d,renderComponent:p}=(0,y.Z)({endpoints:[["stats",`/monitors/${t.id}/stats/`,{query:{since:i.toString(),until:a.toString(),resolution:"1d"}}]]});let u=!0;const m={seriesName:(0,c.t)("Successful"),yAxisIndex:0,data:[]},h={seriesName:(0,c.t)("Failed"),yAxisIndex:0,data:[]},g={seriesName:(0,c.t)("Missed"),yAxisIndex:0,data:[]},x=[];d.stats?.forEach((e=>{(e.ok||e.error||e.missed)&&(u=!1);const t=1e3*e.ts;m.data.push({name:t,value:e.ok}),h.data.push({name:t,value:e.error}),g.data.push({name:t,value:e.missed}),x.push([t,Math.trunc(e.duration)])}));const Z=[pe.ZP.green200,pe.ZP.red200,pe.ZP.yellow200],b=(0,c.t)("Average Duration"),w=[(0,de.Z)({name:b,data:x,lineStyle:{color:pe.ZP.purple300,width:2},itemStyle:{color:pe.ZP.purple300},yAxisIndex:1,animation:!1})],v=e=>({max:(0,ae.v)(150),splitLine:{show:!1},axisLabel:{formatter:t=>(0,ce.gu)(t,e,!0),showMaxLabel:!1}});return p((0,f.tZ)(l.s_,{children:(0,f.tZ)(l.N,{withPadding:!0,children:u?(0,f.tZ)(le.Z,{title:(0,c.t)("No check-ins have been recorded for this time period.")}):(0,f.tZ)(ie.v,{isGroupedByDate:!0,showTimeInTooltip:!0,useShortDate:!0,utc:!0,series:[m,h,g],stacked:!0,additionalSeries:w,height:150,colors:Z,tooltip:{trigger:"axis",valueFormatter:(e,t)=>t===b?(0,ce.CX)(e,"duration"):(0,ce.CX)(e,"number")},yAxes:[{...v("number")},{...v("duration")}],grid:{top:6,bottom:0,left:4,right:0},animation:!1})})}))};s("../node_modules/prism-sentry/index.css");var me=s("../node_modules/prismjs/prism.js"),he=s.n(me);function ge(e){let{children:t,language:s,filename:r,hideActionBar:n}=e;const i=(0,o.useRef)(null);(0,o.useEffect)((()=>{i.current&&he().highlightElement(i.current,!1)}),[t]);const[a,d]=(0,o.useState)("copy"),l="copy"===a?(0,c.t)("Copy"):"copied"===a?(0,c.t)("Copied"):(0,c.t)("Unable to copy");return(0,f.BX)(o.Fragment,{children:[!n&&(0,f.BX)(ye,{children:[r&&(0,f.tZ)("span",{children:r}),(0,f.tZ)(x.Z,{delay:0,isHoverable:!1,title:l,position:"bottom",children:(0,f.tZ)(Ze,{type:"button",onClick:async()=>{try{await navigator.clipboard.writeText(t),d("copied")}catch(e){d("error")}},onMouseLeave:()=>d("copy"),children:(0,f.tZ)(T.vU,{})})})]}),(0,f.tZ)(xe,{unsetBorderRadiusTop:!n,children:(0,f.tZ)("code",{ref:i,className:`language-${s}`,children:t})})]})}ge.displayName="CodeSnippet";const xe=(0,n.Z)("pre",{target:"eqij20a2"})("overflow-x:scroll;",(e=>e.unsetBorderRadiusTop?"\n  border-top-left-radius: 0px;\n  border-top-right-radius: 0px;\n  ":null)," word-break:break-all;white-space:pre-wrap;code{white-space:pre;}"),Ze=(0,n.Z)("button",{target:"eqij20a1"})({name:"1eoh6jg",styles:"all:unset;cursor:pointer"}),ye=(0,n.Z)((e=>{let{children:t,...s}=e;return(0,f.tZ)("div",{...s,children:(0,f.tZ)("pre",{className:"language-",children:t})})}),{target:"eqij20a0"})("pre.language-{display:flex;justify-content:end;gap:",(0,p.Z)(1),";padding:",(0,p.Z)(1.5),";margin-bottom:0px;border-bottom:1px solid ",(e=>e.theme.purple200),";border-radius:",(e=>e.theme.borderRadiusTop),";font-size:",(e=>e.theme.fontSizeSmall),";}");var be=s("./app/components/links/externalLink.tsx"),fe=s("./app/components/links/link.tsx"),we=s("./app/components/list/index.tsx"),ve=s("./app/components/list/listItem.tsx"),ke=s("./app/utils/useOrganization.tsx");const je=e=>{let{monitor:t}=e;const s=`https://sentry.io/api/0/monitors/${t.id}/checkins/`,r=`${s}{checkInId}/`,n=(0,ke.Z)();return(0,f.BX)(l.s_,{children:[(0,f.tZ)(l.V9,{children:(0,c.t)("How to instrument a cron monitor:")}),(0,f.tZ)(l.N,{withPadding:!0,children:(0,f.BX)(we.Z,{symbol:"bullet",children:[(0,f.BX)(qe,{children:[(0,f.tZ)(Se,{children:(0,c._N)("Use your [linkProjectDSN:DSN] to report the start of a cron job.",{linkDocs:(0,f.tZ)(be.Z,{href:"https://docs.sentry.io/api/auth/#dsn-authentication"}),linkProjectDSN:(0,f.tZ)(fe.Z,{to:`/settings/${n.slug}/projects/${t.project.slug}/keys/`})})}),(0,f.tZ)(ge,{language:"text",hideActionBar:!0,children:`curl -X POST \\\n'${s}' \\\n--header 'Authorization: DSN {DSN}' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{"status": "in_progress"}'`})]}),(0,f.BX)(qe,{children:[(0,f.tZ)(Se,{children:(0,c.t)("The above request will then return a check-in id which you can use to modify the check-in upon job completion")}),(0,f.tZ)(Se,{children:(0,c.t)("For reflecting successful execution, (with optional duration in ms).")}),(0,f.tZ)(ge,{language:"json",hideActionBar:!0,children:`curl -X PUT \\\n'${r}' \\\n--header 'Authorization: DSN {DSN}' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{"status": "ok", "duration": 3000}'`}),(0,f.tZ)(Se,{children:(0,c.t)("For reflecting failed execution, (with optional duration in ms).")}),(0,f.tZ)(ge,{language:"json",hideActionBar:!0,children:`curl -X PUT \\\n'${r}' \\\n--header 'Authorization: DSN {DSN}' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{"status": "error", "duration": 3000}'`})]})]})})]})};je.displayName="MonitorOnboarding";const Se=(0,n.Z)("p",{target:"ee9316w1"})("font-size:",(e=>e.theme.fontSizeLarge),";"),qe=(0,n.Z)(ve.Z,{target:"ee9316w0"})("margin-bottom:",(0,p.Z)(2),";"),Ce=je;class Pe extends m.Z{constructor(){super(...arguments),(0,r.Z)(this,"onUpdate",(e=>this.setState((t=>({monitor:{...t.monitor,...e}})))))}get orgSlug(){return this.props.organization.slug}getEndpoints(){const{params:e,location:t}=this.props;return[["monitor",`/monitors/${e.monitorId}/`,{query:t.query}]]}getTitle(){return this.state.monitor?`${this.state.monitor.name} - Monitors - ${this.orgSlug}`:`Monitors - ${this.orgSlug}`}renderBody(){const{monitor:e}=this.state;return null===e?null:(0,f.BX)(o.Fragment,{children:[(0,f.tZ)(J,{monitor:e,orgId:this.orgSlug,onUpdate:this.onUpdate}),(0,f.tZ)(a.uT,{children:(0,f.BX)(a.or,{fullWidth:!0,children:[!e.lastCheckIn&&(0,f.tZ)(Ce,{monitor:e}),(0,f.tZ)(Re,{condensed:!0,children:(0,f.tZ)(i.Z,{alignDropdown:"left"})}),(0,f.tZ)(ue,{monitor:e}),(0,f.tZ)(oe,{monitor:e,orgId:this.orgSlug}),(0,f.BX)(l.s_,{children:[(0,f.tZ)(l.V9,{children:(0,c.t)("Recent Check-ins")}),(0,f.tZ)(w,{monitor:e})]})]})})]})}}const Re=(0,n.Z)(d.Z,{target:"e1gkn4rw0"})("margin-bottom:",(0,p.Z)(2),";"),Ee=(0,u.Z)(Pe)},"./app/views/monitors/monitorIcon.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"ezalhst0"})("display:inline-block;position:relative;border-radius:50%;height:",(e=>e.size),"px;width:",(e=>e.size),"px;",(e=>e.color?`background: ${e.color};`:`background: ${"error"===e.status?e.theme.error:"ok"===e.status?e.theme.success:"missed_checkin"===e.status?e.theme.warning:e.theme.disabled};`),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_monitors_details_tsx.02490e1a01af84e4410f1a21e109d98f.js.map