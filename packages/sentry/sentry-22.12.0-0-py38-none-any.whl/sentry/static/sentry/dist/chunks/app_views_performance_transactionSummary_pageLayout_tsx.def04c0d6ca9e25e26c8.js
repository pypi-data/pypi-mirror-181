"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_pageLayout_tsx"],{"./app/components/acl/access.tsx":(e,t,n)=>{n.d(t,{Z:()=>d});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/react/index.js")),a=n("./app/components/alert.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils/isRenderFunc.tsx"),c=n("./app/utils/withConfig.tsx"),l=n("./app/utils/withOrganization.tsx");const p=(0,n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(a.Z,{type:"error",showIcon:!0,children:(0,o.t)("You do not have sufficient permissions to access this.")});class u extends s.Component{render(){const{organization:e,config:t,access:n,requireAll:r,isSuperuser:s,renderNoAccessMessage:a,children:o}=this.props,{access:c}=e||{access:[]},l=!n||n[r?"every":"some"]((e=>c.includes(e))),u=!(!t.user||!t.user.isSuperuser),d={hasAccess:l,hasSuperuser:u},m=l&&(!s||u);return m||"function"!=typeof a?!m&&a?p:(0,i.l)(o)?o(d):m?o:null:a(d)}}u.displayName="Access",(0,r.Z)(u,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const d=(0,l.Z)((0,c.Z)(u))},"./app/components/createAlertButton.tsx":(e,t,n)=>{n.d(t,{K:()=>h,Z:()=>S});var r=n("./app/actionCreators/indicator.tsx"),s=n("./app/actionCreators/navigation.tsx"),a=n("./app/components/acl/access.tsx"),o=n("./app/components/assistant/guideAnchor.tsx"),i=n("./app/components/button.tsx"),c=n("./app/components/links/link.tsx"),l=n("./app/icons/index.tsx"),p=n("./app/locale.tsx"),u=n("./app/utils/useApi.tsx"),d=n("./app/utils/useRouter.tsx"),m=n("./app/views/alerts/wizard/options.tsx"),g=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{projects:t,eventView:n,organization:r,referrer:s,onClick:a,alertType:o,disableMetricDataset:i,...c}=e;const l=t.find((e=>e.id===`${n.project[0]}`)),u=n.generateQueryStringObject();u.query?.includes(`project:${l?.slug}`)&&(u.query=u.query.replace(`project:${l?.slug}`,""));const d=o?m.FZ[o]:m.F4,h={pathname:`/organizations/${r.slug}/alerts/new/metric/`,query:{...u,createFromDiscover:!0,disableMetricDataset:i,referrer:s,...d,project:l?.slug,aggregate:u.yAxis??d.aggregate}};return(0,g.tZ)(y,{organization:r,onClick:()=>{a?.()},to:h,"aria-label":(0,p.t)("Create Alert"),...c})}h.displayName="CreateAlertFromViewButton";const y=e=>{let{organization:t,projectSlug:n,iconProps:m,referrer:h,hideIcon:y,showPermissionGuide:S,alertOption:f,onEnter:T,..._}=e;const x=(0,d.Z)(),E=(0,u.Z)(),v=e=>{const n=new URLSearchParams;return h&&n.append("referrer",h),":projectId"!==e&&n.append("project",e),f&&n.append("alert_option",f),`/organizations/${t.slug}/alerts/wizard/?${n.toString()}`};function A(e){e.preventDefault(),T?.(),(0,s.T)(v(":projectId"),x)}async function N(){const e=`/organizations/${t.slug}/`;(0,r.E3)();try{await E.requestPromise(e,{method:"PUT",data:{alertsMemberWrite:!0}}),(0,r.S9)((0,p.t)("Successfully updated organization settings"))}catch(e){(0,r.Iw)((0,p.t)("Unable to update organization settings"))}}const R=(0,p._N)("Ask your organization owner or manager to [settingsLink:enable alerts access] for you.",{settingsLink:(0,g.tZ)(c.Z,{to:`/settings/${t.slug}`})}),Z=e=>(0,g.tZ)(i.ZP,{disabled:!e,title:e?void 0:R,icon:!y&&(0,g.tZ)(l.vr,{...m}),to:n?v(n):void 0,tooltipProps:{isHoverable:!0,position:"top",overlayStyle:{maxWidth:"270px"}},onClick:n?T:A,..._,children:_.children??(0,p.t)("Create Alert")}),C=!t.alertsMemberWrite&&!!S;return(0,g.tZ)(a.Z,{organization:t,access:["alerts:write"],children:e=>{let{hasAccess:n}=e;return C?(0,g.tZ)(a.Z,{organization:t,access:["org:write"],children:e=>{let{hasAccess:t}=e;return(0,g.tZ)(o.Z,{target:t?"alerts_write_owner":"alerts_write_member",onFinish:t?N:void 0,children:Z(n)})}}):Z(n)}})};y.displayName="CreateAlertButton";const S=y},"./app/components/replays/replayCountBadge.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var r=n("./app/components/badge.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{count:t}=e;const n=t&&t>50?"50+":t??null;return(0,s.tZ)(r.Z,{text:n})}a.displayName="ReplayCountBadge";const o=a},"./app/components/replays/replaysFeatureBadge.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var r=n("./app/components/featureBadge.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){return(0,s.tZ)(r.Z,{...e,type:"beta"})}a.displayName="ReplaysFeatureBadge";const o=a},"./app/views/alerts/rules/metric/types.tsx":(e,t,n)=>{n.d(t,{F4:()=>a,GM:()=>c,LO:()=>g,Lm:()=>h,Tb:()=>d,Us:()=>m,XH:()=>u,Yh:()=>l,hd:()=>y,lK:()=>p,lT:()=>s,qz:()=>i,t6:()=>o});var r=n("./app/locale.tsx");let s,a,o,i,c,l,p,u,d,m;!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(s||(s={})),function(e){e.CRITICAL="critical",e.WARNING="warning",e.RESOLVE="resolve"}(a||(a={})),function(e){e.COUNT="count",e.CHANGE="change",e.PERCENT="percent"}(o||(o={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions",e.GENERIC_METRICS="generic_metrics",e.SESSIONS="sessions",e.METRICS="metrics"}(i||(i={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction",e.USER="user",e.SESSION="session"}(c||(c={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(l||(l={})),function(e){e.CRASH_FREE_SESSIONS="percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate",e.CRASH_FREE_USERS="percentage(users_crashed, users) AS _crash_rate_alert_aggregate"}(p||(p={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(u||(u={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(d||(d={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(m||(m={}));const g={[m.EMAIL]:(0,r.t)("Emaiâ€‹l"),[m.SLACK]:(0,r.t)("Slack"),[m.PAGERDUTY]:(0,r.t)("Pagerduty"),[m.MSTEAMS]:(0,r.t)("MS Teams"),[m.SENTRY_APP]:(0,r.t)("Notification")};let h;!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(h||(h={}));const y={[h.USER]:(0,r.t)("Member"),[h.TEAM]:(0,r.t)("Team")}},"./app/views/alerts/wizard/options.tsx":(e,t,n)=>{n.d(t,{A_:()=>l,F4:()=>u,F7:()=>d,FZ:()=>p,LH:()=>m,S:()=>g,VS:()=>i,gb:()=>c}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/locale.tsx"),s=n("./app/views/alerts/rules/metric/types.tsx");let a,o;!function(e){e[e.ERROR=0]="ERROR",e[e.PERFORMANCE=1]="PERFORMANCE",e[e.CRASH_RATE=2]="CRASH_RATE"}(a||(a={})),function(e){e.DISCOVER="discover",e.METRICS="metrics",e.METRICS_ENHANCED="metricsEnhanced"}(o||(o={}));const i={[s.qz.ERRORS]:a.ERROR,[s.qz.TRANSACTIONS]:a.PERFORMANCE,[s.qz.GENERIC_METRICS]:a.PERFORMANCE,[s.qz.METRICS]:a.CRASH_RATE,[s.qz.SESSIONS]:a.CRASH_RATE},c={issues:(0,r.t)("Issues"),num_errors:(0,r.t)("Number of Errors"),users_experiencing_errors:(0,r.t)("Users Experiencing Errors"),throughput:(0,r.t)("Throughput"),trans_duration:(0,r.t)("Transaction Duration"),apdex:(0,r.t)("Apdex"),failure_rate:(0,r.t)("Failure Rate"),lcp:(0,r.t)("Largest Contentful Paint"),fid:(0,r.t)("First Input Delay"),cls:(0,r.t)("Cumulative Layout Shift"),custom:(0,r.t)("Custom Metric"),crash_free_sessions:(0,r.t)("Crash Free Session Rate"),crash_free_users:(0,r.t)("Crash Free User Rate")},l=e=>[{categoryHeading:(0,r.t)("Errors"),options:["issues","num_errors","users_experiencing_errors"]},...e.features.includes("crash-rate-alerts")?[{categoryHeading:(0,r.t)("Sessions"),options:["crash_free_sessions","crash_free_users"]}]:[],{categoryHeading:(0,r.t)("Performance"),options:["throughput","trans_duration","apdex","failure_rate","lcp","fid","cls"]},{categoryHeading:(0,r.t)("Other"),options:["custom"]}],p={num_errors:{aggregate:"count()",dataset:s.qz.ERRORS,eventTypes:s.GM.ERROR},users_experiencing_errors:{aggregate:"count_unique(user)",dataset:s.qz.ERRORS,eventTypes:s.GM.ERROR},throughput:{aggregate:"count()",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},trans_duration:{aggregate:"p95(transaction.duration)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},apdex:{aggregate:"apdex(300)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},failure_rate:{aggregate:"failure_rate()",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},lcp:{aggregate:"p95(measurements.lcp)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},fid:{aggregate:"p95(measurements.fid)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},cls:{aggregate:"p95(measurements.cls)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},custom:{aggregate:"p95(measurements.fp)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},crash_free_sessions:{aggregate:s.lK.CRASH_FREE_SESSIONS,dataset:s.qz.SESSIONS,eventTypes:s.GM.SESSION},crash_free_users:{aggregate:s.lK.CRASH_FREE_USERS,dataset:s.qz.SESSIONS,eventTypes:s.GM.USER}},u=p.num_errors,d=new Set(["num_errors","users_experiencing_errors","throughput","apdex","failure_rate","crash_free_sessions","crash_free_users"]),m=new Set(["trans_duration","lcp","fid","cls"]);function g(e,t){return e===s.qz.ERRORS?o.DISCOVER:t?o.METRICS_ENHANCED:e===s.qz.GENERIC_METRICS?o.METRICS:o.DISCOVER}},"./app/views/performance/breadcrumb.tsx":(e,t,n)=>{n.d(t,{Z:()=>y});var r=n("./app/components/breadcrumbs.tsx"),s=n("./app/locale.tsx"),a=n("./app/utils/queryString.tsx"),o=n("./app/views/performance/transactionSummary/tabs.tsx"),i=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),l=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),p=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),u=n("./app/views/performance/transactionSummary/utils.tsx"),d=n("./app/views/performance/vitalDetail/utils.tsx"),m=n("./app/views/performance/utils.tsx"),g=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){return(0,g.tZ)(r.Z,{crumbs:function(){const t=[],{organization:n,location:r,transaction:g,vitalName:h,spanSlug:y,eventSlug:S,traceSlug:f,tab:T}=e,_={pathname:(0,m.de)(n),query:{...r.query,transaction:void 0}};if(t.push({to:_,label:(0,s.t)("Performance"),preservePageFilters:!0}),h){const e=(0,d.i4)({orgSlug:n.slug,vitalName:"fcp",projectID:(0,a.ro)(r.query.project),query:r.query});t.push({to:e,label:(0,s.t)("Vital Detail"),preservePageFilters:!0})}else if(g){const e={orgSlug:n.slug,transaction:g.name,projectID:g.project,query:r.query};switch(T){case o.Z.Tags:{const n=(0,l.vG)(e);t.push({to:n,label:(0,s.t)("Tags"),preservePageFilters:!0});break}case o.Z.Events:{const n=(0,i.xr)(e);t.push({to:n,label:(0,s.t)("All Events"),preservePageFilters:!0});break}case o.Z.WebVitals:{const n=(0,p.Pl)(e);t.push({to:n,label:(0,s.t)("Web Vitals"),preservePageFilters:!0});break}case o.Z.Spans:{const n=(0,c.hN)(e);t.push({to:n,label:(0,s.t)("Spans"),preservePageFilters:!0});break}case o.Z.TransactionSummary:default:{const n=(0,u.e1)(e);t.push({to:n,label:(0,s.t)("Transaction Summary"),preservePageFilters:!0})}}}return g&&y?t.push({to:"",label:(0,s.t)("Span Summary")}):g&&S?t.push({to:"",label:(0,s.t)("Event Details")}):f&&t.push({to:"",label:(0,s.t)("Trace View")}),t}()})}h.displayName="Breadcrumb";const y=h},"./app/views/performance/transactionSummary/pageLayout.tsx":(e,t,n)=>{n.d(t,{Ox:()=>Ee,ZP:()=>Re,C1:()=>Ne});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/react/index.js"),a=n("../node_modules/react-router/es/index.js"),o=n("./app/components/acl/feature.tsx"),i=n("./app/components/alert.tsx"),c=n("./app/components/layouts/thirds.tsx"),l=n("./app/components/noProjectMessage.tsx"),p=n("./app/components/organizations/pageFilters/container.tsx"),u=n("./app/components/sentryDocumentTitle.tsx"),d=n("./app/components/tabs/index.tsx"),m=n("./app/locale.tsx"),g=n("./app/styles/organization.tsx"),h=n("./app/utils.tsx"),y=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),S=n("./app/utils/performance/contexts/metricsCardinality.tsx"),f=n("./app/utils/performance/contexts/performanceEventViewContext.tsx"),T=n("./app/utils/queryString.tsx"),_=n("./app/utils/withDomainRequired.tsx"),x=n("./app/views/performance/utils.tsx"),E=n("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),v=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),A=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),N=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),R=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),Z=(n("../node_modules/core-js/modules/es.array.includes.js"),n("./app/components/assistant/guideAnchor.tsx")),C=n("./app/components/buttonBar.tsx"),I=n("./app/components/createAlertButton.tsx"),b=n("./app/components/featureBadge.tsx"),w=n("./app/components/idBadge/index.tsx"),j=n("./app/components/profiling/ProfilingOnboarding/util.ts"),O=n("./app/components/replays/replayCountBadge.tsx"),q=n("./app/components/replays/replaysFeatureBadge.tsx"),P=n("./app/components/replays/useReplaysCount.tsx"),M=n("./app/styles/space.tsx"),z=n("./app/utils/analytics.tsx"),V=n("../node_modules/lodash/omit.js"),U=n.n(V),k=n("../node_modules/lodash/pick.js"),F=n.n(k),D=n("./app/utils/discover/genericDiscoverQuery.tsx"),L=n("./app/utils/tokenizeSearch.tsx"),B=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function H(e){const{eventView:t,location:n,transaction:r,type:s}=e,a={transaction:`"${(0,h.d9)((0,L.Bn)(r))}"`,type:s},o=F()(t.getEventsAPIPayload(n),["project","environment"]);return Object.assign(a,o)}function G(e){return(0,B.tZ)(D.ZP,{route:"events-has-measurements",getRequestPayload:H,...U()(e,"children"),children:t=>{let{tableData:n,...r}=t;return e.children({hasMeasurements:n?.measurements??null,...r})}})}G.displayName="HasMeasurementsQuery";const X=G;var W=n("./app/utils/replays/projectSupportsReplay.tsx"),Y=n("./app/views/performance/breadcrumb.tsx"),K=n("./app/views/performance/landing/utils.tsx"),$=n("./app/views/performance/transactionSummary/tabs.tsx"),Q=n("./app/components/button.tsx"),J=n("./app/components/performance/teamKeyTransaction.tsx"),ee=n("./app/components/performance/teamKeyTransactionsManager.tsx"),te=n("./app/components/tooltip.tsx"),ne=n("./app/icons/index.tsx"),re=n("./app/utils/useTeams.tsx"),se=n("./app/utils/withProjects.tsx");class ae extends s.Component{render(){const{isOpen:e,keyedTeams:t,...n}=this.props,r=t?.length??0,s=(0,B.tZ)(Q.ZP,{...n,size:"sm",icon:r?(0,B.tZ)(ne.GK,{color:"yellow400",isSolid:!0}):(0,B.tZ)(ne.GK,{}),children:r?(0,m.tn)("Starred for Team","Starred for Teams",r):(0,m.t)("Star for Team")});if(!e&&t?.length){const e=t.map((e=>{let{slug:t}=e;return t})).join(", ");return(0,B.tZ)(te.Z,{title:e,children:s})}return s}}function oe(e){let{counts:t,getKeyedTeams:n,project:r,transactionName:s,...a}=e;const o=n(r.id,s);return(0,B.tZ)(J.Z,{counts:t,keyedTeams:o,title:ae,project:r,transactionName:s,...a})}function ie(e){let{eventView:t,organization:n,projects:r,...s}=e;const{teams:a,initiallyLoaded:o}=(0,re.Z)({provideUserTeams:!0});if(1!==t.project.length)return(0,B.tZ)(ae,{isOpen:!1,disabled:!0,keyedTeams:null});const i=String(t.project[0]),c=r.find((e=>e.id===i));return(0,h.ri)(c)?(0,B.tZ)(ee.z,{organization:n,teams:a,selectedTeams:["myteams"],selectedProjects:[String(i)],children:(0,B.tZ)(ee.$,{children:e=>{let{isLoading:t,...r}=e;return(0,B.tZ)(oe,{organization:n,project:c,isLoading:t||!o,...s,...r})}})}):(0,B.tZ)(ae,{isOpen:!1,disabled:!0,keyedTeams:null})}ae.displayName="TitleButton",oe.displayName="TeamKeyTransactionButton",ie.displayName="TeamKeyTransactionButtonWrapper";const ce=(0,se.Z)(ie);var le=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),pe=n("./app/actionCreators/indicator.tsx"),ue=n("./app/actionCreators/modal.tsx"),de=n("./app/utils/withApi.tsx"),me=n("./app/views/performance/transactionSummary/transactionThresholdModal.tsx");class ge extends s.Component{constructor(){super(...arguments),(0,le.Z)(this,"state",{transactionThreshold:void 0,transactionThresholdMetric:void 0,loadingThreshold:!1}),(0,le.Z)(this,"fetchTransactionThreshold",(()=>{const{api:e,organization:t,transactionName:n}=this.props,r=this.getProject();if(!(0,h.ri)(r))return;const s=`/organizations/${t.slug}/project-transaction-threshold-override/`;this.setState({loadingThreshold:!0}),e.requestPromise(s,{method:"GET",includeAllArgs:!0,query:{project:r.id,transaction:n}}).then((e=>{let[t]=e;this.setState({loadingThreshold:!1,transactionThreshold:t.threshold,transactionThresholdMetric:t.metric})})).catch((()=>{const e=`/projects/${t.slug}/${r.slug}/transaction-threshold/configure/`;this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:r.id}}).then((e=>{let[t]=e;this.setState({loadingThreshold:!1,transactionThreshold:t.threshold,transactionThresholdMetric:t.metric})})).catch((e=>{this.setState({loadingThreshold:!1});const t=e.responseJSON?.threshold??null;(0,pe.Iw)(t)}))}))}))}componentDidMount(){this.fetchTransactionThreshold()}getProject(){const{projects:e,eventView:t}=this.props;if(!(0,h.ri)(t))return;const n=String(t.project[0]);return e.find((e=>e.id===n))}onChangeThreshold(e,t){const{onChangeThreshold:n}=this.props;this.setState({transactionThreshold:e,transactionThresholdMetric:t}),(0,h.ri)(n)&&n(e,t)}openModal(){const{organization:e,transactionName:t,eventView:n}=this.props,{transactionThreshold:r,transactionThresholdMetric:s}=this.state;(0,ue.openModal)((a=>(0,B.tZ)(me.ZP,{...a,organization:e,transactionName:t,eventView:n,transactionThreshold:r,transactionThresholdMetric:s,onApply:(e,t)=>this.onChangeThreshold(e,t)})),{modalCss:me.fY,backdrop:"static"})}render(){const{loadingThreshold:e}=this.state;return(0,B.tZ)(Q.ZP,{size:"sm",onClick:()=>this.openModal(),icon:(0,B.tZ)(ne.iC,{}),disabled:e,"aria-label":(0,m.t)("Settings"),"data-test-id":"set-transaction-threshold"})}}ge.displayName="TransactionThresholdButton";const he=(0,de.Z)((0,se.Z)(ge));function ye(e){let{eventView:t,organization:n,projects:r,projectId:a,metricsCardinality:i,location:l,transactionName:p,onChangeThreshold:u,currentTab:g,hasWebVitals:h}=e;function y(){(0,z.ec)({eventKey:"performance_views.summary.create_alert_clicked",eventName:"Performance Views: Create alert clicked",organization_id:n.id})}const S=r.find((e=>e.id===a)),f=n.features?.includes("performance-anomaly-detection-ui"),T=n.features.includes("session-replay-ui")&&(0,W.Z)(S),_=S&&n.features.includes("profiling")&&(0,j.kI)(S),x=(0,s.useCallback)((e=>{switch(h){case"maybe":return(0,K.Q_)(l,r,t).field===K.BY.FRONTEND_PAGELOAD||e;case"yes":return!0;default:return!1}}),[h,l,r,t]),E=(0,P.Z)({transactionNames:p,organization:n,project:S})[p];return(0,B.BX)(c.h4,{children:[(0,B.BX)(c.oB,{children:[(0,B.tZ)(Y.Z,{organization:n,location:l,transaction:{project:a,name:p},tab:g}),(0,B.tZ)(c.Dx,{children:(0,B.BX)(Se,{children:[S&&(0,B.tZ)(w.Z,{project:S,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:S.slug}}),p]})})]}),(0,B.tZ)(c.kP,{children:(0,B.BX)(C.ZP,{gap:1,children:[(0,B.tZ)(o.Z,{organization:n,features:["incidents"],children:e=>{let{hasFeature:s}=e;return s&&!i?.isLoading?(0,B.tZ)(I.K,{size:"sm",eventView:t,organization:n,projects:r,onClick:y,referrer:"performance",alertType:"trans_duration","aria-label":(0,m.t)("Create Alert"),disableMetricDataset:i?.outcome?.forceTransactionsOnly}):null}}),(0,B.tZ)(ce,{transactionName:p,eventView:t,organization:n}),(0,B.tZ)(Z.Z,{target:"project_transaction_threshold_override",position:"bottom",children:(0,B.tZ)(he,{organization:n,transactionName:p,eventView:t,onChangeThreshold:u})})]})}),(0,B.tZ)(X,{location:l,orgSlug:n.slug,eventView:t,transaction:p,type:"web",children:e=>{let{hasMeasurements:t}=e;const n=x(!!t);return(0,B.BX)(d.td,{hideBorder:!0,outerWrapStyles:{gridColumn:"1 / -1"},children:[(0,B.tZ)(d.ck,{children:(0,m.t)("Overview")},$.Z.TransactionSummary),(0,B.tZ)(d.ck,{children:(0,m.t)("All Events")},$.Z.Events),(0,B.tZ)(d.ck,{children:(0,m.t)("Tags")},$.Z.Tags),(0,B.tZ)(d.ck,{children:(0,m.t)("Spans")},$.Z.Spans),(0,B.BX)(d.ck,{textValue:(0,m.t)("Anomalies"),hidden:!f,children:[(0,m.t)("Anomalies"),(0,B.tZ)(b.Z,{type:"alpha",noTooltip:!0})]},$.Z.Anomalies),(0,B.tZ)(d.ck,{textValue:(0,m.t)("Web Vitals"),hidden:!n,children:(0,m.t)("Web Vitals")},$.Z.WebVitals),(0,B.BX)(d.ck,{textValue:(0,m.t)("Replays"),hidden:!T,children:[(0,m.t)("Replays"),(0,B.tZ)(O.Z,{count:E}),(0,B.tZ)(q.Z,{noTooltip:!0})]},$.Z.Replays),(0,B.BX)(d.ck,{textValue:(0,m.t)("Profiling"),hidden:!_,children:[(0,m.t)("Profiling"),(0,B.tZ)(b.Z,{type:"beta",noTooltip:!0})]},$.Z.Profiling)]})}})]})}ye.displayName="TransactionHeader";const Se=(0,r.Z)("div",{target:"ega7at50"})("display:grid;grid-template-columns:max-content 1fr;grid-column-gap:",(0,M.Z)(1),";align-items:center;"),fe=ye;var Te=n("./app/views/performance/transactionSummary/utils.tsx");const _e={[$.Z.WebVitals]:"performance_views.vitals.vitals_tab_clicked",[$.Z.Tags]:"performance_views.tags.tags_tab_clicked",[$.Z.Events]:"performance_views.events.events_tab_clicked",[$.Z.Spans]:"performance_views.spans.spans_tab_clicked",[$.Z.Anomalies]:"performance_views.anomalies.anomalies_tab_clicked"};function xe(e){const{location:t,organization:n,projects:r,tab:i,getDocumentTitle:m,generateEventView:g,childComponent:Z,features:C=[]}=e,I=(0,T.ro)(t.query.project),b=(0,x.JY)(t),[w,j]=(0,s.useState)(),O=(0,S.e0)(),[q,P]=(0,s.useState)(),[M,z]=(0,s.useState)(),V=(0,s.useCallback)((e=>{if(!b)return{};const r={orgSlug:n.slug,transaction:b,projectID:I,query:t.query};switch(e){case $.Z.Tags:return(0,N.vG)(r);case $.Z.Events:return(0,v.xr)(r);case $.Z.Spans:return(0,A.hN)(r);case $.Z.Anomalies:return(0,E.az)(r);case $.Z.Replays:return function(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/replays/`,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}(r);case $.Z.Profiling:return function(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/profiles/`,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}(r);case $.Z.WebVitals:return(0,R.Pl)({orgSlug:n.slug,transaction:b,projectID:(0,T.ro)(t.query.project),query:t.query});case $.Z.TransactionSummary:default:return(0,Te.e1)(r)}}),[t.query,n.slug,I,b]),U=(0,s.useCallback)((e=>{if(e===i)return;const s=_e[e];s&&(0,y.Z)(s,{organization:n,project_platforms:(0,x.p9)(t,r)}),a.browserHistory.push((0,_.D)(V(e)))}),[V,i,n,t,r]);if(!(0,h.ri)(I)||!(0,h.ri)(b))return Ne(n,t),null;const k=r.find((e=>e.id===I)),F=g({location:t,transactionName:b,organization:n});return(0,B.tZ)(u.Z,{title:m(b),orgSlug:n.slug,projectSlug:k?.slug,children:(0,B.tZ)(o.Z,{features:["performance-view",...C],organization:n,renderDisabled:Ee,children:(0,B.tZ)(f.bq,{value:{eventView:F},children:(0,B.tZ)(p.Z,{shouldForceProject:(0,h.ri)(k),forceProject:k,specificProjectSlugs:(0,h.ri)(k)?[k.slug]:[],children:(0,B.tZ)(d.mQ,{value:i,onChange:U,children:(0,B.tZ)(ve,{children:(0,B.BX)(l.Z,{organization:n,children:[(0,B.tZ)(fe,{eventView:F,location:t,organization:n,projects:r,projectId:I,transactionName:b,currentTab:i,hasWebVitals:i===$.Z.WebVitals?"yes":"maybe",onChangeThreshold:(e,t)=>{P(e),z(t)},metricsCardinality:O}),(0,B.BX)(c.uT,{children:[(0,h.ri)(w)&&(0,B.tZ)(Ae,{type:"error",showIcon:!0,children:w}),(0,B.tZ)(Z,{location:t,organization:n,projects:r,eventView:F,projectId:I,transactionName:b,setError:j,transactionThreshold:q,transactionThresholdMetric:M})]})]})})})})})})})}function Ee(){return(0,B.tZ)(i.Z,{type:"warning",children:(0,m.t)("You don't have access to this feature")})}xe.displayName="PageLayout",Ee.displayName="NoAccess";const ve=(0,r.Z)(g.JH,{target:"e1ehad6a1"})({name:"1hcx8jb",styles:"padding:0"}),Ae=(0,r.Z)(i.Z,{target:"e1ehad6a0"})({name:"3hfw1i",styles:"grid-column:1/3;margin:0"});function Ne(e,t){a.browserHistory.replace({pathname:`/organizations/${e.slug}/performance/`,query:{...t.query}})}const Re=xe},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,n)=>{var r;n.d(t,{Z:()=>s}),function(e){e.TransactionSummary="summary",e.WebVitals="vitals",e.Tags="tags",e.Events="events",e.Spans="spans",e.Anomalies="anomalies",e.Replays="replays",e.Profiling="profiling"}(r||(r={}));const s=r},"./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx":(e,t,n)=>{n.d(t,{ES:()=>c,az:()=>i,h2:()=>l,uT:()=>o});var r=n("./app/utils/discover/eventView.tsx"),s=n("./app/utils/queryString.tsx"),a=n("./app/utils/tokenizeSearch.tsx");const o="performance-anomaly-detection-ui";function i(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/anomalies/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function c(e,t){return{high:t.red300,low:t.yellow300}[e]}function l(e){let{location:t,transactionName:n}=e;const o=(0,s.ro)(t.query.query,""),i=new a.MY(o);return i.setFilterValues("transaction",[n]),r.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:["tpm()"],query:i.formatString(),projects:[]},t)}},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(e,t,n)=>{let r,s;n.d(t,{g:()=>s,p:()=>r}),function(e){e.P50_EXCLUSIVE_TIME="p50ExclusiveTime",e.P75_EXCLUSIVE_TIME="p75ExclusiveTime",e.P95_EXCLUSIVE_TIME="p95ExclusiveTime",e.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(r||(r={})),function(e){e.COUNT="count",e.AVG_OCCURRENCE="avgOccurrence",e.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(e,t,n)=>{n.d(t,{CS:()=>h,E5:()=>y,KK:()=>_,TK:()=>T,W6:()=>x,bc:()=>g,hN:()=>m,mV:()=>N,uQ:()=>A,xz:()=>E,zW:()=>v});var r=n("../node_modules/lodash/pick.js"),s=n.n(r),a=n("./app/constants/index.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils.tsx"),c=n("./app/utils/discover/eventView.tsx"),l=n("./app/utils/discover/fields.tsx"),p=n("./app/utils/queryString.tsx"),u=n("./app/utils/tokenizeSearch.tsx"),d=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function m(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/spans/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}const g=30,h=s()(a.wh,["1h","24h","7d","14d","30d"]),y=[{prefix:(0,o.t)("Sort By"),label:(0,o.t)("Total Self Time"),field:d.g.SUM_EXCLUSIVE_TIME},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("Average Count"),field:d.g.AVG_OCCURRENCE},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("Total Count"),field:d.g.COUNT},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("p50 Self Time"),field:d.p.P50_EXCLUSIVE_TIME},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("p75 Self Time"),field:d.p.P75_EXCLUSIVE_TIME},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("p95 Self Time"),field:d.p.P95_EXCLUSIVE_TIME},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("p99 Self Time"),field:d.p.P99_EXCLUSIVE_TIME}],S=d.g.SUM_EXCLUSIVE_TIME;function f(e){return y.find((t=>t.field===e))||y.find((e=>e.field===S))}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sort";const n=(0,p.ro)(e?.query?.[t])??S;return f(n)}function _(e){return f(e.sorts.length?e.sorts[0].field:S)}function x(e){if(!(0,i.ri)(e))return;const t=e.lastIndexOf(":");return t<0?void 0:{op:e.slice(0,t),group:e.slice(t+1)}}function E(e){let{location:t,transactionName:n}=e;const r=(0,p.ro)(t.query.query,""),s=new u.MY(r);s.setFilterValues("event.type",["transaction"]),s.setFilterValues("transaction",[n]),Object.keys(s.filters).forEach((e=>{(0,l.h1)(e)&&s.removeFilter(e)}));const a=c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:[...Object.values(d.g),...Object.values(d.p)],query:s.formatString(),projects:[]},t),o=T(t);return a.withSorts([{field:o.field,kind:"desc"}])}function v(e){const t=e.withColumns([{kind:"function",function:["count","",void 0,void 0]}]),n=new u.MY(e.query);return Object.keys(n.filters).forEach((e=>{(0,l.h1)(e)&&n.removeFilter(e)})),t.query=n.formatString(),t}const A={[d.g.SUM_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.AVG_OCCURRENCE]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","equation|count() / count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.COUNT]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P50_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.5)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P75_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P95_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.95)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P99_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.99)","count()","count_unique(id)","sumArray(spans_exclusive_time)"]};function N(e){return e.replace("exclusive","self")}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,n)=>{n.d(t,{Zn:()=>a,bZ:()=>o,oT:()=>l,oc:()=>c,vG:()=>i}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/utils/analytics.tsx"),s=n("./app/utils/queryString.tsx");function a(e){return(0,s.ro)(e.query.tagKey)}function o(e){(0,r.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(e.id,10)})}function i(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/tags/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query,tagKey:s.tagKey}}}function c(e){let t=(0,s.ro)(e.query?.tagSort)??"-frequency";return["sumdelta"].find((e=>t?.includes(e)))&&(t="-frequency"),t}function l(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const n=t.split("_");return{histogramField:t,bucketSize:parseInt(n[n.length-3],10),offset:parseInt(n[n.length-2],10),multiplier:parseInt(n[n.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,n)=>{n.d(t,{A1:()=>l,L0:()=>i,Pl:()=>s,eH:()=>o,jb:()=>c,oZ:()=>a});var r=n("./app/utils/performance/histogram/utils.tsx");function s(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/vitals/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function a(e,t){const n=(0,r.te)(e);return!e.length||t>=e[e.length-1].bin+n?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/n)}function o(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const n=e[t];for(let r=t+1;r<e.length;r++){const s=e[r];if(n.bin!==s.bin&&n.count!==s.count)return{point1:{x:t,y:Math.min(n.count,s.count)},point2:{x:r,y:Math.max(n.count,s.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function i(e,t){const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(n?.[0])||isNaN(n?.[1]))return null;const r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(r?.[0])||isNaN(r?.[1])?null:{point1:{x:n[0],y:n[1]},point2:{x:r[0],y:r[1]}}}function c(e,t,n){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||n.point1.x===n.point2.x||n.point1.y===n.point2.y)return null;const r=(e.x-t.point1.x)/(t.point2.x-t.point1.x),s=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:n.point1.x+(n.point2.x-n.point1.x)*r,y:n.point1.y+(n.point2.y-n.point1.y)*s}}function l(e,t){return!(e&&!t.some((t=>!e[t])))||Object.values(e).filter((e=>0===e.total)).length>0}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_pageLayout_tsx.ec47416830d04d225707897f095360fd.js.map