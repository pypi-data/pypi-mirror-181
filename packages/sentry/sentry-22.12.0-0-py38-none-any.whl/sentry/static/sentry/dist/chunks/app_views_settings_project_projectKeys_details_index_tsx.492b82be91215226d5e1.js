"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectKeys_details_index_tsx"],{"./app/components/acl/access.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),r=s("./app/components/alert.tsx"),o=s("./app/locale.tsx"),a=s("./app/utils/isRenderFunc.tsx"),l=s("./app/utils/withConfig.tsx"),d=s("./app/utils/withOrganization.tsx");const c=(0,s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(r.Z,{type:"error",showIcon:!0,children:(0,o.t)("You do not have sufficient permissions to access this.")});class p extends n.Component{render(){const{organization:e,config:t,access:s,requireAll:i,isSuperuser:n,renderNoAccessMessage:r,children:o}=this.props,{access:l}=e||{access:[]},d=!s||s[i?"every":"some"]((e=>l.includes(e))),p=!(!t.user||!t.user.isSuperuser),u={hasAccess:d,hasSuperuser:p},m=d&&(!n||p);return m||"function"!=typeof r?!m&&r?c:(0,a.l)(o)?o(u):m?o:null:r(u)}}p.displayName="Access",(0,i.Z)(p,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const u=(0,d.Z)((0,l.Z)(p))},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var i=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends i.Z{getTitle(){return""}render(){return(0,r.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}o.displayName="AsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var i=s("./app/components/acl/access.tsx"),n=s("./app/components/alert.tsx"),r=s("./app/locale.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=e=>{let{access:t=["project:write"],...s}=e;return(0,o.tZ)(i.Z,{access:t,children:e=>{let{hasAccess:t}=e;return!t&&(0,o.tZ)(n.Z,{"data-test-id":"project-permission-alert",type:"warning",...s,children:(0,r.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")})}})};a.displayName="PermissionAlert";const l=a},"./app/views/settings/project/projectKeys/details/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>W});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react-router/es/index.js"),r=s("./app/locale.tsx"),o=s("./app/views/asyncView.tsx"),a=s("./app/views/settings/components/settingsPageHeader.tsx"),l=s("./app/views/settings/project/permissionAlert.tsx"),d=s("../node_modules/react/index.js"),c=s("./app/actionCreators/indicator.tsx"),p=s("./app/components/acl/access.tsx"),u=s("./app/components/button.tsx"),m=s("./app/components/confirm.tsx"),h=s("./app/components/dateTime.tsx"),Z=s("./app/components/forms/field/index.tsx"),y=s("./app/components/forms/fields/booleanField.tsx"),f=s("./app/components/forms/fields/selectField.tsx"),x=s("./app/components/forms/fields/textField.tsx"),g=s("./app/components/forms/form.tsx"),w=s("./app/components/links/externalLink.tsx"),b=s("./app/components/panels/index.tsx"),v=s("./app/components/textCopyInput.tsx"),_=s("./app/utils/getDynamicText.tsx"),j=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),S=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/lodash/sortBy.js")),k=s.n(S),D=s("./app/components/acl/feature.tsx"),N=s("./app/components/acl/featureDisabled.tsx"),C=s("./app/components/forms/controls/rangeSlider/index.tsx"),I=s("./app/components/forms/formField/index.tsx"),P=s("./app/components/input.tsx"),E=s("./app/styles/space.tsx"),K=s("./app/utils.tsx"),R=s("./app/utils/formatters.tsx"),T=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const B=[0,60,300,900,3600,7200,14400,21600,43200,86400];function A(e){let{data:t,disabled:s,params:i}=e;function n(e,t,s){e({...t,count:Number(s.target.value)},s)}function o(e){const{rateLimit:s}=t,{window:i}=s??{};if((0,K.ri)(i)){if(e!==i)return B;if(!B.includes(i))return k()([...B,i])}return B}const{keyId:a,orgId:l,projectId:d}=i,c=`/projects/${l}/${d}/keys/${a}/`,p=e=>{let{features:t}=e;return(0,T.tZ)(N.Z,{alert:b.aU,features:t,featureName:(0,r.t)("Key Rate Limits")})};return(0,T.tZ)(g.Z,{saveOnBlur:!0,apiEndpoint:c,apiMethod:"PUT",initialData:t,children:(0,T.tZ)(D.Z,{features:["projects:rate-limits"],hookName:"feature-disabled:rate-limits",renderDisabled:e=>{let{children:t,...s}=e;return"function"==typeof t&&t({...s,renderDisabled:p})},children:e=>{let{hasFeature:t,features:i,organization:a,project:l,renderDisabled:d}=e;return(0,T.BX)(b.s_,{children:[(0,T.tZ)(b.V9,{children:(0,r.t)("Rate Limits")}),(0,T.BX)(b.N,{children:[(0,T.tZ)(b.aU,{type:"info",showIcon:!0,children:(0,r.t)("Rate limits provide a flexible way to manage your error\n                    volume. If you have a noisy project or environment you\n                    can configure a rate limit for this key to reduce the\n                    number of errors processed. To manage your transaction\n                    volume, we recommend adjusting your sample rate in your\n                    SDK configuration.")}),!t&&"function"==typeof d&&d({organization:a,project:l,features:i,hasFeature:t,children:null}),(0,T.tZ)(I.Z,{name:"rateLimit",label:(0,r.t)("Rate Limit"),disabled:s||!t,validate:e=>{let{form:t}=e;return t&&t.rateLimit&&void 0!==t.rateLimit.count&&void 0!==t.rateLimit.window?[]:[["rateLimit",(0,r.t)("Fill in both fields first")]]},formatMessageValue:e=>{let{count:t,window:s}=e;return(0,r._N)("[errors] in [timeWindow]",{errors:(0,r.tn)("%s error ","%s errors ",t),timeWindow:0===s?(0,r.t)("no time window"):(0,R._U)(s)})},help:(0,r.t)("Apply a rate limit to this credential to cap the amount of errors accepted during a time window."),inline:!1,children:e=>{let{onChange:i,onBlur:a,value:l}=e;const d="object"==typeof l?l.window:void 0;return(0,T.BX)(z,{children:[(0,T.tZ)(P.Z,{type:"number",name:"rateLimit.count",min:0,value:"object"==typeof l?l.count:void 0,placeholder:(0,r.t)("Count"),disabled:s||!t,onChange:e=>n(i,l,e),onBlur:e=>n(a,l,e)}),(0,T.tZ)(U,{children:(0,r.t)("event(s) in")}),(0,T.tZ)(C.Z,{name:"rateLimit.window",allowedValues:o(d),value:d,placeholder:(0,r.t)("Window"),formatLabel:e=>{if("number"==typeof e)return 0===e?(0,r.t)("None"):(0,R._U)(e)},disabled:s||!t,onChange:(e,t)=>function(e,t,s,i,n){const r={...s,window:i};e(r,n),t(r,n)}(i,a,l,Number(e),t)})]})}})]})]})}})})}A.displayName="KeyRateLimitsForm";const L=A,z=(0,j.Z)("div",{target:"e7j3zl21"})("display:grid;grid-template-columns:2fr 1fr 2fr;align-items:center;gap:",(0,E.Z)(1),";"),U=(0,j.Z)("small",{target:"e7j3zl20"})("font-size:",(e=>e.theme.fontSizeRelativeSmall),";text-align:center;white-space:nowrap;");var $=s("./app/views/settings/project/projectKeys/projectKeyCredentials.tsx");class X extends d.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{loading:!1,error:!1}),(0,i.Z)(this,"handleRemove",(async()=>{if(this.state.loading)return;(0,c.E3)((0,r.t)("Revoking keyâ€¦"));const{api:e,onRemove:t,params:s}=this.props,{keyId:i,orgId:n,projectId:o}=s;try{await e.requestPromise(`/projects/${n}/${o}/keys/${i}/`,{method:"DELETE"}),t(),(0,c.S9)((0,r.t)("Revoked key"))}catch(e){this.setState({error:!0,loading:!1}),(0,c.Iw)((0,r.t)("Unable to revoke key"))}}))}render(){const{keyId:e,orgId:t,projectId:s}=this.props.params,{data:i}=this.props,n=`/projects/${t}/${s}/keys/${e}/`,o=(0,_.Z)({value:i.dsn.cdn,fixed:"__JS_SDK_LOADER_URL__"});return(0,T.tZ)(p.Z,{access:["project:write"],children:e=>{let{hasAccess:t}=e;return(0,T.BX)(d.Fragment,{children:[(0,T.tZ)(g.Z,{saveOnBlur:!0,allowUndo:!0,apiEndpoint:n,apiMethod:"PUT",initialData:i,children:(0,T.BX)(b.s_,{children:[(0,T.tZ)(b.V9,{children:(0,r.t)("Details")}),(0,T.BX)(b.N,{children:[(0,T.tZ)(x.Z,{name:"name",label:(0,r.t)("Name"),disabled:!t,required:!1,maxLength:64}),(0,T.tZ)(y.Z,{name:"isActive",label:(0,r.t)("Enabled"),required:!1,disabled:!t,help:"Accept events from this key? This may be used to temporarily suspend a key."}),(0,T.tZ)(Z.Z,{label:(0,r.t)("Created"),children:(0,T.tZ)("div",{className:"controls",children:(0,T.tZ)(h.Z,{date:i.dateCreated})})})]})]})}),(0,T.tZ)(L,{params:this.props.params,data:i,disabled:!t}),(0,T.tZ)(g.Z,{saveOnBlur:!0,apiEndpoint:n,apiMethod:"PUT",initialData:i,children:(0,T.BX)(b.s_,{children:[(0,T.tZ)(b.V9,{children:(0,r.t)("JavaScript Loader")}),(0,T.BX)(b.N,{children:[(0,T.tZ)(Z.Z,{help:(0,r._N)("Copy this script into your website to setup your JavaScript SDK without any additional configuration. [link]",{link:(0,T.tZ)(w.Z,{href:"https://docs.sentry.io/platforms/javascript/install/lazy-load-sentry/",children:"What does the script provide?"})}),inline:!1,flexibleControlStateSize:!0,children:(0,T.tZ)(v.ZP,{children:`<script src='${o}' crossorigin="anonymous"><\/script>`})}),(0,T.tZ)(f.Z,{name:"browserSdkVersion",options:i.browserSdk?i.browserSdk.choices.map((e=>{let[t,s]=e;return{value:t,label:s}})):[],placeholder:(0,r.t)("4.x"),allowClear:!1,disabled:!t,help:(0,r.t)("Select the version of the SDK that should be loaded. Note that it can take a few minutes until this change is live.")})]})]})}),(0,T.BX)(b.s_,{children:[(0,T.tZ)(b.V9,{children:(0,r.t)("Credentials")}),(0,T.BX)(b.N,{children:[(0,T.tZ)(b.aU,{type:"info",showIcon:!0,children:(0,r.t)("Your credentials are coupled to a public and secret key. Different clients will require different credentials, so make sure you check the documentation before plugging things in.")}),(0,T.tZ)($.Z,{projectId:`${i.projectId}`,data:i,showPublicKey:!0,showSecretKey:!0,showProjectId:!0})]})]}),(0,T.tZ)(p.Z,{access:["project:admin"],children:(0,T.BX)(b.s_,{children:[(0,T.tZ)(b.V9,{children:(0,r.t)("Revoke Key")}),(0,T.tZ)(b.N,{children:(0,T.tZ)(Z.Z,{label:(0,r.t)("Revoke Key"),help:(0,r.t)("Revoking this key will immediately remove and suspend the credentials. This action is irreversible."),children:(0,T.tZ)("div",{children:(0,T.tZ)(m.Z,{priority:"danger",message:(0,r.t)("Are you sure you want to revoke this key? This will immediately remove and suspend the credentials."),onConfirm:this.handleRemove,confirmText:(0,r.t)("Revoke Key"),children:(0,T.tZ)(u.ZP,{priority:"danger",children:(0,r.t)("Revoke Key")})})})})})]})})]})}})}}X.displayName="KeySettings";const M=X;var V=s("./app/components/charts/miniBarChart.tsx"),F=s("./app/components/emptyMessage.tsx"),q=s("./app/components/loadingError.tsx"),O=s("./app/components/placeholder.tsx"),Y=s("./app/utils/theme.tsx");class H extends d.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",(()=>{const e=Math.floor((new Date).getTime()/1e3);return{since:e-2592e3,until:e,loading:!0,error:!1,series:[],emptyStats:!1}})()),(0,i.Z)(this,"fetchData",(()=>{const{keyId:e,orgId:t,projectId:s}=this.props.params;this.props.api.request(`/projects/${t}/${s}/keys/${e}/stats/`,{query:{since:this.state.since,until:this.state.until,resolution:"1d"},success:e=>{let t=!0;const s=[],i=[];e.forEach((e=>{e.total&&(t=!1),s.push({name:1e3*e.ts,value:e.dropped}),i.push({name:1e3*e.ts,value:e.accepted})}));const n=[{seriesName:(0,r.t)("Accepted"),data:i},{seriesName:(0,r.t)("Rate Limited"),data:s}];this.setState({series:n,emptyStats:t,error:!1,loading:!1})},error:()=>{this.setState({error:!0,loading:!1})}})}))}componentDidMount(){this.fetchData()}render(){return this.state.error?(0,T.tZ)(q.Z,{onRetry:this.fetchData}):(0,T.BX)(b.s_,{children:[(0,T.tZ)(b.V9,{children:(0,r.t)("Key usage in the last 30 days (by day)")}),(0,T.tZ)(b.N,{withPadding:!0,children:this.state.loading?(0,T.tZ)(O.Z,{height:"150px"}):this.state.emptyStats?(0,T.tZ)(F.Z,{title:(0,r.t)("Nothing recorded in the last 30 days."),description:(0,r.t)("Total events captured using these credentials.")}):(0,T.tZ)(V.Z,{isGroupedByDate:!0,series:this.state.series,height:150,colors:[Y.ZP.gray200,Y.ZP.red300],stacked:!0,labelYAxisExtents:!0})})]})}}H.displayName="KeyStats";const J=H;class W extends o.Z{constructor(){super(...arguments),(0,i.Z)(this,"handleRemove",(()=>{const{orgId:e,projectId:t}=this.props.params;n.browserHistory.push(`/${e}/${t}/settings/keys/`)}))}getTitle(){return(0,r.t)("Key Details")}getEndpoints(){const{keyId:e,orgId:t,projectId:s}=this.props.params;return[["data",`/projects/${t}/${s}/keys/${e}/`]]}renderBody(){const{data:e}=this.state,{params:t}=this.props;return(0,T.BX)("div",{"data-test-id":"key-details",children:[(0,T.tZ)(a.Z,{title:(0,r.t)("Key Details")}),(0,T.tZ)(l.Z,{}),(0,T.tZ)(J,{api:this.api,params:t}),(0,T.tZ)(M,{api:this.api,params:t,data:e,onRemove:this.handleRemove})]})}}},"./app/views/settings/project/projectKeys/projectKeyCredentials.tsx":(e,t,s)=>{s.d(t,{Z:()=>Z});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),r=s("./app/components/forms/field/index.tsx"),o=s("./app/components/links/externalLink.tsx"),a=s("./app/components/links/link.tsx"),l=s("./app/components/textCopyInput.tsx"),d=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),p=s("./app/utils/getDynamicText.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{data:t,projectId:s,showDsn:i=!0,showDsnPublic:c=!0,showMinidump:m=!0,showProjectId:Z=!1,showPublicKey:y=!1,showSecretKey:f=!1,showSecurityEndpoint:x=!0,showUnreal:g=!0}=e;const[w,b]=(0,n.useState)(!1);return(0,u.BX)(n.Fragment,{children:[c&&(0,u.BX)(r.Z,{label:(0,d.t)("DSN"),inline:!1,flexibleControlStateSize:!0,help:(0,d._N)("The DSN tells the SDK where to send the events to. [link]",{link:i?(0,u.tZ)(a.Z,{to:"",onClick:()=>b((e=>!e)),children:w?(0,d.t)("Hide deprecated DSN"):(0,d.t)("Show deprecated DSN")}):null}),children:[(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:t.dsn.public,fixed:"__DSN__"})}),w&&(0,u.tZ)(h,{label:null,help:(0,d.t)("Deprecated DSN includes a secret which is no longer required by newer SDK versions. If you are unsure which to use, follow installation instructions for your language."),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:t.dsn.secret,fixed:"__DSN_DEPRECATED__"})})})]}),!c&&i&&(0,u.tZ)(r.Z,{label:(0,d.t)("DSN (Deprecated)"),help:(0,d.t)("Deprecated DSN includes a secret which is no longer required by newer SDK versions. If you are unsure which to use, follow installation instructions for your language."),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:t.dsn.secret,fixed:"__DSN_DEPRECATED__"})})}),x&&(0,u.tZ)(r.Z,{label:(0,d.t)("Security Header Endpoint"),help:(0,d.t)("Use your security header endpoint for features like CSP and Expect-CT reports."),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:t.dsn.security,fixed:"__SECURITY_HEADER_ENDPOINT__"})})}),m&&(0,u.tZ)(r.Z,{label:(0,d.t)("Minidump Endpoint"),help:(0,d._N)("Use this endpoint to upload [link], for example with Electron, Crashpad or Breakpad.",{link:(0,u.tZ)(o.Z,{href:"https://docs.sentry.io/platforms/native/guides/minidumps/",children:"minidump crash reports"})}),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:t.dsn.minidump,fixed:"__MINIDUMP_ENDPOINT__"})})}),g&&(0,u.tZ)(r.Z,{label:(0,d.t)("Unreal Engine 4 Endpoint"),help:(0,d.t)("Use this endpoint to configure your UE4 Crash Reporter."),inline:!1,flexibleControlStateSize:!0,children:(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:t.dsn.unreal||"",fixed:"__UNREAL_ENDPOINT__"})})}),y&&(0,u.tZ)(r.Z,{label:(0,d.t)("Public Key"),inline:!0,flexibleControlStateSize:!0,children:(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:t.public,fixed:"__PUBLICKEY__"})})}),f&&(0,u.tZ)(r.Z,{label:(0,d.t)("Secret Key"),inline:!0,flexibleControlStateSize:!0,children:(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:t.secret,fixed:"__SECRETKEY__"})})}),Z&&(0,u.tZ)(r.Z,{label:(0,d.t)("Project ID"),inline:!0,flexibleControlStateSize:!0,children:(0,u.tZ)(l.ZP,{children:(0,p.Z)({value:s,fixed:"__PROJECTID__"})})})]})}m.displayName="ProjectKeyCredentials";const h=(0,i.Z)(r.Z,{target:"exezfd10"})("padding:",(0,c.Z)(.5)," 0 0 0;"),Z=m}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectKeys_details_index_tsx.5f8d81c7b7b4fb69c704a7deb13dfd08.js.map