"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationIntegrations_pluginDetailedView_tsx"],{"./app/views/organizationIntegrations/pluginDeprecationAlert.tsx":(t,e,n)=>{n.d(e,{Z:()=>c});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/react/index.js"),o=n("./app/components/alert.tsx"),r=n("./app/components/button.tsx"),a=n("./app/locale.tsx"),l=n("./app/utils/integrationUtil.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends s.Component{render(){const{organization:t,plugin:e}=this.props;if(!e.deprecationDate)return(0,p.tZ)(s.Fragment,{});const n=e.altIsSentryApp?"sentry-apps":"integrations",i=`/settings/${t.slug}/${n}/${e.firstPartyAlternative}/`,r=`?${e.altIsSentryApp?"":"tab=configurations&"}referrer=directory_upgrade_now`;return(0,p.tZ)("div",{children:(0,p.tZ)(o.Z,{type:"warning",showIcon:!0,trailingItems:(0,p.tZ)(g,{href:`${i}${r}`,size:"xs",onClick:()=>(0,l.Db)("integrations.resolve_now_clicked",{integration_type:"plugin",integration:e.slug,organization:t}),children:(0,a.t)("Upgrade Now")}),children:`This integration is being deprecated on ${e.deprecationDate}. Please upgrade to avoid any disruption.`})})}}d.displayName="PluginDeprecationAlert";const g=(0,i.Z)(r.ZP,{target:"e1otf8d90"})("color:",(t=>t.theme.subText),";float:right;"),c=d},"./app/views/organizationIntegrations/pluginDetailedView.tsx":(t,e,n)=>{n.r(e),n.d(e,{default:()=>A});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),r=n("./app/actionCreators/modal.tsx"),a=n("./app/components/button.tsx"),l=n("./app/components/contextPickerModal.tsx"),p=n("./app/locale.tsx"),d=n("./app/styles/space.tsx"),g=n("./app/utils/withOrganization.tsx"),c=n("./app/views/organizationIntegrations/abstractIntegrationDetailedView.tsx"),u=n("./app/actionCreators/indicator.tsx"),h=n("./app/components/acl/access.tsx"),m=n("./app/components/alert.tsx"),b=n("./app/components/confirm.tsx"),Z=n("./app/components/idBadge/projectBadge.tsx"),j=n("./app/components/switchButton.tsx"),f=n("./app/icons/index.tsx"),x=n("./app/utils/withApi.tsx"),y=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class I extends o.Component{constructor(){var t;super(...arguments),t=this,(0,i.Z)(this,"pluginUpdate",(async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";const{organization:i,projectItem:s,plugin:o}=t.props;await t.props.api.requestPromise(`/projects/${i.slug}/${s.projectSlug}/plugins/${o.id}/`,{method:n,data:e})})),(0,i.Z)(this,"updatePluginEnableStatus",(async t=>{t?await this.pluginUpdate({enabled:t}):await this.pluginUpdate({},"DELETE")})),(0,i.Z)(this,"handleReset",(async()=>{try{(0,u.E3)((0,p.t)("Removing...")),await this.pluginUpdate({reset:!0}),(0,u.S9)((0,p.t)("Configuration was removed")),this.props.onResetConfiguration(this.projectId),this.props.trackIntegrationAnalytics("integrations.uninstall_completed")}catch(t){(0,u.Iw)((0,p.t)("Unable to remove configuration"))}})),(0,i.Z)(this,"handleUninstallClick",(()=>{this.props.trackIntegrationAnalytics("integrations.uninstall_clicked")})),(0,i.Z)(this,"toggleEnablePlugin",(async function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{(0,u.E3)((0,p.t)("Enabling...")),await t.updatePluginEnableStatus(n),(0,u.S9)(n?(0,p.t)("Configuration was enabled."):(0,p.t)("Configuration was disabled.")),t.props.onPluginEnableStatusChange(e,n),t.props.trackIntegrationAnalytics(n?"integrations.enabled":"integrations.disabled")}catch(t){(0,u.Iw)(n?(0,p.t)("Unable to enable configuration."):(0,p.t)("Unable to disable configuration."))}}))}get projectId(){return this.props.projectItem.projectId}getConfirmMessage(){return(0,y.tZ)(o.Fragment,{children:(0,y.tZ)(m.Z,{type:"error",showIcon:!0,children:(0,p.t)("Deleting this installation will disable the integration for this project and remove any configurations.")})})}get projectForBadge(){const{projectItem:t}=this.props;return{slug:t.projectSlug,platform:t.projectPlatform?t.projectPlatform:void 0}}render(){const{className:t,plugin:e,organization:n,projectItem:i}=this.props;return(0,y.tZ)(v,{"data-test-id":"installed-plugin",children:(0,y.tZ)(h.Z,{access:["org:integrations"],children:s=>{let{hasAccess:o}=s;return(0,y.BX)(P,{className:t,children:[(0,y.tZ)(k,{children:(0,y.tZ)(Z.Z,{project:this.projectForBadge})}),(0,y.tZ)("div",{children:(0,y.tZ)(C,{borderless:!0,icon:(0,y.tZ)(f.iC,{}),disabled:!o,to:`/settings/${n.slug}/projects/${i.projectSlug}/plugins/${e.id}/`,"data-test-id":"integration-configure-button",children:(0,p.t)("Configure")})}),(0,y.tZ)("div",{children:(0,y.tZ)(b.Z,{priority:"danger",onConfirming:this.handleUninstallClick,disabled:!o,confirmText:"Delete Installation",onConfirm:()=>this.handleReset(),message:this.getConfirmMessage(),children:(0,y.tZ)(C,{disabled:!o,borderless:!0,icon:(0,y.tZ)(f.Fz,{}),"data-test-id":"integration-remove-button",children:(0,p.t)("Uninstall")})})}),(0,y.tZ)(j.Z,{isActive:i.enabled,toggle:()=>this.toggleEnablePlugin(i.projectId,!i.enabled),isDisabled:!o})]})}})})}}I.displayName="InstalledPlugin";const w=(0,x.Z)(I),v=(0,s.Z)("div",{target:"emrs3rl3"})("padding:",(0,d.Z)(2),";border:1px solid ",(t=>t.theme.border),";border-bottom:none;background-color:",(t=>t.theme.background),";&:last-child{border-bottom:1px solid ",(t=>t.theme.border),";}"),C=(0,s.Z)(a.ZP,{target:"emrs3rl2"})("color:",(t=>t.theme.gray300),";"),P=(0,s.Z)("div",{target:"emrs3rl1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),k=(0,s.Z)("div",{target:"emrs3rl0"})({name:"m4hdlm",styles:"flex:1 0 fit-content;box-sizing:border-box;display:flex;flex-direction:row;min-width:0"});var _=n("./app/views/organizationIntegrations/pluginDeprecationAlert.tsx");class z extends c.Z{constructor(){var t;super(...arguments),t=this,(0,i.Z)(this,"handleResetConfiguration",(t=>{const e=this.plugin.projectList.slice(),n=e.findIndex((e=>e.projectId===t));n<0||(e.splice(n,1),this.setState({plugins:[{...this.state.plugins[0],projectList:e}]}))})),(0,i.Z)(this,"handlePluginEnableStatus",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=t.plugin.projectList.slice(),s=i.findIndex((t=>t.projectId===e));s<0||(i[s]={...i[s],enabled:n},t.setState({plugins:[{...t.state.plugins[0],projectList:i}]}))})),(0,i.Z)(this,"handleAddToProject",(()=>{const t=this.plugin,{organization:e,router:n}=this.props;this.trackIntegrationAnalytics("integrations.plugin_add_to_project_clicked"),r.openModal((i=>(0,y.tZ)(l.Z,{...i,nextPath:`/settings/${e.slug}/projects/:projectId/plugins/${t.id}/`,needProject:!0,needOrg:!1,onFinish:t=>{i.closeModal(),n.push(t)}})),{allowClickClose:!1})}))}getEndpoints(){const{orgId:t,integrationSlug:e}=this.props.params;return[["plugins",`/organizations/${t}/plugins/configs/?plugins=${e}`]]}get integrationType(){return"plugin"}get plugin(){return this.state.plugins[0]}get description(){return this.plugin.description||""}get author(){return this.plugin.author?.name}get resourceLinks(){return this.plugin.resourceLinks||[]}get installationStatus(){return this.plugin.projectList.length>0?"Installed":"Not Installed"}get integrationName(){return`${this.plugin.name}${this.plugin.isHidden?" (Legacy)":""}`}get featureData(){return this.plugin.featureDescriptions}getTabDisplay(t){return"configurations"===t?"project configurations":"overview"}renderTopButton(t,e){return e?(0,y.tZ)($,{"data-test-id":"install-button",disabled:t,onClick:this.handleAddToProject,size:"sm",priority:"primary",children:(0,p.t)("Add to Project")}):this.renderRequestIntegrationButton()}renderConfigurations(){const t=this.plugin,{organization:e}=this.props;return t.projectList.length?(0,y.BX)(o.Fragment,{children:[(0,y.tZ)(_.Z,{organization:e,plugin:t}),(0,y.tZ)("div",{children:t.projectList.map((n=>(0,y.tZ)(w,{organization:e,plugin:t,projectItem:n,onResetConfiguration:this.handleResetConfiguration,onPluginEnableStatusChange:this.handlePluginEnableStatus,trackIntegrationAnalytics:this.trackIntegrationAnalytics},n.projectId)))})]}):this.renderEmptyConfigurations()}}const $=(0,s.Z)(a.ZP,{target:"e13hh9ci0"})("margin-bottom:",(0,d.Z)(1),";"),A=(0,g.Z)(z)}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationIntegrations_pluginDetailedView_tsx.7147273b3b9de202e7d172ed0542d8ff.js.map