"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_content_tsx"],{"./app/components/charts/areaChart.tsx":(e,t,s)=>{s.d(t,{T:()=>i});var n=s("./app/components/charts/series/lineSeries.tsx"),o=s("./app/components/charts/baseChart.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,stacked:s,colors:i,...a}=e;return(0,r.tZ)(o.Z,{...a,"data-test-id":"area-chart",colors:i,series:t.map(((e,t)=>{let{seriesName:o,data:r,...a}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({...e})}({stack:s?"area":void 0,name:o,data:r.map((e=>{let{name:t,value:s}=e;return[t,s]})),lineStyle:{color:i?.[t],opacity:1,width:.4},areaStyle:{color:i?.[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...a})}))})}i.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,s)=>{s.d(t,{Z:()=>f});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),r=s("../node_modules/moment/moment.js"),i=s.n(r),a=s("../node_modules/query-string/index.js"),l=s("./app/actionCreators/pageFilters.tsx"),d=s("./app/components/charts/components/dataZoomInside.tsx");s("../node_modules/echarts/lib/component/dataZoomSlider.js");const p={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function c(e){return e&&Array.isArray(e)?e:[{...p,...e}]}var m=s("./app/components/charts/components/toolBox.tsx"),u=s("./app/utils/callIfFunction.tsx"),h=s("./app/utils/dates.tsx");const x=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class g extends o.Component{constructor(e){var t;super(e),t=this,(0,n.Z)(this,"history",void 0),(0,n.Z)(this,"currentPeriod",void 0),(0,n.Z)(this,"zooming",null),(0,n.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:x(e.start),end:x(e.end)}})),(0,n.Z)(this,"setPeriod",(function(e){let{period:s,start:n,end:o}=e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:i,onZoom:d,usePageDate:p}=t.props,c=x(n),m=x(o);r&&t.history.push(t.currentPeriod),d?.({period:s,start:c,end:m}),t.zooming=()=>{if(p&&i){const e={...i.location.query,pageStart:n?(0,h.v5)(n):void 0,pageEnd:o?(0,h.v5)(o):void 0,pageStatsPeriod:s??void 0};a.stringify(e)!==a.stringify(i.location.query)&&i.push({pathname:i.location.pathname,query:e})}else(0,l.dR)({period:s,start:c?(0,h.hC)(c):c,end:m?(0,h.hC)(m):m},i);t.saveCurrentPeriod({period:s,start:n,end:o})}})),(0,n.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,n.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,n.Z)(this,"handleDataZoom",((e,t)=>{const s=t.getModel(),{startValue:n,endValue:o}=s._payload.batch[0];if(null===n&&null===o){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(n),t=i().utc(o);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,n.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const s=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));s&&!s._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,u.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:s,disabled:n,children:o,xAxisIndex:r,router:i,onZoom:a,onRestore:l,onChartReady:p,onDataZoom:u,onFinished:x,showSlider:g,chartZoomOptions:f,...Z}=this.props,y=e??void 0,v=t?(0,h.hC)(t):void 0,b=s?(0,h.hC)(s):void 0;return o(n?{utc:y,start:v,end:b,...Z}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:y,start:v,end:b,dataZoom:g?[...c({xAxisIndex:r,...f}),...(0,d.Z)({xAxisIndex:r,...f})]:(0,d.Z)({xAxisIndex:r,...f}),showTimeInTooltip:!0,toolBox:(0,m.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...Z})}}g.displayName="ChartZoom";const f=g},"./app/components/charts/components/dataZoomInside.tsx":(e,t,s)=>{s.d(t,{Z:()=>o}),s("../node_modules/echarts/lib/component/dataZoomInside.js");const n={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function o(e){return e&&Array.isArray(e)?e:[{...n,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,s)=>{function n(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function o(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:n(t),...e}}s.d(t,{Z:()=>o})},"./app/components/onboardingPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/panels/index.tsx"),r=s("./app/styles/space.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{image:t,children:s,...n}=e;return(0,i.tZ)(o.s_,{...n,children:(0,i.BX)(l,{children:[t?(0,i.tZ)(p,{children:t}):null,(0,i.tZ)(d,{centered:!t,children:s})]})})}a.displayName="OnboardingPanel";const l=(0,n.Z)("div",{target:"e19tujos2"})("padding:",(0,r.Z)(3),";position:relative;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){min-height:350px;}"),d=(0,n.Z)("div",{target:"e19tujos1"})("z-index:1;",(e=>e.centered?"text-align: center;":"")," ",(e=>e.centered?"max-width: 600px;":""),"@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:2;}"),p=(0,n.Z)(d,{target:"e19tujos0"})("position:relative;min-height:100px;max-width:300px;margin:",(0,r.Z)(2)," auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:1;margin:",(0,r.Z)(3),";max-width:auto;}"),c=a},"./app/utils/discover/charts.tsx":(e,t,s)=>{s.d(t,{CX:()=>i,Xp:()=>c,gu:()=>l,x1:()=>d});var n=s("./app/locale.tsx"),o=s("./app/utils.tsx"),r=s("./app/utils/formatters.tsx");function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,o.ri)(e)?a(e,t):"—"}function a(e,t){if(!(0,o.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,r.rl)(e,2);case"duration":return(0,r.g9)(e/1e3,2,!0);case"size":return(0,o.F)(e);default:return e.toString()}}function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return d(e,t,s,n)}function d(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return s?(0,r.Du)(e):e.toLocaleString();case"percentage":return(0,r.rl)(e,0);case"duration":return p(e,n);case"size":return(0,o.F)(e,0);default:return e.toString()}}function p(e,t){if(t??=m(e),0===e)return"0";switch(t){case r.ps:{const t=(e/r.ps).toFixed(0);return(0,n.t)("%swk",t)}case r.x4:{const t=(e/r.x4).toFixed(0);return(0,n.t)("%sd",t)}case r.kr:{const t=(e/r.kr).toFixed(0);return(0,n.t)("%shr",t)}case r.EB:{const t=(e/r.EB).toFixed(0);return(0,n.t)("%smin",t)}case r.sh:{const t=(e/r.sh).toFixed(0);return(0,n.t)("%ss",t)}default:const t=e.toFixed(0);return(0,n.t)("%sms",t)}}function c(e,t){let s=0;const n=function(e,t){let s;if(e[0]?.data){let n,o=e[0];e.forEach(((s,r)=>{let{seriesName:i,data:a}=s;!1!==t?.selected?.[i]&&a.length&&(o=e[r],n??=e[r])})),n?.data&&(s={max:Math.max(...n.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...o.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return s}(e,t);if(n){const e=(n.max+n.min)/2;s=m((n.max-n.min)/5),(e/s).toFixed(0).length>6&&(s=m(e))}return s}function m(e){return e>=r.ps?r.ps:e>=r.x4?r.x4:e>=r.kr?r.kr:e>=r.EB?r.EB:e>=r.sh?r.sh:1}},"./app/views/profiling/content.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>me});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),r=s("../node_modules/react-router/es/index.js"),i=s("./app/components/alert.tsx"),a=s("./app/components/button.tsx"),l=s("./app/components/datePageFilter.tsx"),d=s("./app/components/environmentPageFilter.tsx"),p=s("./app/components/layouts/thirds.tsx"),c=s("./app/components/links/externalLink.tsx"),m=s("./app/components/noProjectMessage.tsx"),u=s("./app/components/organizations/pageFilterBar.tsx"),h=s("./app/components/organizations/pageFilters/container.tsx"),x=s("./app/components/pageHeading.tsx"),g=s("./app/components/pageHeadingQuestionTooltip.tsx"),f=s("./app/components/pagination.tsx"),Z=s("./app/components/profiling/profileEventsTable.tsx"),y=s("./app/components/projectPageFilter.tsx"),v=s("./app/components/sentryDocumentTitle.tsx"),b=s("./app/components/sidebar/types.tsx"),w=s("./app/components/smartSearchBar/index.tsx"),P=s("./app/constants/index.tsx"),j=s("./app/constants/pageFilters.tsx"),k=s("./app/locale.tsx"),_=s("./app/stores/sidebarPanelStore.tsx"),C=s("./app/styles/organization.tsx"),A=s("./app/styles/space.tsx"),z=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),F=s("./app/utils/profiling/hooks/useProfileEvents.tsx"),S=s("./app/utils/profiling/hooks/useProfileFilters.tsx"),q=s("./app/utils/queryString.tsx"),B=s("./app/utils/useOrganization.tsx"),I=s("./app/utils/usePageFilters.tsx"),D=s("./app/utils/useProjects.tsx"),T=(s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js")),X=s("./app/components/charts/areaChart.tsx"),E=s("./app/components/charts/chartZoom.tsx"),L=s("./app/components/charts/styles.tsx"),R=s("./app/components/panels/index.tsx"),N=s("./app/utils/discover/charts.tsx"),M=s("./app/utils/discover/fields.tsx"),O=s("../node_modules/@tanstack/react-query/build/umd/index.production.js"),G=s("./app/components/organizations/pageFilters/parse.tsx"),H=s("./app/utils/useApi.tsx");function Q(e,t){const s={axis:e,values:[]},n={dataset:"profiles",end:t.end,start:t.start},o=[];for(let e=0;e<t.data.length;e++){const[n,r]=t.data[e];s.values.push(r[0].count),o.push(n)}return{series:s,meta:n,timestamps:o}}var U=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const V=["count()","p99()","p95()","p75()"];function W(e){let{query:t,router:s,selection:n}=e;const r=(0,T.u)(),i=function(e){let{yAxes:t,interval:s,query:n,referrer:o}=e;const r=(0,H.Z)(),i=(0,B.Z)(),{selection:a}=(0,I.Z)(),l=`/organizations/${i.slug}/events-stats/`,d={query:{dataset:"profiles",referrer:o,project:a.projects,environment:a.environments,...(0,G.fK)(a.datetime),yAxis:t,interval:s,query:n}},p=[l,d];return(0,O.useQuery)({queryKey:p,queryFn:()=>r.requestPromise(l,{method:"GET",includeAllArgs:!0,query:d.query}).then((e=>function(e,t){if(0===e.length)return[{data:[],meta:{dataset:"profiles",end:0,start:0},timestamps:[]},t[1],t[2]];if(1===e.length){const{series:s,meta:n,timestamps:o}=Q(e[0],t[0]);return[{data:[s],meta:n,timestamps:o},t[1],t[2]]}const s=[];let n={dataset:"profiles",end:-1,start:-1},o=[],r=!0;for(const i of e){const e=Q(i,t[0][i]);if(r)n=e.meta,o=e.timestamps;else{if(n.start!==e.meta.start||n.end!==e.meta.end)throw new Error("Mismatching start/end times");if(o.length!==e.timestamps.length||o.some(((t,s)=>t!==e.timestamps[s])))throw new Error("Mismatching timestamps")}s.push(e.series),r=!1}return[{data:s,meta:n,timestamps:o},t[1],t[2]]}(t,e))),refetchOnWindowFocus:!1,retry:!1})}({query:t,referrer:"api.profiling.landing-chart",yAxes:V}),a=(0,o.useMemo)((()=>{if("success"!==i.status)return[];const e=i.data[0].timestamps.map((e=>1e3*e)),t=i.data[0].data.filter((e=>V.indexOf(e.axis)>-1)).map((t=>{if(e.length!==t.values.length)throw new Error("Invalid stats response");return"count()"===t.axis?{data:t.values.map(((t,s)=>({name:e[s],value:t??0}))),seriesName:t.axis,xAxisIndex:0,yAxisIndex:0}:{data:t.values.map(((t,s)=>({name:e[s],value:(t??0)/1e6}))),seriesName:t.axis,xAxisIndex:1,yAxisIndex:1}}));return t.sort(((e,t)=>V.indexOf(e.seriesName)-V.indexOf(t.seriesName))),t}),[i]);return(0,U.tZ)(E.Z,{router:s,...n?.datetime,children:e=>(0,U.BX)(J,{children:[(0,U.BX)(K,{children:[(0,U.tZ)($,{children:(0,k.t)("Profiles by Count")}),(0,U.tZ)($,{children:(0,k.t)("Profiles by Percentiles")})]}),(0,U.tZ)(X.T,{height:300,series:a,grid:[{top:"32px",left:"24px",right:"52%",bottom:"16px"},{top:"32px",left:"52%",right:"24px",bottom:"16px"}],legend:{right:16,top:12,data:V.slice()},axisPointer:{link:[{xAxisIndex:[0,1]}]},xAxes:[{gridIndex:0,type:"time"},{gridIndex:1,type:"time"}],yAxes:[{gridIndex:0,scale:!0,axisLabel:{color:r.chartLabel,formatter:e=>(0,N.gu)(e,"integer")}},{gridIndex:1,scale:!0,axisLabel:{color:r.chartLabel,formatter:e=>(0,N.gu)(e,"duration")}}],tooltip:{valueFormatter:(e,t)=>(0,N.CX)(e,(0,M.Px)(t))},isGroupedByDate:!0,showTimeInTooltip:!0,...e})]})})}W.displayName="ProfileCharts";const J=(0,n.Z)(R.s_,{target:"e16luuhi2"})("padding-top:",(0,A.Z)(2),";"),K=(0,n.Z)("div",{target:"e16luuhi1"})({name:"ai16bo",styles:"width:100%;display:flex;flex-direction:row"}),$=(0,n.Z)(L.Gh,{target:"e16luuhi0"})("flex-grow:1;margin-left:",(0,A.Z)(2),";");var Y=s("./images/spot/performance-empty-state.svg"),ee=s("./app/components/buttonBar.tsx"),te=s("./app/components/onboardingPanel.tsx");function se(e){return(0,U.BX)(te.Z,{image:(0,U.tZ)(ne,{src:Y}),children:[(0,U.tZ)("h3",{children:(0,k.t)("Function level insights")}),(0,U.tZ)("p",{children:(0,k.t)("Discover slow-to-execute or resource intensive functions within your application")}),(0,U.tZ)(oe,{gap:1,children:e.children})]})}se.displayName="ProfilingOnboardingPanel";const ne=(0,n.Z)("img",{target:"e1ye1f4w1"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(e=>e.theme.breakpoints.large),"){transform:translateX(-30%);width:380px;min-width:380px;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){transform:translateX(-30%);width:420px;min-width:420px;}"),oe=(0,n.Z)(ee.ZP,{target:"e1ye1f4w0"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"});function re(e){let{location:t,router:s}=e;const n=(0,B.Z)(),{selection:x}=(0,I.Z)(),C=(0,q.ro)(t.query.cursor),A=(0,q.ro)(t.query.query,""),T=(0,F.kq)((0,q.ro)(t.query.sort),ie,{key:"count()",order:"desc"}),X=(0,S.J)({query:"",selection:x}),{projects:E}=(0,D.Z)(),L=(0,F.GP)({cursor:C,fields:ie,query:A,sort:T,referrer:"api.profiling.landing-table"}),R="error"===L.status?(0,F.Z)(L.error):null;(0,o.useEffect)((()=>{(0,z.Z)("profiling_views.landing",{organization:n})}),[n]);const N=(0,o.useCallback)((e=>{r.browserHistory.push({...t,query:{...t.query,cursor:void 0,query:e||void 0}})}),[t]),M=(0,o.useCallback)((()=>{(0,z.Z)("profiling_views.onboarding",{organization:n}),_.Z.activatePanel(b.z.ProfilingOnboarding)}),[n]),O=(0,o.useMemo)((()=>{if(0===x.projects.length||x.projects[0]===j.mP)return E.every((e=>!e.hasProfiles));const e=new Set(E.filter((e=>e.hasProfiles)).map((e=>e.id)));return x.projects.every((t=>!e.has(String(t))))}),[x.projects,E]);return(0,U.tZ)(v.Z,{title:(0,k.t)("Profiling"),orgSlug:n.slug,children:(0,U.tZ)(h.Z,{children:(0,U.tZ)(m.Z,{organization:n,children:(0,U.BX)(ae,{children:[(0,U.tZ)(p.h4,{children:(0,U.BX)(le,{children:[(0,U.BX)(pe,{children:[(0,k.t)("Profiling"),(0,U.tZ)(g.u,{title:(0,k._N)("A view of how your application performs in a variety of environments, based off of the performance profiles collected from real user devices in production. [link: Read the docs].",{link:(0,U.tZ)(c.Z,{href:"https://docs.sentry.io/product/profiling/"})})})]}),(0,U.BX)(de,{children:[(0,U.tZ)(a.ZP,{size:"sm",onClick:M,children:(0,k.t)("Set Up Profiling")}),(0,U.tZ)(a.ZP,{size:"sm",priority:"primary",href:"https://discord.gg/zrMjKA4Vnz",external:!0,onClick:()=>{(0,z.Z)("profiling_views.visit_discord_channel",{organization:n})},children:(0,k.t)("Join Discord")})]})]})}),(0,U.tZ)(p.uT,{children:(0,U.BX)(p.or,{fullWidth:!0,children:[R&&(0,U.tZ)(i.Z,{type:"error",showIcon:!0,children:R}),(0,U.BX)(ce,{children:[(0,U.BX)(u.Z,{condensed:!0,children:[(0,U.tZ)(y.Z,{}),(0,U.tZ)(d.Z,{}),(0,U.tZ)(l.Z,{alignDropdown:"left"})]}),(0,U.tZ)(w.Z,{organization:n,hasRecentSearches:!0,searchSource:"profile_landing",supportedTags:X,query:A,onSearch:N,maxQueryLength:P.dI})]}),O?(0,U.BX)(se,{children:[(0,U.tZ)(a.ZP,{href:"https://docs.sentry.io/product/profiling/",external:!0,children:(0,k.t)("Read Docs")}),(0,U.tZ)(a.ZP,{onClick:M,priority:"primary",children:(0,k.t)("Set Up Profiling")})]}):(0,U.BX)(o.Fragment,{children:[(0,U.tZ)(W,{router:s,query:A,selection:x}),(0,U.tZ)(Z.Q,{columns:ie.slice(),data:"success"===L.status?L.data[0]:null,error:"error"===L.status?(0,k.t)("Unable to load profiles"):null,isLoading:"loading"===L.status,sort:T,sortableColumns:new Set(ie)}),(0,U.tZ)(f.Z,{pageLinks:"success"===L.status?L.data?.[2]?.getResponseHeader("Link")??null:null})]})]})})]})})})})}re.displayName="ProfilingContent";const ie=["transaction","project.id","last_seen()","p75()","p95()","p99()","count()"],ae=(0,n.Z)(C.JH,{target:"eil9lws4"})({name:"1hcx8jb",styles:"padding:0"}),le=(0,n.Z)(p.oB,{target:"eil9lws3"})({name:"1iix8hw",styles:"display:flex;justify-content:space-between;flex-direction:row"}),de=(0,n.Z)("div",{target:"eil9lws2"})("display:flex;align-items:center;button:not(:last-child){margin-right:",(0,A.Z)(1),";}"),pe=(0,n.Z)(x.Z,{target:"eil9lws1"})({name:"ht6xsx",styles:"line-height:40px"}),ce=(0,n.Z)("div",{target:"eil9lws0"})("display:grid;gap:",(0,A.Z)(2),";grid-template-columns:min-content auto;margin-bottom:",(0,A.Z)(2),";"),me=re},"./images/spot/performance-empty-state.svg":(e,t,s)=>{e.exports=s.p+"assets/performance-empty-state.8da0e336a4e99ef87edb.svg"}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_content_tsx.eb76d015931ab89f11d1535918195194.js.map