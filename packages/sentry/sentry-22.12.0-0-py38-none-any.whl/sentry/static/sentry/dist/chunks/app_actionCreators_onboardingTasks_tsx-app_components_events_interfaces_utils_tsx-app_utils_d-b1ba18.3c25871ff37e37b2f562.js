"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actionCreators_onboardingTasks_tsx-app_components_events_interfaces_utils_tsx-app_utils_d-b1ba18","app_utils_discover_charts_tsx-app_views_performance_trends_utils_tsx-app_views_performance_ut-dde219"],{"./app/actionCreators/discoverSavedQueries.tsx":(e,t,n)=>{n.d(t,{EQ:()=>c,GH:()=>i,M6:()=>u,Yi:()=>o,qF:()=>l});var r=n("./app/actionCreators/indicator.tsx"),a=n("./app/api.tsx"),s=n("./app/locale.tsx");function o(e,t,n){const a=e.requestPromise(`/organizations/${t}/discover/saved/${n}/`,{method:"GET"});return a.catch((()=>{(0,r.Iw)((0,s.t)("Unable to load saved query"))})),a}function i(e,t,n){const a=e.requestPromise(`/organizations/${t}/discover/saved/`,{method:"POST",data:n});return a.catch((()=>{(0,r.Iw)((0,s.t)("Unable to create your saved query"))})),a}function u(e,t,n){const a=e.requestPromise(`/organizations/${t}/discover/saved/${n.id}/`,{method:"PUT",data:n});return a.catch((()=>{(0,r.Iw)((0,s.t)("Unable to update your saved query"))})),a}function c(e,t){return(new a.KU).requestPromise(`/organizations/${e}/discover/saved/${t}/visit/`,{method:"POST"})}function l(e,t,n){const a=e.requestPromise(`/organizations/${t}/discover/saved/${n}/`,{method:"DELETE"});return a.catch((()=>{(0,r.Iw)((0,s.t)("Unable to delete the saved query"))})),a}},"./app/actionCreators/onboardingTasks.tsx":(e,t,n)=>{n.d(t,{T:()=>s});var r=n("./app/stores/configStore.tsx"),a=n("./app/stores/organizationStore.tsx");function s(e,t,n){null!==e&&e.requestPromise(`/organizations/${t.slug}/onboarding-tasks/`,{method:"POST",data:n});const s=t.onboardingTasks.find((e=>e.task===n.task)),o=r.Z.get("user"),i=s?t.onboardingTasks.map((e=>e.task===n.task?{...e,...n}:e)):[...t.onboardingTasks,{...n,user:o}];a.Z.onUpdate({onboardingTasks:i})}},"./app/components/events/interfaces/utils.tsx":(e,t,n)=>{if(n.d(t,{Cy:()=>E,HW:()=>h,L2:()=>S,Pd:()=>x,Tg:()=>_,Y3:()=>b,ll:()=>y,mn:()=>g,yD:()=>P}),n("../node_modules/core-js/modules/es.error.cause.js"),"app"==n.j)var r=n("../node_modules/@sentry/core/esm/exports.js");var a=n("../node_modules/lodash/compact.js"),s=n.n(a),o=n("../node_modules/lodash/isString.js"),i=n.n(o),u=n("../node_modules/lodash/uniq.js"),c=n.n(u),l=n("../node_modules/query-string/index.js"),d=n("./app/constants/index.tsx"),p=n("./app/stores/configStore.tsx"),m=n("./app/utils.tsx"),f=n("./app/utils/fileExtension.tsx");function v(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function y(e){let t="curl";(0,m.ri)(e.method)&&"GET"!==e.method&&(t+=" \\\n -X "+e.method);const n=e.headers?.find((e=>"Accept-Encoding"===e[0]&&-1!==e[1].indexOf("gzip")));n&&(t+=" \\\n --compressed");const a=e.headers?.sort((function(e,t){return e[0]===t[0]?0:e[0]<t[0]?-1:1}))??[];for(const e of a)t+=' \\\n -H "'+e[0]+": "+v(e[1]+"")+'"';if((0,m.ri)(e.data))switch(e.inferredContentType){case"application/json":t+=' \\\n --data "'+v(JSON.stringify(e.data))+'"';break;case"application/x-www-form-urlencoded":t+=' \\\n --data "'+v(l.stringify(e.data))+'"';break;default:i()(e.data)?t+=' \\\n --data "'+v(e.data)+'"':0===Object.keys(e.data).length||r.$e((t=>{t.setExtra("data",e),r.Tb(new Error("Unknown event data"))}))}return t+=' \\\n "'+g(e)+'"',t}function g(e){let t=e?.url;return t?(e?.query?.length&&(t+="?"+function(e){if(i()(e))return e;const t={};for(const n of e)if(null!==n&&2===n.length){const[e,r]=n;null!==r&&(Array.isArray(t[e])?t[e].push(r):t[e]=[r])}return l.stringify(t)}(e.query)),e.fragment&&(t+="#"+e.fragment),t):t}function h(e){const t={};for(const n of Object.getOwnPropertyNames(e))e[n]!==d.Gj&&(t[n]=e[n]);return t}function _(e,t){return`0x${e.toString(16).padStart(t??0,"0")}`}function E(e){if(!e)return 0;try{return parseInt(e,16)||0}catch(e){return 0}}function x(e){const t=E(e?.image_addr);return[t,t+(e?.image_size||0)]}function P(e){let t,n,r,a;const s=e?e.split(","):[];return 4===s.length&&(t=s[0],n=s[1].split("Version=")[1],r=s[2].split("Culture=")[1],a=s[3].split("PublicKeyToken=")[1]),{name:t,version:n,culture:r,publicKeyToken:a}}function b(e,t){const n=c()(s()(t.map((e=>(0,f.m)(e.filename??"")))));return 1===n.length?(0,f._)(n[0])??e:e}function S(){const e=p.Z.get("user");if(!e)return!0;switch(e.options.stacktraceOrder){case 2:default:return!0;case 1:return!1}}},"./app/utils/discover/charts.tsx":(e,t,n)=>{n.d(t,{CX:()=>o,Xp:()=>d,gu:()=>u,x1:()=>c});var r=n("./app/locale.tsx"),a=n("./app/utils.tsx"),s=n("./app/utils/formatters.tsx");function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,a.ri)(e)?i(e,t):"—"}function i(e,t){if(!(0,a.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,s.rl)(e,2);case"duration":return(0,s.g9)(e/1e3,2,!0);case"size":return(0,a.F)(e);default:return e.toString()}}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return c(e,t,n,r)}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return n?(0,s.Du)(e):e.toLocaleString();case"percentage":return(0,s.rl)(e,0);case"duration":return l(e,r);case"size":return(0,a.F)(e,0);default:return e.toString()}}function l(e,t){if(t??=p(e),0===e)return"0";switch(t){case s.ps:{const t=(e/s.ps).toFixed(0);return(0,r.t)("%swk",t)}case s.x4:{const t=(e/s.x4).toFixed(0);return(0,r.t)("%sd",t)}case s.kr:{const t=(e/s.kr).toFixed(0);return(0,r.t)("%shr",t)}case s.EB:{const t=(e/s.EB).toFixed(0);return(0,r.t)("%smin",t)}case s.sh:{const t=(e/s.sh).toFixed(0);return(0,r.t)("%ss",t)}default:const t=e.toFixed(0);return(0,r.t)("%sms",t)}}function d(e,t){let n=0;const r=function(e,t){let n;if(e[0]?.data){let r,a=e[0];e.forEach(((n,s)=>{let{seriesName:o,data:i}=n;!1!==t?.selected?.[o]&&i.length&&(a=e[s],r??=e[s])})),r?.data&&(n={max:Math.max(...r.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...a.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return n}(e,t);if(r){const e=(r.max+r.min)/2;n=p((r.max-r.min)/5),(e/n).toFixed(0).length>6&&(n=p(e))}return n}function p(e){return e>=s.ps?s.ps:e>=s.x4?s.x4:e>=s.kr?s.kr:e>=s.EB?s.EB:e>=s.sh?s.sh:1}},"./app/utils/discover/types.tsx":(e,t,n)=>{n.d(t,{CU:()=>c,DC:()=>s,GY:()=>u,Rx:()=>d,hY:()=>a,lJ:()=>l,px:()=>p,v2:()=>i});var r=n("./app/locale.tsx");const a=5;let s,o;!function(e){e.DEFAULT="default",e.PREVIOUS="previous",e.TOP5="top5",e.DAILY="daily",e.DAILYTOP5="dailytop5",e.WORLDMAP="worldmap",e.BAR="bar"}(s||(s={})),function(e){e.DISCOVER="discover",e.METRICS="metrics",e.METRICS_ENHANCED="metricsEnhanced"}(o||(o={}));const i=[s.TOP5,s.DAILYTOP5],u=[s.DEFAULT,s.PREVIOUS,s.TOP5,s.BAR],c=[{value:s.DEFAULT,label:(0,r.t)("Total Period")},{value:s.PREVIOUS,label:(0,r.t)("Previous Period")},{value:s.TOP5,label:(0,r.t)("Top 5 Period")},{value:s.DAILY,label:(0,r.t)("Total Daily")},{value:s.DAILYTOP5,label:(0,r.t)("Top 5 Daily")},{value:s.WORLDMAP,label:(0,r.t)("World Map")},{value:s.BAR,label:(0,r.t)("Bar Chart")}],l={[s.DEFAULT]:s.DEFAULT,[s.PREVIOUS]:s.DEFAULT,[s.TOP5]:s.DEFAULT,[s.DAILY]:s.DEFAULT,[s.DAILYTOP5]:s.DAILY,[s.WORLDMAP]:s.DEFAULT,[s.BAR]:s.DEFAULT},d=[{label:"count()",value:"count()"},{label:"count_unique(user)",value:"count_unique(user)"}],p=[s.DEFAULT,s.DAILY,s.PREVIOUS,s.BAR]},"./app/utils/events.tsx":(e,t,n)=>{n.d(t,{FC:()=>i,K2:()=>c,UF:()=>x,XQ:()=>p,YQ:()=>d,k$:()=>u}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/types/index.tsx"),a=n("./app/types/event.tsx"),s=n("./app/utils/platform.tsx");function o(e){return!e.hasOwnProperty("type")}function i(e){if(o(e))return e.culprit||"";const{metadata:t,type:n,culprit:a}=e;switch(n){case r.eP.ERROR:case r.eP.TRANSACTION:return t.value;case r.eP.CSP:return t.message;case r.eP.EXPECTCT:case r.eP.EXPECTSTAPLE:case r.eP.HPKP:return"";default:return a||""}}function u(e){if(!o(e))return e.type===r.eP.ERROR&&(0,s.gx)(e.platform)&&e.metadata.filename||void 0}function c(e){if("string"==typeof e)return e;const t=e?.function||e?.package||e?.filebase||e?.type,n=e?.classbase;return n?t?`${n}.${t}`:n:t||"<unknown>"}function l(e){const{type:t,current_tree_label:n,finest_tree_label:r}=e,a=n||r,s=a?a.map((e=>c(e))).join(" | "):void 0;return t?s?{title:`${t} | ${s}`,treeLabel:[{type:t},...a??[]]}:{title:t,treeLabel:void 0}:{title:s||e.function||"<unknown>",treeLabel:a}}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{metadata:a,type:o,culprit:i,title:u}=e,c=t.includes("custom-event-title")&&a?.title?a.title:void 0;switch(o){case r.eP.ERROR:return c?{title:c,subtitle:i,treeLabel:void 0}:t.includes("grouping-title-ui")&&(n||(0,s.gx)(e.platform)||(0,s.an)(e.platform))?{subtitle:i,...l(a)}:{subtitle:i,title:a.type||a.function||"<unknown>",treeLabel:void 0};case r.eP.CSP:return{title:c??a.directive??"",subtitle:a.uri??"",treeLabel:void 0};case r.eP.EXPECTCT:case r.eP.EXPECTSTAPLE:case r.eP.HPKP:return{title:c??(a.message||u),subtitle:a.origin??"",treeLabel:void 0};case r.eP.DEFAULT:return{title:c??a.title??"",subtitle:"",treeLabel:void 0};case r.eP.TRANSACTION:const o=e.issueCategory===r.qE.PERFORMANCE;return{title:o?a.title:c??u,subtitle:o?i:"",treeLabel:void 0};default:return{title:c??u,subtitle:"",treeLabel:void 0}}}function p(e){return e.substring(0,8)}function m(e){return e.errors?.map((e=>e.type)).join(",")||""}function f(e){return"error"===e.type&&!!e.contexts?.trace}function v(e){return e.entries?.some((e=>e.type===a.UZ.EXCEPTION&&e.data.values?.some((e=>!!e.rawStacktrace&&!!e.stacktrace))))}function y(e){return e.entries?.some((e=>e.type===a.UZ.EXCEPTION&&e.data.values?.some((e=>!!e.rawStacktrace))))}function g(e){return e.entries?.filter((e=>"exception"===e.type))}function h(e){const t=g(e)?.map((e=>(e.data.values||[]).reduce(((e,t)=>{const n=t.stacktrace?.frames?.length||0;return Math.max(e,n)}),0)))||[];return t.length?Math.max(...t):0}function _(e){const t=g(e)?.map((e=>(e.data.values||[]).reduce(((e,t)=>{const n=t.stacktrace?.frames?.filter((e=>e.inApp))||[];return Math.max(e,n.length)}),0)))||[];return t.length?Math.max(...t):0}function E(e){const t=(e.entries?.filter((e=>"threads"===e.type))||[]).map((e=>e.data?.values?.filter((e=>!!e.name)).length||0))||[];return t.length?Math.max(...t):0}function x(e){return{event_id:e?.eventID||"-1",num_commits:e?.release?.commitCount||0,num_stack_frames:e?h(e):0,num_in_app_stack_frames:e?_(e):0,num_threads_with_names:e?E(e):0,event_platform:e?.platform,event_type:e?.type,has_release:!!e?.release,has_source_maps:!!e&&v(e),has_minified_stack_trace:!!e&&y(e),has_trace:!!e&&f(e),has_commit:!!e?.release?.lastCommit,event_errors:e?m(e):"",sdk_name:e?.sdk?.name,sdk_version:e?.sdk?.version,release_user_agent:e?.release?.userAgent}}},"./app/utils/performance/contexts/metricsCardinality.tsx":(e,t,n)=>{n.d(t,{BT:()=>E,e0:()=>P}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/react/index.js"),a=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),s=n("./app/utils/dates.tsx"),o=n("./app/utils/discover/eventView.tsx"),i=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),u=n("../node_modules/lodash/omit.js"),c=n.n(u),l=n("./app/utils/discover/genericDiscoverQuery.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{eventView:t,location:n}=e;return c()(t.getEventsAPIPayload(n),["field","sort","per_page","query"])}function m(e){let{children:t,...n}=e;return(0,d.tZ)(l.ZP,{route:"metrics-compatibility-sums",getRequestPayload:p,...n,children:e=>{let{tableData:n,...r}=e;return t({tableData:n,...r})}})}function f(e){let{eventView:t,location:n}=e;return c()(t.getEventsAPIPayload(n),["field","sort","per_page","query"])}function v(e){let{children:t,...n}=e;return(0,d.tZ)(l.ZP,{route:"metrics-compatibility",getRequestPayload:f,...n,children:e=>{let{tableData:n,...r}=e;return t({tableData:n,...r})}})}m.displayName="MetricsCompatibilityQuery",v.displayName="MetricsCompatibilitySumsQuery";var y=n("./app/utils/performance/contexts/utils.tsx");const[g,h,_]=(0,y.n)({name:"MetricsCardinalityContext",strict:!1}),E=e=>{if(!(0,i.gp)(e.organization))return(0,d.tZ)(g,{value:{isLoading:!1,outcome:{forceTransactionsOnly:!0}},children:e.children});const t={location:e.location,orgSlug:e.organization.slug,cursor:"0:0:0"},n=o.ZP.fromLocation(e.location);n.fields=[{field:"tpm()"}];const a=function(e){const t=e.clone();return t.start||t.end||(t.statsPeriod?(0,s.YJ)(t.statsPeriod)>1&&(t.statsPeriod="1h",t.start=void 0,t.end=void 0):(t.statsPeriod="1h",t.start=void 0,t.end=void 0)),t}(n);return(0,d.tZ)(r.Fragment,{children:(0,d.tZ)(m,{eventView:a,...t,children:n=>(0,d.tZ)(v,{eventView:a,...t,children:t=>{const r=n.isLoading||t.isLoading,a=n.isLoading||t.isLoading?void 0:function(e,t,n){const r={forceTransactionsOnly:!0},a=n.features.includes("performance-mep-bannerless-ui");if(!e)return r;const s=e.compatible_projects;return t?r:e?function(e){return!b(e).metricsCount}(e)?r:function(e,t){const n=b(e);return t?n.nullCount/n.metricsCount>.01:n.nullCount>0}(e,a)?{shouldWarnIncompatibleSDK:!0,forceTransactionsOnly:!0,compatibleProjects:s}:function(e){const t=b(e);return t.unparamCount>=t.metricsCount}(e)?{shouldNotifyUnnamedTransactions:!0,forceTransactionsOnly:!0,compatibleProjects:s}:function(e,t){const n=b(e);return t?n.unparamCount/n.metricsCount>.01:n.unparamCount>0}(e,a)?{shouldNotifyUnnamedTransactions:!0,compatibleProjects:s,forceTransactionsOnly:!1}:{forceTransactionsOnly:!1}:r}(n.tableData&&t.tableData?{...n.tableData,...t.tableData}:null,!!n.error&&!!t.error,e.organization);return(0,d.tZ)(x,{sendOutcomeAnalytics:e.sendOutcomeAnalytics,organization:e.organization,value:{isLoading:r,outcome:a},children:e.children})}})})})};E.displayName="MetricsCardinalityProvider";const x=e=>{const t=e.value.outcome?.shouldWarnIncompatibleSDK??!1,n=e.value.outcome?.shouldNotifyUnnamedTransactions??!1,s=!e.value.outcome?.forceTransactionsOnly;return(0,r.useEffect)((()=>{!e.value.isLoading&&e.sendOutcomeAnalytics&&(0,a.Z)("performance_views.mep.metrics_outcome",{organization:e.organization,is_on_metrics:s,fallback_from_null:t,fallback_from_unparam:n})}),[e.organization,e.value.isLoading,s,n,t,e.sendOutcomeAnalytics]),(0,d.tZ)(g,{...e,children:e.children})};x.displayName="Provider",_.Consumer;const P=h;function b(e){let{sum:t}=e;try{const e=Number(t.metrics);return{metricsCount:e,unparamCount:Number(t.metrics_unparam),nullCount:Number(t.metrics_null)}}catch(e){return{metricsCount:0,unparamCount:0,nullCount:0}}}},"./app/utils/performance/quickTrace/utils.tsx":(e,t,n)=>{n.d(t,{$J:()=>_,Ci:()=>b,R8:()=>v,S2:()=>E,_Z:()=>h,eF:()=>g,eW:()=>m,hp:()=>d,q2:()=>p,xB:()=>x,y3:()=>P}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("../node_modules/lodash/omit.js"),a=n.n(r),s=n("../node_modules/moment-timezone/index.js"),o=n.n(s),i=n("./app/components/events/interfaces/spans/utils.tsx"),u=n("./app/constants/pageFilters.tsx"),c=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=n("./app/utils/discover/eventView.tsx");function d(e){return"transaction"===e.type}function p(e,t){return d(t)?e.event_id===t.id:void 0!==e.errors&&e.errors.some((e=>e.event_id===t.id))}function m(e,t){const n=[],r=[],a=[{event:t,path:[]}];for(;a.length;){const t=a.shift();if(p(t.event,e)){for(const e of t.path)n.push(e);r.push(t.event)}else{const e=[...t.path,f(t.event)];for(const n of t.event.children)a.push({event:n,path:e})}}if(!r.length)throw new Error("No relevant path exists!");for(;r.length;){const e=r.shift();for(const t of e.children)r.push(t);n.push(f(e))}return n}function f(e){return a()(e,["children"])}function v(e,t,n){const{type:r,trace:a}=e;if("empty"===r||null===a)throw new Error("Current event not in trace navigator!");const s="full"===r,o=a.find((e=>p(e,t)))??null;if(null===o)throw new Error("Current event not in trace navigator!");const i=o.parent_event_id?a.find((e=>e.event_id===o.parent_event_id))??null:null,u=a.find((e=>e.event_id!==o.event_id&&e.event_id!==i?.event_id&&0===e.generation))??null,l=s?[]:null,d=[],m=s?[]:null,f=new Set;return a.forEach((e=>{f.add(e.project_id),(e=>e.parent_event_id===o.event_id)(e)?d.push(e):s&&((e=>null!==o.generation&&null!==e.generation&&e.generation>0&&o.generation-1>e.generation)(e)?l?.push(e):(e=>null!==o.generation&&null!==e.generation&&o.generation+1<e.generation)(e)&&m?.push(e))})),s&&f.size>1&&function(e,t){(0,c.Z)("quick_trace.connected_services",{organization:e.id,projects:t})}(n,f.size),{root:u,ancestors:null===l?null:y(l),parent:i,current:o,children:y(d),descendants:null===m?null:y(m)}}function y(e){return e.sort(((e,t)=>t["transaction.duration"]-e["transaction.duration"]))}function g(e){let{eventView:t,location:n}=e;return a()(t.getEventsAPIPayload(n),["field","sort","per_page"])}function h(e){let{start:t,end:n,statsPeriod:r}=e;return l.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[u.mP],query:"",environment:[],start:t,end:n,range:r??void 0})}function _(e){const t=d(e)?e.startTimestamp:o()(e.dateReceived?e.dateReceived:e.dateCreated).valueOf()/1e3,n=d(e)?e.endTimestamp:t;return(0,i.TC)({start:t,end:n})}function E(e,t,n){let r=n;const a=[e];for(;a.length;){const e=a.pop();for(const t of e.children)a.push(t);r=t(r,e)}return r}function x(e,t){return E(e,((e,n)=>(t(n)&&e.push(n),e)),[])}function P(e){return Boolean(e.event_id)}function b(e){return Boolean(e.event_id)}},"./app/utils/platform.tsx":(e,t,n)=>{n.d(t,{an:()=>o,fR:()=>a,gx:()=>s}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/data/platformCategories.tsx");function a(e){return e?[...r.tQ].includes(e)?r.Wn.FRONTEND:[...r.y3].includes(e)?r.Wn.BACKEND:[...r.Wp].includes(e)?r.Wn.SERVERLESS:[...r.ai].includes(e)?r.Wn.MOBILE:[...r.gv].includes(e)?r.Wn.DESKTOP:r.Wn.OTHER:r.Wn.OTHER}function s(e){switch(e){case"cocoa":case"objc":case"native":case"swift":case"c":return!0;default:return!1}}function o(e){return!!e&&[...r.ai].includes(e)}},"./app/utils/useRouteContext.tsx":(e,t,n)=>{n.d(t,{s:()=>s}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("../node_modules/react/index.js"),a=n("./app/views/routeContext.tsx");function s(){const e=(0,r.useContext)(a.X);if(null===e)throw new Error("useRouteContext called outside of routes provider");return e}},"./app/utils/withProject.tsx":(e,t,n)=>{n.d(t,{Z:()=>u});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/react/index.js"),s=n("./app/sentryTypes.tsx"),o=n("./app/utils/getDisplayName.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=e=>{var t;return t=class extends a.Component{render(){const{project:t,...n}=this.props;return(0,i.tZ)(e,{project:t??this.context.project,...n})}},(0,r.Z)(t,"displayName",`withProject(${(0,o.Z)(e)})`),(0,r.Z)(t,"contextTypes",{project:s.Z.Project}),t}},"./app/views/dashboardsV2/types.tsx":(e,t,n)=>{n.d(t,{$V:()=>a,EN:()=>c,FO:()=>s,ZU:()=>r,l9:()=>o,n3:()=>u,qA:()=>i});const r=30,a=5;let s,o,i,u,c;!function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.TABLE="table",e.WORLD_MAP="world_map",e.BIG_NUMBER="big_number",e.TOP_N="top_n"}(s||(s={})),function(e){e.DISCOVER="discover",e.ISSUE="issue",e.RELEASE="metrics"}(o||(o={})),function(e){e.RELEASE="release"}(i||(i={})),function(e){e.VIEW="view",e.EDIT="edit",e.CREATE="create",e.PENDING_DELETE="pending_delete",e.PREVIEW="preview"}(u||(u={})),function(e){e.DISCOVERV2="discoverv2",e.DASHBOARDS="dashboards",e.LIBRARY="library",e.ISSUE_DETAILS="issueDetail"}(c||(c={}))},"./app/views/eventsV2/data.tsx":(e,t,n)=>{n.d(t,{He:()=>o,Qu:()=>s,eP:()=>a,gh:()=>i});var r=n("./app/locale.tsx");const a={id:void 0,name:(0,r.t)("All Events"),query:"",projects:[],fields:["title","event.type","project","user.display","timestamp"],orderby:"-timestamp",version:2,range:"24h"},s=[{id:void 0,name:(0,r.t)("Transactions by Volume"),fields:["transaction","project","count()","avg(transaction.duration)","p75()","p95()"],orderby:"-count",query:"event.type:transaction",projects:[],version:2,range:"24h"}],o=[{id:void 0,name:(0,r.t)("Web Vitals"),fields:["transaction","epm()","p75(measurements.fp)","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)"],orderby:"-epm",query:"event.type:transaction transaction.op:pageload",projects:[],version:2,range:"24h",yAxis:["epm()"]}],i=[a,{id:void 0,name:(0,r.t)("Errors by Title"),fields:["title","count()","count_unique(user)","project"],orderby:"-count",query:"event.type:error",projects:[],version:2,range:"24h",display:"top5"},{id:void 0,name:(0,r.t)("Errors by URL"),fields:["url","count()","count_unique(issue)"],orderby:"-count",query:"event.type:error has:url",projects:[],version:2,range:"24h",display:"top5"}]},"./app/views/eventsV2/savedQuery/utils.tsx":(e,t,n)=>{if(n.d(t,{MF:()=>g,O$:()=>m,RF:()=>y,Uc:()=>v,b2:()=>l,pb:()=>f,zz:()=>E}),"app"==n.j)var r=n("./app/actionCreators/discoverHomepageQueries.tsx");var a=n("./app/actionCreators/discoverSavedQueries.tsx"),s=n("./app/actionCreators/indicator.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils/analytics.tsx"),u=n("./app/utils/discover/types.tsx"),c=n("./app/views/dashboardsV2/types.tsx");function l(e,t,n,r){let u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const c=n.toNewQuery();c.yAxis=r,(0,i.ec)({...h(u,"request"),organization_id:parseInt(t.id,10),..._(c)});const l=(0,a.GH)(e,t.slug,c);return l.then((e=>((0,s.S9)((0,o.t)("Query saved")),(0,i.ec)({...h(u,"success"),organization_id:parseInt(t.id,10),..._(c)}),e))).catch((e=>{(0,s.Iw)((0,o.t)("Query not saved")),(0,i.ec)({...h(u,"failed"),organization_id:parseInt(t.id,10),..._(c),error:e&&e.message||`Could not save a ${u?"new":"existing"} query`})})),l}const d={request:"Discoverv2: Request to save a saved query as a new query",success:"Discoverv2: Successfully saved a saved query as a new query",failed:"Discoverv2: Failed to save a saved query as a new query"},p={request:"Discoverv2: Request to save a new query",success:"Discoverv2: Successfully saved a new query",failed:"Discoverv2: Failed to save a new query"};function m(e,t,n,r){const u=n.toNewQuery();if(u.yAxis=r,!n.name)return(0,s.Iw)((0,o.t)("Please name your query")),Promise.reject();(0,i.ec)({eventKey:"discover_v2.update_query_request",eventName:"Discoverv2: Request to update a saved query",organization_id:parseInt(t.id,10),..._(u)});const c=(0,a.M6)(e,t.slug,u);return c.then((e=>((0,s.S9)((0,o.t)("Query updated")),(0,i.ec)({eventKey:"discover_v2.update_query_success",eventName:"Discoverv2: Successfully updated a saved query",organization_id:parseInt(t.id,10),..._(u)}),e))).catch((e=>{(0,s.Iw)((0,o.t)("Query not updated")),(0,i.ec)({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query",organization_id:parseInt(t.id,10),..._(u),error:e&&e.message||"Failed to update a query"})})),c}function f(e,t,n){const r=n.toNewQuery();(0,i.ec)({eventKey:"discover_v2.update_query_name_request",eventName:"Discoverv2: Request to update a saved query's name",organization_id:parseInt(t.id,10),..._(r)});const u=(0,a.M6)(e,t.slug,r);return u.then((e=>{(0,s.S9)((0,o.t)("Query name saved")),(0,i.ec)({eventKey:"discover_v2.update_query_name_success",eventName:"Discoverv2: Successfully updated a saved query's name",organization_id:parseInt(t.id,10),..._(r)})})).catch((e=>{(0,s.Iw)((0,o.t)("Query name not saved")),(0,i.ec)({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query's name",organization_id:parseInt(t.id,10),..._(r),error:e&&e.message||"Failed to update a query name"})})),u}function v(e,t,n){(0,i.ec)({eventKey:"discover_v2.delete_query_request",eventName:"Discoverv2: Request to delete a saved query",organization_id:parseInt(t.id,10),..._(n.toNewQuery())});const r=(0,a.qF)(e,t.slug,n.id);return r.then((()=>{(0,s.S9)((0,o.t)("Query deleted")),(0,i.ec)({eventKey:"discover_v2.delete_query_success",eventName:"Discoverv2: Successfully deleted a saved query",organization_id:parseInt(t.id,10),..._(n.toNewQuery())})})).catch((e=>{(0,s.Iw)((0,o.t)("Query not deleted")),(0,i.ec)({eventKey:"discover_v2.delete_query_failed",eventName:"Discoverv2: Failed to delete a saved query",organization_id:parseInt(t.id,10),..._(n.toNewQuery()),error:e&&e.message||"Failed to delete query"})})),r}function y(e,t,n){return(0,r.YC)(e,t.slug,n).then((e=>((0,s.S9)((0,o.t)("Saved as Discover default")),e))).catch((()=>{(0,s.Iw)((0,o.t)("Unable to set query as Discover default"))}))}function g(e,t){return(0,r.uk)(e,t.slug).then((()=>{(0,s.S9)((0,o.t)("Successfully removed Discover default"))})).catch((()=>{(0,s.Iw)((0,o.t)("Unable to remove Discover default"))}))}function h(e,t){return{eventKey:e?"discover_v2.save_new_query_"+t:"discover_v2.save_existing_query_"+t,eventName:e?p[t]:d[t]}}function _(e){const{projects:t,fields:n,query:r}=e;return{projects:t,fields:n,query:r}}function E(e){switch(e){case u.DC.BAR:return c.FO.BAR;case u.DC.WORLDMAP:return c.FO.WORLD_MAP;case u.DC.TOP5:return c.FO.TOP_N;default:return c.FO.LINE}}},"./app/views/performance/landing/metricsDataSwitcher.tsx":(e,t,n)=>{n.d(t,{d:()=>d});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),s=n("../node_modules/react-router/es/index.js"),o=n("./app/components/loadingIndicator.tsx"),i=n("./app/utils/performance/contexts/metricsCardinality.tsx"),u=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),c=n("./app/utils/queryString.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){const t=(0,u.gp)(e.organization),n=(0,i.e0)();return t?n.isLoading&&!e.hideLoadingIndicator?(0,l.tZ)(a.Fragment,{children:(0,l.tZ)(m,{children:(0,l.tZ)(o.Z,{})})}):n.outcome?(0,l.tZ)(a.Fragment,{children:(0,l.tZ)(p,{eventView:e.eventView,location:e.location,outcome:n.outcome,switcherChildren:e.children})}):(0,l.tZ)(a.Fragment,{children:e.children({forceTransactionsOnly:!0})}):(0,l.tZ)(a.Fragment,{children:e.children({forceTransactionsOnly:!0})})}function p(e){let{switcherChildren:t,outcome:n,location:r,eventView:o}=e;const{query:i}=r,d=(0,c.ro)(i[u.tm],""),p=(0,c.ro)(i.query,""),m=d===u.oR.transactionsOnly,f=p&&m&&!n.forceTransactionsOnly;return(0,a.useEffect)((()=>{f&&s.browserHistory.push({pathname:r.pathname,query:{...r.query,cursor:void 0,query:void 0,[u.tm]:void 0}})}),[f,r]),p&&m&&!n.forceTransactionsOnly&&(o.query=""),(0,l.tZ)(a.Fragment,{children:t(n)})}d.displayName="MetricsDataSwitcher",p.displayName="MetricsSwitchHandler";const m=(0,r.Z)("div",{target:"e1r04u5n0"})({name:"zl1inp",styles:"display:flex;justify-content:center"})},"./app/views/performance/trends/types.tsx":(e,t,n)=>{let r,a,s;n.d(t,{A2:()=>s,ER:()=>r,Z2:()=>a}),function(e){e.IMPROVED="improved",e.REGRESSION="regression"}(r||(r={})),function(e){e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.AVG="avg"}(a||(a={})),function(e){e.DURATION="transaction.duration",e.LCP="measurements.lcp",e.FCP="measurements.fcp",e.FID="measurements.fid",e.CLS="measurements.cls",e.SPANS_DB="spans.db",e.SPANS_HTTP="spans.http",e.SPANS_BROWSER="spans.browser",e.SPANS_RESOURCE="spans.resource"}(s||(s={}))},"./app/views/performance/trends/utils.tsx":(e,t,n)=>{n.d(t,{CE:()=>b,HF:()=>I,IO:()=>S,Kt:()=>T,P4:()=>N,RP:()=>A,T1:()=>y,Ws:()=>P,_1:()=>f,_H:()=>w,bg:()=>v,cs:()=>g,ed:()=>R,es:()=>h,iF:()=>q,j_:()=>C,kM:()=>D,vq:()=>F,vt:()=>x,wx:()=>O}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/downsample/methods/ASAP.js"),a=n("../node_modules/moment/moment.js"),s=n.n(a),o=n("./app/components/charts/utils.tsx"),i=n("./app/locale.tsx"),u=n("./app/utils/discover/fields.tsx"),c=n("./app/utils/queryString.tsx"),l=n("./app/utils/theme.tsx"),d=n("./app/utils/tokenizeSearch.tsx"),p=n("./app/views/performance/utils.tsx"),m=n("./app/views/performance/trends/types.tsx");const f="14d",v="15min",y=[{label:"p50",field:m.Z2.P50,alias:"percentile_range",legendLabel:"p50"},{label:"p75",field:m.Z2.P75,alias:"percentile_range",legendLabel:"p75"},{label:"p95",field:m.Z2.P95,alias:"percentile_range",legendLabel:"p95"},{label:"p99",field:m.Z2.P99,alias:"percentile_range",legendLabel:"p99"},{label:"average",field:m.Z2.AVG,alias:"avg_range",legendLabel:"average"}],g=[{label:"Duration",column:m.A2.DURATION},{label:"LCP",column:m.A2.LCP},{label:"FCP",column:m.A2.FCP},{label:"FID",column:m.A2.FID},{label:"CLS",column:m.A2.CLS},{label:"Spans (http)",column:m.A2.SPANS_HTTP},{label:"Spans (db)",column:m.A2.SPANS_DB},{label:"Spans (browser)",column:m.A2.SPANS_BROWSER},{label:"Spans (resource)",column:m.A2.SPANS_RESOURCE}],h={[m.ER.IMPROVED]:{lighter:l.ZP.green200,default:l.ZP.green300},[m.ER.REGRESSION]:{lighter:l.ZP.red200,default:l.ZP.red300}},_={[m.ER.IMPROVED]:"improvedSelected",[m.ER.REGRESSION]:"regressionSelected"},E={[m.ER.IMPROVED]:"improvedUnselectedSeries",[m.ER.REGRESSION]:"regressionUnselectedSeries"},x={[m.ER.IMPROVED]:"improvedCursor",[m.ER.REGRESSION]:"regressionCursor"};function P(){const e={};return Object.values(x).forEach((t=>e[t]=void 0)),e}function b(e,t){const n=t??(0,c.ro)(e?.query?.trendFunction);return y.find((e=>{let{field:t}=e;return t===n}))||y[0]}function S(e,t,n){const r=(0,c.ro)(e?.query?.trendParameter),a=g.find((e=>{let{label:t}=e;return t===r}));return a||function(e,t){return function(e){switch(e){case p.iy.FRONTEND:return{label:"LCP",column:m.A2.LCP};case p.iy.ANY:case p.iy.BACKEND:case p.iy.FRONTEND_OTHER:default:return{label:"Duration",column:m.A2.DURATION}}}((0,p.Bh)(e,t))}(t,n)}function R(e,t){return(0,u.sN)({kind:"function",function:[e,t,void 0,void 0]})}function T(e,t){return{fromSeconds:e/1e3,toSeconds:t/1e3,showDigits:e>1e3||t>1e3||e<10||t<10}}function w(e,t){if(e.project&&t)return t.find((t=>t.slug===e.project))?.id}function D(e,t,n,r,a){const s=b(t),i=S(t,r,e.project),u=[...a?[]:["transaction"],"project"].map((e=>({field:e}))),l={field:"trend_percentage()",kind:"asc"};e.trendType=n,n===m.ER.REGRESSION&&(l.kind="desc"),s&&i&&(e.trendFunction=R(s.field,i.column)),e.query=function(e){const t=new d.MY(e);return t.hasFilter("count_percentage()")||t.addFilterValues("count_percentage()",[">0.25","<4"]),t.hasFilter("trend_percentage()")||t.addFilterValues("trend_percentage()",[">0%"]),t.hasFilter("confidence()")||t.addFilterValues("confidence()",[">6"]),t.formatString()}(e.query),e.interval=function(e,t){const n=(0,c.ro)(e?.query?.interval),{start:r,end:a,statsPeriod:s}=t,i={start:r||null,end:a||null,period:s},u=(0,o.ZS)(i,"high");return n||u}(t,e),e.sorts=[l],e.fields=u}function q(e,t){const{query:n}=t,r=n.start&&n.end;return n.statsPeriod||r||(e.statsPeriod=f),e}function O(e,t){const n=Math.abs(e);return{seconds:n/1e3,fixedDigits:n>1e3||n<10?1:0,changeLabel:t===m.ER.REGRESSION?(0,i.t)("slower"):(0,i.t)("faster")}}function A(e){const t=s()();return e.map((e=>({...e,received_at:t,transaction:e.transaction})))}function C(e){return _[e]}function N(e){return E[e]}const j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(0,r.Cl)(e,t)},I=e=>["p50","p75"].find((t=>e.includes(t)));function F(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;if(!e)return{maxValue:r,minValue:n,smoothedResults:void 0};const a=[];for(const s of e){const e=s.data,o=[],i=j(e.map((e=>{let{name:t,value:n}=e;return[Number(t),n]})));for(let e=0;e<i.length;e++){const t=i[e],a=t.y;if(o.push({name:t.x,value:a}),!isNaN(a)){const e=Math.round(a);n=Math.min(e,n),r=Math.max(e,r)}}a.push({seriesName:t||s.seriesName||"Current",data:o,lineStyle:s.lineStyle,color:s.color})}return{minValue:n,maxValue:r,smoothedResults:a}}},"./app/views/performance/utils.tsx":(e,t,n)=>{n.d(t,{Bh:()=>R,C$:()=>T,Ik:()=>w,JY:()=>F,Ov:()=>A,Pv:()=>_,R8:()=>C,U7:()=>g,Ws:()=>O,YL:()=>L,al:()=>N,bY:()=>V,de:()=>q,iL:()=>D,iy:()=>E,m_:()=>j,n4:()=>I,og:()=>h,p9:()=>z,rL:()=>k,uq:()=>x}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/react-router/es/index.js"),a=n("./app/constants/pageFilters.tsx"),s=n("./app/data/platformCategories.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils/analytics.tsx"),u=n("./app/utils/dates.tsx"),c=n("./app/utils/discover/eventView.tsx"),l=n("./app/utils/discover/fields.tsx"),d=n("./app/utils/formatters.tsx");if("app"==n.j)var p=n("./app/utils/getCurrentSentryReactTransaction.tsx");var m=n("./app/utils/queryString.tsx");if("app"==n.j)var f=n("./app/utils/toArray.tsx");var v=n("./app/utils/tokenizeSearch.tsx"),y=n("./app/views/performance/trends/utils.tsx");const g="app"==n.j?["environment","project","query","start","end","statsPeriod"]:null,h="<< unparameterized >>";let _,E;function x(e){const t=e.source===_.DISCOVER?["transaction","project","transaction.source","epm()"]:["transaction","project","transaction.source","epm()","p50()","p95()"],n={id:void 0,name:e.source===_.DISCOVER?(0,o.t)("Unparameterized Transactions"):(0,o.t)("Performance - Unparameterized Transactions"),query:'event.type:transaction transaction.source:"url"',projects:[],fields:t,version:2},r=c.ZP.fromNewQueryWithLocation(n,e.location).withSorts([{field:"epm",kind:"desc"}]).getResultsViewUrlTarget(e.organization.slug);return r.query.showUnparameterizedBanner="true",r}!function(e){e.PERFORMANCE="performance",e.DISCOVER="discover"}(_||(_={})),function(e){e.ANY="any",e.FRONTEND="frontend",e.BACKEND="backend",e.FRONTEND_OTHER="frontend_other",e.MOBILE="mobile"}(E||(E={}));const P=[...s.tQ],b=s.y3.filter((e=>"native"!==e)),S=[...s.ai];function R(e,t){if(0===t.length||t[0]===a.mP)return E.ANY;const n=e.filter((e=>t.includes(parseInt(`${e.id}`,10))));return 0===n.length||n.some((e=>!e.platform))?E.ANY:n.every((e=>P.includes(e.platform)))?E.FRONTEND:n.every((e=>b.includes(e.platform)))?E.BACKEND:n.every((e=>S.includes(e.platform)))?E.MOBILE:E.ANY}function T(e,t){const n=R(e,t.project);return n===E.FRONTEND&&new v.MY(t.query).getFilterValues("!transaction.op").some((e=>"pageload"===e))?E.FRONTEND_OTHER:n}function w(e,t){return T(t,e)===E.FRONTEND}function D(e,t){return T(t,e)===E.FRONTEND||T(t,e)===E.FRONTEND_OTHER}function q(e){return`/organizations/${e.slug}/performance/`}function O(e){return`/organizations/${e.slug}/performance/trends/`}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,m.ro)(e.query.query,t).trim()}function C(e){let{location:t,organization:n,projectPlatforms:a}=e;(0,i.ec)({eventKey:"performance_views.change_view",eventName:"Performance Views: Change View",organization_id:parseInt(n.id,10),view_name:"TRENDS",project_platforms:a});const s=N({location:t,organization:n});r.browserHistory.push(s)}function N(e){let{location:t,organization:n,initialConditions:r,additionalQuery:a}=e;const s={...t.query,...a},o=(0,m.ro)(t.query.query,""),i=new v.MY(o),u=r??new v.MY([]);return i.hasFilter("tpm()")?u.setFilterValues("tpm()",i.getFilterValues("tpm()")):u.setFilterValues("tpm()",[">0.01"]),i.hasFilter("transaction.duration")?u.setFilterValues("transaction.duration",i.getFilterValues("transaction.duration")):u.setFilterValues("transaction.duration",[">0",`<${y.bg}`]),s.query=u.formatString(),{pathname:O(n),query:{...s}}}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeTagKeys:new Set(["event.type","project"])};return e.getFilterKeys().forEach((n=>{const r=n.startsWith("!")?n.substr(1):n;(r.match(/\w+\(.*\)/)||l.J8.includes(r)||t.excludeTagKeys.has(r))&&e.removeFilter(n)})),e}function I(e){const t=(0,p.Z)(),n=(0,u.Ri)(e.datetime.period,e.datetime.start,e.datetime.end),r=Math.floor(86400*n);t?.setTag("query.period",r.toString());let a=">30d";r<=86400?a="<=1d":r<=604800?a="<=7d":r<=1209600?a="<=14d":r<=2592e3&&(a="<=30d"),t?.setTag("query.period.grouped",a)}function F(e){const{transaction:t}=e.query;return(0,m.ro)(t)}function L(e){return(0,d.g9)(e/1e3,e>1e3?2:0,!0)}function k(e){return!e.project.length||1===e.project.length&&e.project[0]===a.mP}function V(e,t){const n=e.query.project,r=new Set((0,f.Z)(n));return t.reduce(((e,t)=>(r.has(t.id)&&e.push(t.platform??"undefined"),e)),[])}function z(e,t){return V(e,t).join(", ")}}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_onboardingTasks_tsx-app_components_events_interfaces_utils_tsx-app_utils_d-b1ba18.f39cf9637d49dd27f91638ac3ae5d4ce.js.map