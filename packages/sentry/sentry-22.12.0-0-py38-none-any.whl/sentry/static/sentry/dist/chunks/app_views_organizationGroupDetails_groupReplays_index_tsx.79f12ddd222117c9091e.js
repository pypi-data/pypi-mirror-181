"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupReplays_index_tsx"],{"./app/utils/replays/hooks/useReplayList.tsx":(e,s,t)=>{t.d(s,{Z:()=>n});var a=t("../node_modules/react/index.js"),o=t("./app/utils/replays/fetchReplayList.tsx"),r=t("./app/utils/useApi.tsx");const n=function(e){let{eventView:s,location:t,organization:n}=e;const i=(0,r.Z)(),[p,l]=(0,a.useState)({fetchError:void 0,isFetching:!0,pageLinks:null,replays:[]}),u=(0,a.useCallback)((async()=>{l((e=>({...e,isFetching:!0})));const e=await(0,o.ZP)({api:i,organization:n,location:t,eventView:s});l(e)}),[i,n,t,s]);return(0,a.useEffect)((()=>{u()}),[u]),p}},"./app/utils/useCleanQueryParamsOnRouteLeave.tsx":(e,s,t)=>{t.d(s,{Z:()=>i,j:()=>n});var a=t("../node_modules/react/index.js"),o=t("../node_modules/react-router/es/index.js"),r=t("./app/utils/useLocation.tsx");function n(e){let{fieldsToClean:s,newLocation:t,oldPathname:a}=e;const r=s.some((e=>void 0!==t.query[e]));if(t.pathname===a||!r)return;const n=s.reduce(((e,s)=>(e[s]=void 0,e)),{...t.query});o.browserHistory.replace({pathname:t.pathname,query:n})}const i=function(e){let{fieldsToClean:s}=e;const t=(0,r.T)(),i=(0,a.useCallback)((e=>{n({fieldsToClean:s,newLocation:e,oldPathname:t.pathname})}),[t.pathname,s]);(0,a.useEffect)((()=>o.browserHistory.listen(i)),[i])}},"./app/views/organizationGroupDetails/groupReplays/index.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>R});var a=t("./app/components/acl/feature.tsx"),o=t("./app/components/alert.tsx"),r=t("./app/locale.tsx"),n=t("./app/styles/organization.tsx"),i=t("./app/utils/useOrganization.tsx"),p=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),l=t("../node_modules/react/index.js"),u=t("../node_modules/@sentry/core/esm/exports.js"),c=t("../node_modules/lodash/first.js"),d=t.n(c),y=t("./app/components/pagination.tsx"),m=t("./app/utils/discover/eventView.tsx"),g=t("./app/utils/discover/genericDiscoverQuery.tsx"),h=t("./app/utils/queryString.tsx"),x=t("./app/utils/replays/fetchReplayList.tsx"),f=t("./app/utils/replays/hooks/useReplayList.tsx"),v=t("./app/utils/useApi.tsx"),Z=t("./app/utils/useCleanQueryParamsOnRouteLeave.tsx"),w=t("./app/utils/useLocation.tsx"),b=t("./app/views/replays/replayTable.tsx"),k=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function j(e){let{group:s}=e;const t=(0,v.Z)(),a=(0,w.T)(),o=(0,i.Z)(),[r,n]=(0,l.useState)({pageLinks:null,replayIds:void 0}),[p,c]=(0,l.useState)(),{cursor:d}=a.query,f=(0,l.useCallback)((async()=>{const e=m.ZP.fromSavedQuery({id:"",name:"Errors within replay",version:2,fields:["replayId","count()"],query:`issue.id:${s.id} !replayId:""`,projects:[Number(s.project.id)]});try{const[{data:s},a,r]=await(0,g.AA)(t,`/organizations/${o.slug}/events/`,e.getEventsAPIPayload({query:{cursor:d}}));n({pageLinks:r?.getResponseHeader("Link")??"",replayIds:s.map((e=>String(e.replayId)))})}catch(e){u.Tb(e),c(e)}}),[t,d,o.slug,s.id,s.project.id]),j=(0,l.useMemo)((()=>r.replayIds?m.ZP.fromSavedQuery({id:"",name:"",version:2,fields:x.p8,projects:[Number(s.project.id)],query:`id:[${String(r.replayIds)}]`,orderby:(0,h.ro)(a.query.sort,x.yw)}):null),[a.query.sort,s.project.id,r.replayIds]);return(0,Z.Z)({fieldsToClean:["cursor"]}),(0,l.useEffect)((()=>{f()}),[f]),j?(0,k.tZ)(L,{eventView:j,organization:o,pageLinks:r.pageLinks}):(0,k.BX)(C,{children:[(0,k.tZ)(b.Z,{isFetching:!0,replays:[],showProjectColumn:!1,sort:void 0,fetchError:p}),(0,k.tZ)(y.Z,{pageLinks:null})]})}j.displayName="GroupReplays";const L=e=>{let{eventView:s,organization:t,pageLinks:a}=e;const o=(0,l.useMemo)((()=>({query:{}})),[]),{replays:r,isFetching:n,fetchError:i}=(0,f.Z)({eventView:s,location:o,organization:t});return(0,k.BX)(C,{children:[(0,k.tZ)(b.Z,{isFetching:n,replays:r,showProjectColumn:!1,sort:d()(s.sorts),fetchError:i}),(0,k.tZ)(y.Z,{pageLinks:a})]})};L.displayName="GroupReplaysTable";const C=(0,p.Z)(n.JH,{target:"e1g324zf0"})("box-shadow:0px 0px 1px ",(e=>e.theme.gray200),";background-color:",(e=>e.theme.background),";"),_=j,z=e=>{const s=(0,i.Z)();return(0,k.tZ)(a.Z,{features:["session-replay-ui"],organization:s,renderDisabled:function(){return(0,k.tZ)(n.JH,{children:(0,k.tZ)(o.Z,{type:"warning",children:(0,r.t)("You don't have access to this feature")})})},children:(0,k.tZ)(_,{...e})})};z.displayName="GroupReplaysContainer";const R=z}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupReplays_index_tsx.f7beac349cb81d73209ce543e539a875.js.map