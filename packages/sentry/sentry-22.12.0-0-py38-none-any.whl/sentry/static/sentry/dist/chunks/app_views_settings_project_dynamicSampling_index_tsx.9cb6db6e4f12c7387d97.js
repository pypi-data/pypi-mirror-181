"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_dynamicSampling_index_tsx"],{"./app/components/acl/access.tsx":(e,t,i)=>{i.d(t,{Z:()=>m});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(i("../node_modules/core-js/modules/es.array.includes.js"),i("../node_modules/react/index.js")),s=i("./app/components/alert.tsx"),o=i("./app/locale.tsx"),r=i("./app/utils/isRenderFunc.tsx"),c=i("./app/utils/withConfig.tsx"),l=i("./app/utils/withOrganization.tsx");const p=(0,i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(s.Z,{type:"error",showIcon:!0,children:(0,o.t)("You do not have sufficient permissions to access this.")});class d extends a.Component{render(){const{organization:e,config:t,access:i,requireAll:n,isSuperuser:a,renderNoAccessMessage:s,children:o}=this.props,{access:c}=e||{access:[]},l=!i||i[n?"every":"some"]((e=>c.includes(e))),d=!(!t.user||!t.user.isSuperuser),m={hasAccess:l,hasSuperuser:d},u=l&&(!a||d);return u||"function"!=typeof s?!u&&s?p:(0,r.l)(o)?o(m):u?o:null:s(m)}}d.displayName="Access",(0,n.Z)(d,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const m=(0,l.Z)((0,c.Z)(d))},"./app/views/settings/organization/permissionAlert.tsx":(e,t,i)=>{i.d(t,{Z:()=>c});var n=i("./app/components/acl/access.tsx"),a=i("./app/components/alert.tsx"),s=i("./app/locale.tsx"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{access:t=["org:write"],message:i=(0,s.t)("These settings can only be edited by users with the organization owner or manager role."),organization:r,...c}=e;return(0,o.tZ)(n.Z,{access:t,organization:r,children:e=>{let{hasAccess:t}=e;return!t&&(0,o.tZ)(a.Z,{"data-test-id":"org-permission-alert",type:"warning",showIcon:!0,...c,children:i})}})}r.displayName="PermissionAlert";const c=r},"./app/views/settings/project/dynamicSampling/index.tsx":(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var n=i("./app/components/acl/feature.tsx"),a=i("./app/components/acl/featureDisabled.tsx"),s=i("./app/components/panels/index.tsx"),o=i("./app/locale.tsx"),r=i("./app/utils/useOrganization.tsx"),c=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),l=(i("../node_modules/core-js/modules/es.array.includes.js"),i("../node_modules/react/index.js")),p=i("./app/actionCreators/indicator.tsx"),d=i("./app/components/button.tsx"),m=i("./app/components/featureBadge.tsx"),u=i("./app/components/forms/fields/booleanField.tsx"),g=i("./app/components/sentryDocumentTitle.tsx"),h=i("./app/stores/projectsStore.tsx"),y=i("./app/styles/space.tsx");let b;!function(e){e.BOOST_ENVIRONMENTS="boostEnvironments",e.BOOST_LATEST_RELEASES="boostLatestRelease",e.BOOST_KEY_TRANSACTIONS="boostKeyTransactions",e.IGNORE_HEALTH_CHECKS="ignoreHealthChecks"}(b||(b={}));var x,Z=i("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),f=i("./app/utils/handleXhrErrorResponse.tsx"),S=i("./app/utils/useApi.tsx"),C=i("./app/views/settings/components/settingsPageHeader.tsx"),_=i("./app/views/settings/components/text/textBlock.tsx"),v=i("./app/views/settings/organization/permissionAlert.tsx"),k=i("./app/components/checkboxFancy/checkboxFancy.tsx"),w=i("./app/components/featureFeedback/index.tsx"),A=i("./app/components/forms/index.tsx"),T=i("./app/components/forms/controls/textarea.tsx"),O=i("./app/components/forms/field/index.tsx"),j=i("./app/stores/configStore.tsx"),E=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");!function(e){e.TRANSACTION_NAME="transaction_name",e.CUSTOM_TAG="custom_tag",e.OTHER="other"}(x||(x={}));const z={opinionAboutFeature:"",tracingCapturingPriorities:[{title:(0,o.t)("By transaction name"),value:x.TRANSACTION_NAME,checked:!1},{title:(0,o.t)("By custom tag"),value:x.CUSTOM_TAG,checked:!1},{title:(0,o.t)("Other"),value:x.OTHER,checked:!1}],tracingCapturingOtherPriority:""};function N(e){let{options:t,onChange:i,otherTextField:n}=e;const a=(0,l.useCallback)((e=>{const n=t.map((t=>t.value===e.value?{...t,checked:!t.checked}:t));i(n)}),[i,t]);return(0,E.tZ)(l.Fragment,{children:t.map((e=>"other"===e.value?(0,E.BX)(R,{onClick:()=>a(e),children:[(0,E.tZ)(k.Z,{isChecked:e.checked}),e.title,n]},e.value):(0,E.BX)(B,{onClick:()=>a(e),children:[(0,E.tZ)(k.Z,{isChecked:e.checked}),e.title]},e.value)))})}function P(){const e=`Dynamic Sampling feedback by ${j.Z.get("user").email}`;return(0,E.tZ)(w.z,{featureName:"dynamic-sampling",initialData:z,buttonProps:{priority:"primary",size:"sm"},children:t=>{let{Header:i,Body:n,Footer:a,state:s,onFieldChange:r}=t;return(0,E.BX)(l.Fragment,{children:[(0,E.tZ)(i,{children:(0,o.t)("Submit Feedback")}),(0,E.BX)(n,{showSelfHostedMessage:!1,children:[(0,E.tZ)(O.Z,{label:(0,E.tZ)(F,{children:(0,o.t)("What do you think about this feature?")}),stacked:!0,inline:!1,flexibleControlStateSize:!0,children:(0,E.tZ)(T.Z,{name:"opinion-about-feedback",value:s.opinionAboutFeature,rows:5,autosize:!0,onChange:e=>r("opinionAboutFeature",e.target.value)})}),(0,E.tZ)(O.Z,{label:(0,E.tZ)(F,{children:(0,o.t)("What other priorities would you like Sentry to apply for trace capturing?")}),stacked:!0,inline:!1,flexibleControlStateSize:!0,children:(0,E.tZ)(N,{options:s.tracingCapturingPriorities,onChange:e=>{e.some((e=>e.value===x.OTHER&&!1===e.checked))&&r("tracingCapturingOtherPriority",""),r("tracingCapturingPriorities",e)},otherTextField:(0,E.tZ)(H,{inline:!1,name:"tracingCapturingOtherPriority",flexibleControlStateSize:!0,stacked:!0,disabled:s.tracingCapturingPriorities.some((e=>e.value===x.OTHER&&!1===e.checked)),onClick:e=>e.stopPropagation(),value:s.tracingCapturingOtherPriority,onChange:e=>r("tracingCapturingOtherPriority",e),placeholder:(0,o.t)("Please let us know which other priority")})})})]}),(0,E.tZ)(a,{primaryDisabledReason:!s.opinionAboutFeature.trim()&&s.tracingCapturingPriorities.every((e=>!1===e.checked))?(0,o.t)("Please answer at least one question"):void 0,submitEventData:{contexts:{feedback:{opinionAboutFeature:s.opinionAboutFeature||null,tracingCapturingPriorities:s.tracingCapturingPriorities.filter((e=>e.checked)).map((e=>e.title)).join(", ")||null,tracingCapturingOtherPriority:s.tracingCapturingOtherPriority||null}},message:s.opinionAboutFeature.trim()?`${e} - ${s.opinionAboutFeature}`:e}})]})}})}N.displayName="MultipleCheckboxField",P.displayName="SamplingFeedback";const F=(0,c.Z)("strong",{target:"e15zhdr3"})("margin-bottom:",(0,y.Z)(1),";display:inline-block;"),B=(0,c.Z)("div",{target:"e15zhdr2"})("cursor:pointer;display:grid;grid-template-columns:max-content 1fr;gap:",(0,y.Z)(1),";align-items:center;:not(:last-child){margin-bottom:",(0,y.Z)(1),";}"),R=(0,c.Z)(B,{target:"e15zhdr1"})("grid-template-columns:max-content max-content 1fr;@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:max-content 1fr;}"),H=(0,c.Z)(A.nv,{target:"e15zhdr0"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-column:1/-1;}&&{input{",(e=>e.disabled&&"cursor: pointer;"),";}}");var D=i("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");const I={[b.BOOST_LATEST_RELEASES]:{label:(0,o.t)("Prioritize new releases"),help:(0,o.t)("Captures more transactions for your new releases as they are being adopted")},[b.BOOST_ENVIRONMENTS]:{label:(0,o.t)("Prioritize dev environments"),help:(0,o.t)("Captures more traces from environments that contain “dev” and “test”")},[b.BOOST_KEY_TRANSACTIONS]:{label:(0,o.t)("Prioritize key transactions"),help:(0,o.t)("Captures more of your most important (starred) transactions")},[b.IGNORE_HEALTH_CHECKS]:{label:(0,o.t)("Ignore health checks"),help:(0,o.t)("Discards your health checks transactions")}};function M(e){let{project:t}=e;const i=(0,r.Z)(),n=(0,S.Z)(),a=i.access.includes("project:write"),c=t.dynamicSamplingBiases??[];(0,l.useEffect)((()=>{(0,Z.Z)("dynamic_sampling_settings.viewed",{organization:i,project_id:t.id})}),[t.id,i]);const y=(0,l.useCallback)((()=>{(0,Z.Z)("dynamic_sampling_settings.read_docs_clicked",{organization:i,project_id:t.id})}),[i,t.id]);return(0,E.tZ)(g.Z,{title:(0,o.t)("Dynamic Sampling"),children:(0,E.BX)(l.Fragment,{children:[(0,E.tZ)(C.Z,{title:(0,E.BX)(l.Fragment,{children:[(0,o.t)("Dynamic Sampling")," ",(0,E.tZ)(m.Z,{type:"new"})]}),action:(0,E.tZ)(P,{})}),(0,E.tZ)(_.Z,{children:(0,o.t)("Sentry aims to capture the most valuable transactions in full detail, so you have the necessary data to resolve any performance issues.")}),(0,E.tZ)(v.Z,{organization:i,access:["project:write"],message:(0,o.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")}),(0,E.BX)(s.s_,{children:[(0,E.tZ)(s.V9,{children:(0,o.t)("Sampling Priorities")}),(0,E.tZ)(s.N,{children:Object.entries(I).map((e=>{let[s,r]=e;const l=c.find((e=>e.id===s));return l?(0,D.az)(u.Z,{...r,key:s,name:s,value:l.active,onChange:()=>async function(e){(0,p.E3)();const a=c.map((t=>t.id===e.id?{...t,active:!t.active}:t));try{const s=await n.requestPromise(`/projects/${i.slug}/${t.slug}/`,{method:"PUT",data:{dynamicSamplingBiases:a}});(0,Z.Z)(e.active?"dynamic_sampling_settings.priority_disabled":"dynamic_sampling_settings.priority_enabled",{organization:i,project_id:t.id,id:e.id}),h.Z.onUpdateSuccess(s),(0,p.S9)((0,o.t)("Successfully updated dynamic sampling configuration"))}catch(e){const t=(0,o.t)("Unable to update dynamic sampling configuration");(0,f.Z)(t)(e),(0,p.Iw)(t)}}(l),disabled:!a,disabledReason:a?void 0:(0,o.t)("You do not have permission to edit this setting")}):null}))}),(0,E.tZ)(X,{children:(0,E.tZ)(d.ZP,{href:"https://docs.sentry.io/product/data-management-settings/dynamic-sampling/",onClick:y,external:!0,children:(0,o.t)("Read Docs")})})]})]})})}M.displayName="DynamicSampling";const X=(0,c.Z)(s.jH,{target:"e1d1z9va0"})("padding:",(0,y.Z)(1.5)," ",(0,y.Z)(2),";display:flex;align-items:center;justify-content:flex-end;");function L(e){let{project:t}=e;const i=(0,r.Z)();return(0,E.tZ)(n.Z,{features:["dynamic-sampling"],organization:i,renderDisabled:()=>(0,E.tZ)(a.Z,{alert:s.aU,features:["organizations:dynamic-sampling"],featureName:(0,o.t)("Dynamic Sampling")}),children:(0,E.tZ)(M,{project:t})})}L.displayName="DynamicSamplingContainer"}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_dynamicSampling_index_tsx.8d4a0c519862e97bd4cad3e82ff091b5.js.map