"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_asyncComponent_tsx"],{"./app/components/asyncComponent.tsx":(e,t,s)=>{s.d(t,{Z:()=>k});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react/index.js")),n=s("../node_modules/@sentry/core/esm/exports.js"),i=s("../node_modules/lodash/isEqual.js"),a=s.n(i),l=s("../node_modules/prop-types/index.js"),u=s("./app/api.tsx"),d=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=s("../node_modules/lodash/debounce.js"),c=s.n(p),h=s("./app/components/input.tsx"),m=s("./app/components/loadingIndicator.tsx"),g=s("./app/locale.tsx"),y=s("./app/utils/withSentryRouter.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends o.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{query:"",busy:!1}),(0,r.Z)(this,"immediateQuery",(async e=>{const{location:t,api:s}=this.props;this.setState({busy:!0});try{const[r,,o]=await s.requestPromise(`${this.props.url}`,{includeAllArgs:!0,method:"GET",query:{...t.query,query:e}});this.state.query===e&&this.props.onSuccess(r,o)}catch{this.props.onError()}this.setState({busy:!1})})),(0,r.Z)(this,"query",c()(this.immediateQuery,this.props.debounceWait)),(0,r.Z)(this,"handleChange",(e=>{this.query(e),this.setState({query:e})})),(0,r.Z)(this,"handleInputChange",(e=>this.handleChange(e.target.value))),(0,r.Z)(this,"handleSearch",(e=>{const{updateRoute:t,onSearchSubmit:s}=this.props;if(e.preventDefault(),t){const{router:e,location:t}=this.props;e.push({pathname:t.pathname,query:{query:this.state.query}})}"function"==typeof s&&s(this.state.query,e)}))}render(){const{placeholder:e,children:t,className:s}=this.props,{busy:r,query:o}=this.state,n=(0,x.BX)(b,{onSubmit:this.handleSearch,children:[(0,x.tZ)(h.Z,{value:o,onChange:this.handleInputChange,className:s,placeholder:e}),r&&(0,x.tZ)(f,{size:18,hideMessage:!0,mini:!0})]});return void 0===t?n:t({defaultSearchBar:n,busy:r,value:o,handleChange:this.handleChange})}}Z.displayName="AsyncComponentSearchInput",(0,r.Z)(Z,"defaultProps",{placeholder:(0,g.t)("Search..."),debounceWait:200});const f=(0,d.Z)(m.Z,{target:"eup3waa1"})({name:"1jyfazj",styles:"position:absolute;right:25px;top:50%;transform:translateY(-13px)"}),b=(0,d.Z)("form",{target:"eup3waa0"})({name:"bjn8wh",styles:"position:relative"}),w=(0,y.Z)(Z);var j=s("./app/components/loadingError.tsx"),S=s("./app/utils/analytics.tsx"),R=s("./app/utils/getRouteStringFromRoutes.tsx"),E=s("./app/views/permissionDenied.tsx"),_=s("./app/views/routeError.tsx");function v(e,t){return function(){try{return t(...arguments)}catch(t){return console.error(t),window.setTimeout((()=>{throw t})),e.setState({error:t}),null}}}class q extends o.Component{constructor(e,t){var s;super(e,t),s=this,(0,r.Z)(this,"reloadOnVisible",!1),(0,r.Z)(this,"shouldReloadOnVisible",!1),(0,r.Z)(this,"shouldReload",!1),(0,r.Z)(this,"shouldRenderBadRequests",!1),(0,r.Z)(this,"disableErrorReport",!0),(0,r.Z)(this,"api",new u.KU),(0,r.Z)(this,"_measurement",void 0),(0,r.Z)(this,"markShouldMeasure",(function(){let{remainingRequests:e,error:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s._measurement.hasMeasured||(s._measurement.finished=0===e,s._measurement.error=t||s._measurement.error)})),(0,r.Z)(this,"remountComponent",(()=>{this.shouldReload?this.reloadData():this.setState(this.getDefaultState(),this.fetchData)})),(0,r.Z)(this,"visibilityReloader",(()=>this.shouldReloadOnVisible&&!this.state.loading&&!document.hidden&&this.reloadData())),(0,r.Z)(this,"fetchData",(e=>{const t=this.getEndpoints();t.length?(this.api.clear(),this.setState({loading:!0,error:!1,remainingRequests:t.length,...e}),t.forEach((e=>{let[t,s,r,o]=e;o=o||{};const n=this.props.location&&this.props.location.query||{};let i=r&&r.query||{};!o.paginate&&!n.cursor||o.disableEntireQuery||(i={...n,...i}),this.api.request(s,{method:"GET",...r,query:i,success:(e,s,r)=>{this.handleRequestSuccess({stateKey:t,data:e,resp:r},!0)},error:e=>{o.allowError&&o.allowError(e)&&(e=null),this.handleError(e,[t,s,r,o])}})}))):this.setState({loading:!1,error:!1})})),this.fetchData=v(this,this.fetchData.bind(this)),this.render=v(this,this.render.bind(this)),this.state=this.getDefaultState(),this._measurement={hasMeasured:!1},e.routes&&S.oF.mark({name:`async-component-${(0,R.Z)(e.routes)}`})}UNSAFE_componentWillMount(){this.api=new u.KU,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)}componentDidUpdate(e,t){const s=!!t.router,r=void 0!==e.location,o=r?this.props.location:s?this.context.router.location:null,n=r?e.location:s?t.router.location:null;if(o&&n){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){const e=(0,R.Z)(this.props.routes);S.oF.measure({name:"app.component.async-component",start:`async-component-${e}`,data:{route:e,error:this._measurement.error}}),this._measurement.hasMeasured=!0}a()(this.props.params,e.params)&&o.search===n.search&&o.state===n.state||this.remountComponent()}}componentWillUnmount(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)}getDefaultState(){const e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((e=>{let[s,r]=e;t[s]=null})),t}reloadData(){this.fetchData({reloading:!0})}onRequestSuccess(e){}onRequestError(e,t){}onLoadAllEndpointsSuccess(){}handleRequestSuccess(e,t){let{stateKey:s,data:r,resp:o}=e;this.setState((e=>{const n={[s]:r,[`${s}PageLinks`]:o?.getResponseHeader("Link")};return t&&(n.remainingRequests=e.remainingRequests-1,n.loading=e.remainingRequests>1,n.reloading=e.reloading&&n.loading,this.markShouldMeasure({remainingRequests:n.remainingRequests})),n}),(()=>{0!==this.state.remainingRequests||this.state.error||this.onLoadAllEndpointsSuccess()})),this.onRequestSuccess({stateKey:s,data:r,resp:o})}handleError(e,t){const[s]=t;e&&e.responseText&&n.n_({message:e.responseText,category:"xhr",level:"error"}),this.setState((t=>{const r=t.remainingRequests>1,o={[s]:null,errors:{...t.errors,[s]:e},error:t.error||!!e,remainingRequests:t.remainingRequests-1,loading:r,reloading:t.reloading&&r};return this.markShouldMeasure({remainingRequests:o.remainingRequests,error:!0}),o})),this.onRequestError(e,t)}getEndpoints(){return[]}renderSearchInput(e){let{stateKey:t,url:s,...r}=e;const[o]=this.getEndpoints()||[null],n=t||o&&o[0],i=s||o&&o[1];return(0,x.tZ)(w,{url:i,...r,api:this.api,onSuccess:(e,t)=>{this.handleRequestSuccess({stateKey:n,data:e,resp:t})},onError:()=>{this.renderError(new Error("Error with AsyncComponentSearchInput"))}})}renderLoading(){return(0,x.tZ)(m.Z,{})}renderError(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{errors:s}=this.state,r=Object.values(s).find((e=>401===e?.status)),o=Object.values(s).find((e=>403===e?.status)),n=!!Object.values(s).find((e=>0!==e?.status))||t;if(r)return(0,x.tZ)(j.Z,{message:(0,g.t)("You are not authorized to access this resource.")});if(o)return(0,x.tZ)(E.Z,{});if(this.shouldRenderBadRequests){const e=Object.values(s).filter((e=>400===e?.status&&e?.responseJSON?.detail)).map((e=>e.responseJSON.detail));if(e.length)return(0,x.tZ)(j.Z,{message:[...new Set(e)].join("\n")})}return(0,x.tZ)(_.Z,{error:e,disableLogSentry:!n,disableReport:this.disableErrorReport})}get shouldRenderLoading(){return this.state.loading&&(!this.shouldReload||!this.state.reloading)}renderComponent(){return this.shouldRenderLoading?this.renderLoading():this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody()}renderBody(){throw new Error("Not implemented")}render(){return this.renderComponent()}}q.displayName="AsyncComponent",(0,r.Z)(q,"contextTypes",{router:l.object});const k=q},"./app/components/loadingError.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/alert.tsx"),n=s("./app/components/button.tsx"),i=s("./app/components/panels/index.tsx"),a=s("./app/locale.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{className:t,onRetry:s,message:r=(0,a.t)("There was an error loading data.")}=e;return(0,l.tZ)(p,{type:"error","data-test-id":"loading-error",showIcon:!0,className:t,trailingItems:s&&(0,l.tZ)(n.ZP,{onClick:s,type:"button",priority:"default",size:"sm",children:(0,a.t)("Retry")}),children:r})}u.displayName="LoadingError";const d=u,p=(0,r.Z)(o.Z,{target:"e1aoltpz0"})(i.s_," &{border-radius:0;border-width:1px 0;}")},"./app/components/sentryDocumentTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("../node_modules/react-document-title/index.js"),o=s.n(r),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{title:t="",orgSlug:s,projectSlug:r,noSuffix:i,children:a}=e;const l=s&&r?`${t} - ${s} - ${r}`:s?`${t} - ${s}`:r?`${t} - ${r}`:t,u=i?l:""!==l?`${l} - Sentry`:"Sentry";return(0,n.tZ)(o(),{title:u,children:a})}i.displayName="SentryDocumentTitle";const a=i},"./app/styles/organization.tsx":(e,t,s)=>{s.d(t,{Gh:()=>a,JH:()=>n,mr:()=>i});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/styles/space.tsx");const n=(0,r.Z)("main",{target:"e12cn1y22"})("display:flex;flex-direction:column;flex:1;padding:",(0,o.Z)(3)," ",(0,o.Z)(4),";"),i=(0,r.Z)("header",{target:"e12cn1y21"})("display:flex;justify-content:space-between;align-items:center;margin-bottom:",(0,o.Z)(2),";min-height:32px;"),a=(0,r.Z)("h4",{target:"e12cn1y20"})((e=>e.theme.text.pageTitle),";color:",(e=>e.theme.headingColor),";flex:1;margin:0;")},"./app/utils/getRouteStringFromRoutes.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/lodash/findLastIndex.js"),o=s.n(r);function n(e){if(!Array.isArray(e))return"";const t=e.filter((e=>!!e.path)),s=o()(t,(e=>{let{path:t}=e;return t.startsWith("/")}));return t.slice(s).filter((e=>{let{path:t}=e;return!!t})).map((e=>{let{path:t}=e;return t})).join("")}},"./app/utils/useRouteContext.tsx":(e,t,s)=>{s.d(t,{s:()=>n}),s("../node_modules/core-js/modules/es.error.cause.js");var r=s("../node_modules/react/index.js"),o=s("./app/views/routeContext.tsx");function n(){const e=(0,r.useContext)(o.X);if(null===e)throw new Error("useRouteContext called outside of routes provider");return e}},"./app/utils/useRoutes.tsx":(e,t,s)=>{s.d(t,{V:()=>o});var r=s("./app/utils/useRouteContext.tsx");function o(){return(0,r.s)().routes}},"./app/utils/withProject.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),n=s("./app/sentryTypes.tsx"),i=s("./app/utils/getDisplayName.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>{var t;return t=class extends o.Component{render(){const{project:t,...s}=this.props;return(0,a.tZ)(e,{project:t??this.context.project,...s})}},(0,r.Z)(t,"displayName",`withProject(${(0,i.Z)(e)})`),(0,r.Z)(t,"contextTypes",{project:n.Z.Project}),t}},"./app/views/permissionDenied.tsx":(e,t,s)=>{s.d(t,{Z:()=>x}),s("../node_modules/core-js/modules/es.error.cause.js");var r=s("../node_modules/react/index.js"),o=s("../node_modules/@sentry/core/esm/exports.js"),n=s("./app/components/links/externalLink.tsx"),i=s("./app/components/loadingError.tsx"),a=s("./app/components/sentryDocumentTitle.tsx"),l=s("./app/locale.tsx"),u=s("./app/styles/organization.tsx"),d=s("./app/utils/getRouteStringFromRoutes.tsx"),p=s("./app/utils/useRoutes.tsx"),c=s("./app/utils/withOrganization.tsx"),h=s("./app/utils/withProject.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g="Permission Denied";function y(e){const{organization:t,project:s}=e,c=(0,p.V)();return(0,r.useEffect)((()=>{const e=(0,d.Z)(c);o.$e((r=>{r.setFingerprint([g,e]),r.setExtra("route",e),r.setExtra("orgFeatures",t&&t.features||[]),r.setExtra("orgAccess",t&&t.access||[]),r.setExtra("projectFeatures",s&&s.features||[]),o.Tb(new Error(`${g}${e?` : ${e}`:""}`))}))}),[]),(0,m.tZ)(a.Z,{title:(0,l.t)("Permission Denied"),children:(0,m.tZ)(u.JH,{children:(0,m.tZ)(i.Z,{message:(0,l._N)("Your role does not have the necessary permissions to access this\n             resource, please read more about [link:organizational roles]",{link:(0,m.tZ)(n.Z,{href:"https://docs.sentry.io/product/accounts/membership/"})})})})})}y.displayName="PermissionDenied";const x=(0,c.Z)((0,h.Z)(y))},"./app/views/routeError.tsx":(e,t,s)=>{s.d(t,{Z:()=>b});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),n=s("../node_modules/@sentry/core/esm/exports.js"),i=s("../node_modules/@sentry/browser/esm/sdk.js"),a=s("./app/components/alert.tsx"),l=s("./app/components/list/index.tsx"),u=s("./app/components/list/listItem.tsx"),d=s("./app/locale.tsx"),p=s("./app/stores/organizationStore.tsx"),c=s("./app/stores/useLegacyStore.tsx"),h=s("./app/styles/space.tsx"),m=s("./app/utils/getRouteStringFromRoutes.tsx"),g=s("./app/utils/useRoutes.tsx"),y=s("./app/utils/withProject.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e){let{error:t,disableLogSentry:s,disableReport:r,project:h}=e;const y=(0,g.V)(),{organization:Z}=(0,c.X)(p.Z);return(0,o.useEffect)((()=>{if(s)return;if(!t)return;const e=(0,m.Z)(y),o=t=>(t.setExtra("route",e),t.setExtra("orgFeatures",Z?.features??[]),t.setExtra("orgAccess",Z?.access??[]),t.setExtra("projectFeatures",h?.features??[]),t);if(e)try{t.message=`${t.message}: ${e}`}catch(e){n.$e((t=>{o(t),n.Tb(e)}))}const a=window.setTimeout((()=>{n.$e((e=>{o(e),n.Tb(t)})),r||i.jp()}));return function(){window.clearTimeout(a)}}),[t,s]),(0,o.useEffect)((()=>()=>document.querySelector(".sentry-error-embed-wrapper")?.remove())),(0,x.BX)(a.Z,{type:"error",children:[(0,x.tZ)(f,{children:(0,d.t)("Oops! Something went wrong")}),(0,x.tZ)("p",{children:(0,d.t)("\n          It looks like you've hit an issue in our client application. Don't worry though!\n          We use Sentry to monitor Sentry and it's likely we're already looking into this!\n          ")}),(0,x.tZ)("p",{children:(0,d.t)("If you're daring, you may want to try the following:")}),(0,x.BX)(l.Z,{symbol:"bullet",children:[window&&window.adblockSuspected&&(0,x.tZ)(u.Z,{children:(0,d.t)("We detected something AdBlock-like. Try disabling it, as it's known to cause issues.")}),(0,x.tZ)(u.Z,{children:(0,d._N)("Give it a few seconds and [link:reload the page].",{link:(0,x.tZ)("a",{onClick:()=>{window.location.href=window.location.href}})})}),(0,x.tZ)(u.Z,{children:(0,d._N)("If all else fails, [link:contact us] with more details.",{link:(0,x.tZ)("a",{href:"https://github.com/getsentry/sentry/issues/new/choose"})})})]})]})}Z.displayName="RouteError";const f=(0,r.Z)("h1",{target:"e1isf1bc0"})("font-size:",(e=>e.theme.fontSizeLarge),";line-height:1.4;margin-bottom:",(0,h.Z)(1),";"),b=(0,y.Z)(Z)}}]);
//# sourceMappingURL=../sourcemaps/app_components_asyncComponent_tsx.83cb36bc8bffd3f9200c85555b53376f.js.map