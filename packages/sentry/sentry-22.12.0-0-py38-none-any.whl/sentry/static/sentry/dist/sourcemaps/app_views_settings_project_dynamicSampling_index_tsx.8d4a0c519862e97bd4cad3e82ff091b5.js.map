{"version":3,"file":"chunks/app_views_settings_project_dynamicSampling_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/acl/access.tsx","webpack:///./app/views/settings/organization/permissionAlert.tsx","webpack:///./app/types/sampling.tsx","webpack:///./app/views/settings/project/dynamicSampling/samplingFeedback.tsx","webpack:///./app/views/settings/project/dynamicSampling/dynamicSampling.tsx","webpack:///./app/views/settings/project/dynamicSampling/index.tsx"],"sourcesContent":["import {Component} from 'react';\n\nimport Alert from 'sentry/components/alert';\nimport {t} from 'sentry/locale';\nimport {Config, Organization, Scope} from 'sentry/types';\nimport {isRenderFunc} from 'sentry/utils/isRenderFunc';\nimport withConfig from 'sentry/utils/withConfig';\nimport withOrganization from 'sentry/utils/withOrganization';\n\nconst DEFAULT_NO_ACCESS_MESSAGE = (\n  <Alert type=\"error\" showIcon>\n    {t('You do not have sufficient permissions to access this.')}\n  </Alert>\n);\n\n// Props that function children will get.\nexport type ChildRenderProps = {\n  hasAccess: boolean;\n  hasSuperuser: boolean;\n};\n\ntype ChildFunction = (props: ChildRenderProps) => React.ReactNode;\n\ntype DefaultProps = {\n  /**\n   * List of required access levels\n   */\n  access: Scope[];\n\n  /**\n   * Custom renderer function for \"no access\" message OR `true` to use\n   * default message. `false` will suppress message.\n   */\n  renderNoAccessMessage: ChildFunction | boolean;\n\n  /**\n   * Requires superuser\n   */\n  isSuperuser?: boolean;\n\n  /**\n   * Should the component require all access levels or just one or more.\n   */\n  requireAll?: boolean;\n};\n\nconst defaultProps: DefaultProps = {\n  renderNoAccessMessage: false,\n  isSuperuser: false,\n  requireAll: true,\n  access: [],\n};\n\ntype Props = {\n  /**\n   * Configuration from ConfigStore\n   */\n  config: Config;\n\n  /**\n   * Current Organization\n   */\n  organization: Organization;\n\n  /**\n   * Children can be a node or a function as child.\n   */\n  children?: React.ReactNode | ChildFunction;\n} & Partial<DefaultProps>;\n\n/**\n * Component to handle access restrictions.\n */\nclass Access extends Component<Props> {\n  static defaultProps = defaultProps;\n\n  render() {\n    const {\n      organization,\n      config,\n      access,\n      requireAll,\n      isSuperuser,\n      renderNoAccessMessage,\n      children,\n    } = this.props;\n\n    const {access: orgAccess} = organization || {access: []};\n    const method = requireAll ? 'every' : 'some';\n\n    const hasAccess = !access || access[method](acc => orgAccess.includes(acc));\n    const hasSuperuser = !!(config.user && config.user.isSuperuser);\n\n    const renderProps: ChildRenderProps = {\n      hasAccess,\n      hasSuperuser,\n    };\n\n    const render = hasAccess && (!isSuperuser || hasSuperuser);\n\n    if (!render && typeof renderNoAccessMessage === 'function') {\n      return renderNoAccessMessage(renderProps);\n    }\n    if (!render && renderNoAccessMessage) {\n      return DEFAULT_NO_ACCESS_MESSAGE;\n    }\n\n    if (isRenderFunc<ChildFunction>(children)) {\n      return children(renderProps);\n    }\n\n    return render ? children : null;\n  }\n}\n\nexport default withOrganization(withConfig(Access));\n","import {ReactNode} from 'react';\n\nimport Access from 'sentry/components/acl/access';\nimport Alert from 'sentry/components/alert';\nimport {t} from 'sentry/locale';\nimport {Organization, Scope} from 'sentry/types';\n\ntype Props = React.ComponentPropsWithoutRef<typeof Alert> & {\n  access?: Scope[];\n  message?: ReactNode;\n  organization?: Organization;\n};\n\nfunction PermissionAlert({\n  access = ['org:write'],\n  message = t(\n    'These settings can only be edited by users with the organization owner or manager role.'\n  ),\n  organization,\n  ...props\n}: Props) {\n  return (\n    <Access access={access} organization={organization}>\n      {({hasAccess}) =>\n        !hasAccess && (\n          <Alert data-test-id=\"org-permission-alert\" type=\"warning\" showIcon {...props}>\n            {message}\n          </Alert>\n        )\n      }\n    </Access>\n  );\n}\n\nexport default PermissionAlert;\n","export enum DynamicSamplingBiasType {\n  BOOST_ENVIRONMENTS = 'boostEnvironments',\n  BOOST_LATEST_RELEASES = 'boostLatestRelease',\n  BOOST_KEY_TRANSACTIONS = 'boostKeyTransactions',\n  IGNORE_HEALTH_CHECKS = 'ignoreHealthChecks',\n}\n\nexport type DynamicSamplingBias = {\n  active: boolean;\n  id: DynamicSamplingBiasType;\n};\n","import {Fragment, useCallback} from 'react';\nimport styled from '@emotion/styled';\n\nimport CheckboxFancy from 'sentry/components/checkboxFancy/checkboxFancy';\nimport {FeatureFeedback} from 'sentry/components/featureFeedback';\nimport {TextField} from 'sentry/components/forms';\nimport Textarea from 'sentry/components/forms/controls/textarea';\nimport Field from 'sentry/components/forms/field';\nimport {t} from 'sentry/locale';\nimport ConfigStore from 'sentry/stores/configStore';\nimport space from 'sentry/styles/space';\n\nenum TracingCapturingPriorities {\n  TRANSACTION_NAME = 'transaction_name',\n  CUSTOM_TAG = 'custom_tag',\n  OTHER = 'other',\n}\n\ntype Option = {\n  checked: boolean;\n  title: string;\n  value: string | number;\n};\n\ntype InitialData = {\n  opinionAboutFeature: string;\n  tracingCapturingOtherPriority: string;\n  tracingCapturingPriorities: Option[];\n};\n\nconst initialData: InitialData = {\n  opinionAboutFeature: '',\n  tracingCapturingPriorities: [\n    {\n      title: t('By transaction name'),\n      value: TracingCapturingPriorities.TRANSACTION_NAME,\n      checked: false,\n    },\n    {\n      title: t('By custom tag'),\n      value: TracingCapturingPriorities.CUSTOM_TAG,\n      checked: false,\n    },\n    {\n      title: t('Other'),\n      value: TracingCapturingPriorities.OTHER,\n      checked: false,\n    },\n  ],\n  tracingCapturingOtherPriority: '',\n};\n\nfunction MultipleCheckboxField({\n  options,\n  onChange,\n  otherTextField,\n}: {\n  onChange: (options: Option[]) => void;\n  options: Option[];\n  otherTextField: React.ReactNode;\n}) {\n  const handleClick = useCallback(\n    (newOption: Option) => {\n      const newOptions = options.map(option => {\n        if (option.value === newOption.value) {\n          return {\n            ...option,\n            checked: !option.checked,\n          };\n        }\n        return option;\n      });\n\n      onChange(newOptions);\n    },\n    [onChange, options]\n  );\n\n  return (\n    <Fragment>\n      {options.map(option => {\n        if (option.value === 'other') {\n          return (\n            <CheckboxOtherOptionWrapper\n              key={option.value}\n              onClick={() => handleClick(option)}\n            >\n              <CheckboxFancy isChecked={option.checked} />\n              {option.title}\n              {otherTextField}\n            </CheckboxOtherOptionWrapper>\n          );\n        }\n\n        return (\n          <CheckboxOption key={option.value} onClick={() => handleClick(option)}>\n            <CheckboxFancy isChecked={option.checked} />\n            {option.title}\n          </CheckboxOption>\n        );\n      })}\n    </Fragment>\n  );\n}\n\nexport function SamplingFeedback() {\n  const feedbackMessage = `Dynamic Sampling feedback by ${ConfigStore.get('user').email}`;\n\n  return (\n    <FeatureFeedback\n      featureName=\"dynamic-sampling\"\n      initialData={initialData}\n      buttonProps={{\n        priority: 'primary',\n        size: 'sm',\n      }}\n    >\n      {({Header, Body, Footer, state, onFieldChange}) => {\n        return (\n          <Fragment>\n            <Header>{t('Submit Feedback')}</Header>\n            <Body showSelfHostedMessage={false}>\n              <Field\n                label={<Label>{t('What do you think about this feature?')}</Label>}\n                stacked\n                inline={false}\n                flexibleControlStateSize\n              >\n                <Textarea\n                  name=\"opinion-about-feedback\"\n                  value={state.opinionAboutFeature}\n                  rows={5}\n                  autosize\n                  onChange={event =>\n                    onFieldChange('opinionAboutFeature', event.target.value)\n                  }\n                />\n              </Field>\n              <Field\n                label={\n                  <Label>\n                    {t(\n                      'What other priorities would you like Sentry to apply for trace capturing?'\n                    )}\n                  </Label>\n                }\n                stacked\n                inline={false}\n                flexibleControlStateSize\n              >\n                <MultipleCheckboxField\n                  options={state.tracingCapturingPriorities}\n                  onChange={newTracingCapturingPriorities => {\n                    if (\n                      newTracingCapturingPriorities.some(\n                        newTracingCapturingPriority =>\n                          newTracingCapturingPriority.value ===\n                            TracingCapturingPriorities.OTHER &&\n                          newTracingCapturingPriority.checked === false\n                      )\n                    ) {\n                      onFieldChange('tracingCapturingOtherPriority', '');\n                    }\n                    onFieldChange(\n                      'tracingCapturingPriorities',\n                      newTracingCapturingPriorities\n                    );\n                  }}\n                  otherTextField={\n                    <OtherTextField\n                      inline={false}\n                      name=\"tracingCapturingOtherPriority\"\n                      flexibleControlStateSize\n                      stacked\n                      disabled={state.tracingCapturingPriorities.some(\n                        tracingCapturingPriority =>\n                          tracingCapturingPriority.value ===\n                            TracingCapturingPriorities.OTHER &&\n                          tracingCapturingPriority.checked === false\n                      )}\n                      onClick={event => event.stopPropagation()}\n                      value={state.tracingCapturingOtherPriority}\n                      onChange={value =>\n                        onFieldChange('tracingCapturingOtherPriority', value)\n                      }\n                      placeholder={t('Please let us know which other priority')}\n                    />\n                  }\n                />\n              </Field>\n            </Body>\n            <Footer\n              primaryDisabledReason={\n                !state.opinionAboutFeature.trim() &&\n                state.tracingCapturingPriorities.every(\n                  tracingCapturingPriority => tracingCapturingPriority.checked === false\n                )\n                  ? t('Please answer at least one question')\n                  : undefined\n              }\n              submitEventData={{\n                contexts: {\n                  feedback: {\n                    opinionAboutFeature: state.opinionAboutFeature || null,\n                    tracingCapturingPriorities:\n                      state.tracingCapturingPriorities\n                        .filter(\n                          tracingCapturingPriority => tracingCapturingPriority.checked\n                        )\n                        .map(tracingCapturingPriority => tracingCapturingPriority.title)\n                        .join(', ') || null,\n                    tracingCapturingOtherPriority:\n                      state.tracingCapturingOtherPriority || null,\n                  },\n                },\n                message: state.opinionAboutFeature.trim()\n                  ? `${feedbackMessage} - ${state.opinionAboutFeature}`\n                  : feedbackMessage,\n              }}\n            />\n          </Fragment>\n        );\n      }}\n    </FeatureFeedback>\n  );\n}\n\nconst Label = styled('strong')`\n  margin-bottom: ${space(1)};\n  display: inline-block;\n`;\n\nconst CheckboxOption = styled('div')`\n  cursor: pointer;\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  gap: ${space(1)};\n  align-items: center;\n  :not(:last-child) {\n    margin-bottom: ${space(1)};\n  }\n`;\n\nconst CheckboxOtherOptionWrapper = styled(CheckboxOption)`\n  grid-template-columns: max-content max-content 1fr;\n\n  @media (max-width: ${p => p.theme.breakpoints.small}) {\n    grid-template-columns: max-content 1fr;\n  }\n`;\n\nconst OtherTextField = styled(TextField)`\n  @media (max-width: ${p => p.theme.breakpoints.small}) {\n    grid-column: 1/-1;\n  }\n\n  && {\n    input {\n      ${p => p.disabled && 'cursor: pointer;'}\n    }\n  }\n`;\n","import {Fragment, useCallback, useEffect} from 'react';\nimport styled from '@emotion/styled';\n\nimport {\n  addErrorMessage,\n  addLoadingMessage,\n  addSuccessMessage,\n} from 'sentry/actionCreators/indicator';\nimport Button from 'sentry/components/button';\nimport FeatureBadge from 'sentry/components/featureBadge';\nimport BooleanField from 'sentry/components/forms/fields/booleanField';\nimport {Panel, PanelBody, PanelFooter, PanelHeader} from 'sentry/components/panels';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\nimport {t} from 'sentry/locale';\nimport ProjectsStore from 'sentry/stores/projectsStore';\nimport space from 'sentry/styles/space';\nimport {Project} from 'sentry/types';\nimport {DynamicSamplingBias, DynamicSamplingBiasType} from 'sentry/types/sampling';\nimport trackAdvancedAnalyticsEvent from 'sentry/utils/analytics/trackAdvancedAnalyticsEvent';\nimport handleXhrErrorResponse from 'sentry/utils/handleXhrErrorResponse';\nimport useApi from 'sentry/utils/useApi';\nimport useOrganization from 'sentry/utils/useOrganization';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\nimport TextBlock from 'sentry/views/settings/components/text/textBlock';\nimport PermissionAlert from 'sentry/views/settings/organization/permissionAlert';\n\nimport {SamplingFeedback} from './samplingFeedback';\n\nconst SERVER_SIDE_SAMPLING_DOC_LINK =\n  'https://docs.sentry.io/product/data-management-settings/dynamic-sampling/';\n\ntype Props = {\n  project: Project;\n};\n\nconst knowBiases = {\n  [DynamicSamplingBiasType.BOOST_LATEST_RELEASES]: {\n    label: t('Prioritize new releases'),\n    help: t('Captures more transactions for your new releases as they are being adopted'),\n  },\n  [DynamicSamplingBiasType.BOOST_ENVIRONMENTS]: {\n    label: t('Prioritize dev environments'),\n    help: t('Captures more traces from environments that contain “dev” and “test”'),\n  },\n  [DynamicSamplingBiasType.BOOST_KEY_TRANSACTIONS]: {\n    label: t('Prioritize key transactions'),\n    help: t('Captures more of your most important (starred) transactions'),\n  },\n  [DynamicSamplingBiasType.IGNORE_HEALTH_CHECKS]: {\n    label: t('Ignore health checks'),\n    help: t('Discards your health checks transactions'),\n  },\n};\n\nexport function DynamicSampling({project}: Props) {\n  const organization = useOrganization();\n  const api = useApi();\n\n  const hasAccess = organization.access.includes('project:write');\n  const biases = project.dynamicSamplingBiases ?? [];\n\n  useEffect(() => {\n    trackAdvancedAnalyticsEvent('dynamic_sampling_settings.viewed', {\n      organization,\n      project_id: project.id,\n    });\n  }, [project.id, organization]);\n\n  async function handleToggle(bias: DynamicSamplingBias) {\n    addLoadingMessage();\n\n    const newDynamicSamplingBiases = biases.map(b => {\n      if (b.id === bias.id) {\n        return {...b, active: !b.active};\n      }\n      return b;\n    });\n\n    try {\n      const result = await api.requestPromise(\n        `/projects/${organization.slug}/${project.slug}/`,\n        {\n          method: 'PUT',\n          data: {\n            dynamicSamplingBiases: newDynamicSamplingBiases,\n          },\n        }\n      );\n\n      trackAdvancedAnalyticsEvent(\n        bias.active\n          ? 'dynamic_sampling_settings.priority_disabled'\n          : 'dynamic_sampling_settings.priority_enabled',\n        {\n          organization,\n          project_id: project.id,\n          id: bias.id,\n        }\n      );\n\n      ProjectsStore.onUpdateSuccess(result);\n      addSuccessMessage(t('Successfully updated dynamic sampling configuration'));\n    } catch (error) {\n      const message = t('Unable to update dynamic sampling configuration');\n      handleXhrErrorResponse(message)(error);\n      addErrorMessage(message);\n    }\n  }\n\n  const handleReadDocs = useCallback(() => {\n    trackAdvancedAnalyticsEvent('dynamic_sampling_settings.read_docs_clicked', {\n      organization,\n      project_id: project.id,\n    });\n  }, [organization, project.id]);\n\n  return (\n    <SentryDocumentTitle title={t('Dynamic Sampling')}>\n      <Fragment>\n        <SettingsPageHeader\n          title={\n            <Fragment>\n              {t('Dynamic Sampling')} <FeatureBadge type=\"new\" />\n            </Fragment>\n          }\n          action={<SamplingFeedback />}\n        />\n        <TextBlock>\n          {t(\n            'Sentry aims to capture the most valuable transactions in full detail, so you have the necessary data to resolve any performance issues.'\n          )}\n        </TextBlock>\n        <PermissionAlert\n          organization={organization}\n          access={['project:write']}\n          message={t(\n            'These settings can only be edited by users with the organization owner, manager, or admin role.'\n          )}\n        />\n        <Panel>\n          <PanelHeader>{t('Sampling Priorities')}</PanelHeader>\n          <PanelBody>\n            {Object.entries(knowBiases).map(([key, value]) => {\n              const bias = biases.find(b => b.id === key);\n\n              if (!bias) {\n                return null;\n              }\n\n              return (\n                <BooleanField\n                  {...value}\n                  key={key}\n                  name={key}\n                  value={bias.active}\n                  onChange={() => handleToggle(bias)}\n                  disabled={!hasAccess}\n                  disabledReason={\n                    !hasAccess\n                      ? t('You do not have permission to edit this setting')\n                      : undefined\n                  }\n                />\n              );\n            })}\n          </PanelBody>\n          <StyledPanelFooter>\n            <Button\n              href={SERVER_SIDE_SAMPLING_DOC_LINK}\n              onClick={handleReadDocs}\n              external\n            >\n              {t('Read Docs')}\n            </Button>\n          </StyledPanelFooter>\n        </Panel>\n      </Fragment>\n    </SentryDocumentTitle>\n  );\n}\n\nconst StyledPanelFooter = styled(PanelFooter)`\n  padding: ${space(1.5)} ${space(2)};\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`;\n","import Feature from 'sentry/components/acl/feature';\nimport FeatureDisabled from 'sentry/components/acl/featureDisabled';\nimport {PanelAlert} from 'sentry/components/panels';\nimport {t} from 'sentry/locale';\nimport {Project} from 'sentry/types';\nimport useOrganization from 'sentry/utils/useOrganization';\n\nimport {DynamicSampling} from './dynamicSampling';\n\ntype Props = {\n  project: Project;\n};\n\nexport default function DynamicSamplingContainer({project}: Props) {\n  const organization = useOrganization();\n\n  return (\n    <Feature\n      features={['dynamic-sampling']}\n      organization={organization}\n      renderDisabled={() => (\n        <FeatureDisabled\n          alert={PanelAlert}\n          features={['organizations:dynamic-sampling']}\n          featureName={t('Dynamic Sampling')}\n        />\n      )}\n    >\n      <DynamicSampling project={project} />\n    </Feature>\n  );\n}\n"],"names":["DEFAULT_NO_ACCESS_MESSAGE","type","showIcon","t","Access","Component","render","organization","config","access","requireAll","isSuperuser","renderNoAccessMessage","children","this","props","orgAccess","hasAccess","acc","includes","hasSuperuser","user","renderProps","isRenderFunc","withOrganization","withConfig","PermissionAlert","message","DynamicSamplingBiasType","TracingCapturingPriorities","initialData","opinionAboutFeature","tracingCapturingPriorities","title","value","TRANSACTION_NAME","checked","CUSTOM_TAG","OTHER","tracingCapturingOtherPriority","MultipleCheckboxField","options","onChange","otherTextField","handleClick","useCallback","newOption","newOptions","map","option","Fragment","CheckboxOtherOptionWrapper","onClick","isChecked","CheckboxOption","SamplingFeedback","feedbackMessage","ConfigStore","email","featureName","buttonProps","priority","size","Header","Body","Footer","state","onFieldChange","showSelfHostedMessage","label","Label","stacked","inline","flexibleControlStateSize","name","rows","autosize","event","target","newTracingCapturingPriorities","some","newTracingCapturingPriority","OtherTextField","disabled","tracingCapturingPriority","stopPropagation","placeholder","primaryDisabledReason","trim","every","undefined","submitEventData","contexts","feedback","filter","join","space","p","theme","breakpoints","small","TextField","knowBiases","BOOST_LATEST_RELEASES","help","BOOST_ENVIRONMENTS","BOOST_KEY_TRANSACTIONS","IGNORE_HEALTH_CHECKS","DynamicSampling","project","useOrganization","api","useApi","biases","dynamicSamplingBiases","useEffect","trackAdvancedAnalyticsEvent","project_id","id","handleReadDocs","action","Object","entries","key","bias","find","b","active","async","addLoadingMessage","newDynamicSamplingBiases","result","requestPromise","slug","method","data","ProjectsStore","addSuccessMessage","error","handleXhrErrorResponse","addErrorMessage","handleToggle","disabledReason","StyledPanelFooter","href","external","PanelFooter","DynamicSamplingContainer","features","renderDisabled","alert","PanelAlert"],"sourceRoot":""}