

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using PSF Grids &mdash; webbpsf v0.8.0</title>
  

  
  
    <link rel="shortcut icon" href="_static/astropy_logo.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/stsci.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/stsci.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="More Examples" href="more_examples.html" />
    <link rel="prev" title="WFIRST Instrument Model Details" href="wfirst.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          
            <a href="index.html" class="icon icon-home"> webbpsf
            
            <img src="_static/stsci_pri_combo_mark_white.png" class="logo" />
          </a>

          
            
            
              <div class="version">
                0.8.0
              </div>
            
          
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
  
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Requirements &amp; Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="relnotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using WebbPSF via the Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwst.html">JWST Instrument Model Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="wfirst.html">WFIRST Instrument Model Details</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using PSF Grids</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-psf-grid">Example PSF grid</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="more_examples.html">More Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="poppy.html">Overview of POPPY (Physical Optics Propagation in Python)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">Detailed API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Diagnostics &amp; Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling.html">Sampling Requirements for Numerical Accuracy</a></li>
<li class="toctree-l1"><a class="reference internal" href="fft_optimization.html">Optimizing FFT Performance for PSF Computations with FFTW</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="available_opds.html">Appendix: Available Optical Path Difference (OPD) files</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Appendix: Instrument Property References</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">(Deprecated)  Graphical User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Developer Notes: Releasing a new version of WebbPSF</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">webbpsf</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using PSF Grids</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/psf_grids.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-psf-grids">
<h1>Using PSF Grids<a class="headerlink" href="#using-psf-grids" title="Permalink to this headline">¶</a></h1>
<p>WebbPSF includes functionality designed to work with the Photutils package to
enable precise PSF-fitting photometry and astrometry. This makes use of the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">GriddedPSFModel</span></code> class (available in Photutils &gt; 0.6), which implements a
version of the empirical or effective PSF (“ePSF”) modeling framework pioneered by Jay
Anderson, Ivan King, and collaborators. This approach has been highly successful with
HST and other space observatories, and we expect it will also be productive with JWST.
In practice we will want to use ePSF models derived from real observations, but for now
we can make them in simulation.</p>
<p>The first step is to create a grid of fiducial PSFs spanning the
instrument/detector of choice. This can be done using the <code class="xref py py-meth docutils literal notranslate"><span class="pre">psf_grid()</span></code> method
which will output a (list of or single) photutils GriddedPSFModel
object(s). Users can then use photutils to apply interpolation to the grid to
simulate a spatially dependent PSF anywhere on the instrument, without having
to perform a full PSF calculation at each location. This faster approach is
critical if you’re dealing with potentially tens of thousands of stars
scattered across many megapixels of detector real estate.</p>
<div class="admonition-jupyter-notebook admonition">
<p class="admonition-title">Jupyter Notebook</p>
<p>See <a class="reference external" href="https://github.com/spacetelescope/webbpsf/blob/master/notebooks/Gridded_PSF_Library.ipynb">this Gridded PSF Library tutorial notebook</a>
for more details and example code.</p>
</div>
<div class="section" id="example-psf-grid">
<h2>Example PSF grid<a class="headerlink" href="#example-psf-grid" title="Permalink to this headline">¶</a></h2>
<p>PSF grid calculations are useful for visualizing changes in the PSF across instrument fields of view. Here’s one example of that.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nrc</span> <span class="o">=</span> <span class="n">webbpsf</span><span class="o">.</span><span class="n">NIRCam</span><span class="p">()</span>
<span class="n">nrc</span><span class="o">.</span><span class="n">filter</span><span class="o">=</span><span class="s1">&#39;F212N&#39;</span>
<span class="n">nrc</span><span class="o">.</span><span class="n">detector</span><span class="o">=</span><span class="s1">&#39;NRCA3&#39;</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">nrc</span><span class="o">.</span><span class="n">psf_grid</span><span class="p">(</span><span class="n">num_psfs</span><span class="o">=</span><span class="mi">36</span><span class="p">,</span> <span class="n">all_detectors</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">webbpsf</span><span class="o">.</span><span class="n">gridded_library</span><span class="o">.</span><span class="n">display_psf_grid</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="_images/fig_psf_grid_nircam.png"><img alt="Example grid of NIRCam PSFs: 6x6 grid across NRCA3" src="_images/fig_psf_grid_nircam.png" style="width: 584.8px; height: 642.6px;" /></a>
<p class="caption"><span class="caption-text">Figure 1: An example of grid calculated across the NRCA3 detector in NIRCam. These PSFs are all very similar.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="_images/fig_psf_grid_diffs_nircam.png"><img alt="Example grid of NIRCam PSF differencess: 6x6 grid across NRCA3" src="_images/fig_psf_grid_diffs_nircam.png" style="width: 584.8px; height: 642.6px;" /></a>
<p class="caption"><span class="caption-text">Figure 2: By subtracting off the average PSF, the subtle differences from point to point become clear.
The PSF is sharpest in the upper left corner of this detector.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="more_examples.html" class="btn btn-neutral float-right" title="More Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="wfirst.html" class="btn btn-neutral float-left" title="WFIRST Instrument Model Details" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Association of Universities for Research in Astronomy
      <span class="lastupdated">
        Last updated on 20 Nov 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>